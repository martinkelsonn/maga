!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="cfc662fa-d513-4f1d-a3c3-47bc5645da87",e._sentryDebugIdIdentifier="sentry-dbid-cfc662fa-d513-4f1d-a3c3-47bc5645da87")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9447],{69447:function(e,t,a){a.r(t),a.d(t,{BackgroundProcesses:function(){return ee}});var o,n=a(45867),i=a(50180);let s=()=>{let{primaryWallet:e}=(0,n.SX)(),{shouldInitRecovery:t,initPasskeyRecoveryProcess:a}=(0,n.nN)(),[o,s]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let n=async()=>{await t()&&(s(!0),await a())};!o&&e&&n()},[e,t,a,o])};var r=a(93858),l=a(16068),u=a(14795),c=a(9108),d=a(93585),f=a(93112);let v=e=>{let{refId:t}=e,{selectedAccount:a}=(0,c.Z)(),{connector:o}=(0,r.m)(),{experimentationPlatformUser:n,experiments:s}=(0,u.aT)(),v=f.e.getAppVersion(),m=(0,d.s)();(0,i.useEffect)(()=>{a&&o&&setTimeout(()=>{l.I.emitEvent("wallet_connected",{connector:o.name,wallet_address:a})},2e3)},[a,o]),(0,i.useEffect)(()=>{t&&setTimeout(()=>l.I.emitEvent("incoming_referral",{ref_id:t}),2e3)},[t]),(0,i.useEffect)(()=>{setTimeout(()=>{n&&l.I.updateContext({experimentation_platform_user:n}),s&&l.I.emitEvent("assigned_experiments",{experiments:s})},2e3)},[n,s]),(0,i.useEffect)(()=>{l.I.updateContext({mode:m?"embed":"platform"})},[m]),(0,i.useEffect)(()=>{l.I.updateContext({app_version:v})},[v])};var m=a(18285),b=a(85648);let p=()=>{let e=(0,b.usePathname)(),t=(0,b.useSearchParams)(),a="".concat(e,"?").concat(t),o=(0,i.useRef)(a),n=!!m.Z,s=(0,i.useCallback)(()=>{window.history.back()},[]);(0,i.useEffect)(()=>{n&&(o.current===a?(m.Z.BackButton.hide(),m.Z.BackButton.offClick(s)):(m.Z.BackButton.show(),m.Z.BackButton.onClick(s)))},[a,n,s])};var g=a(27371);let _=()=>{(0,i.useEffect)(()=>{g.Z.init(3688477,6)},[])};var y=a(6793),k=a(5506);let h=()=>{let[e,t]=(0,i.useState)(!1);(0,i.useEffect)(()=>{e||(0,y.bP)(async e=>{await (0,k.S)(e)}).then(()=>{t(!0)})},[e])};var w=a(20268);let E=()=>{let e=(0,w.d)();(0,i.useEffect)(()=>{let t="".concat((e.height-1).toString(),"px");document.documentElement.style.setProperty("--sya-application-height",t)},[e])};var I=a(84214),C=a(26402);let S=()=>{let{selectedAccount:e}=(0,c.Z)(),t=(0,d.s)();(0,C.G)({pathParameters:{address:e},queryParameters:{invalidate:!0}},{enabled:null!=e&&!t})};var B=a(55104),F=a(20041),T=a(55135),N=a(71306),P=a(15103),Z=a(86614),x=a(11451),R=a(76782);(o||(o={})).SUBSCRIBE_FOR_NOTIFICATION="subscribeForNotificationsUnauthenticated";class A{async subscribe(e){let{token:t,walletAddress:a}=e,o=(0,R.V1)(F.I.firebaseFunctions,"subscribeForNotificationsUnauthenticated"),{data:n}=await o({token:t,walletAddress:a});return n}}let W=new A,G=e=>(0,x.useMutation)(e=>W.subscribe(e),e),O=()=>{let e=(0,b.useRouter)(),{selectedAccount:t}=(0,c.Z)(),[a,o]=(0,i.useState)(),[n,s]=(0,i.useState)(!1),r=(0,b.usePathname)(),l=(0,d.s)(),{mutate:u}=G({onSuccess:()=>{n&&T.F.notificationSuccess({message:"You are now subscribed to receive Flooz notifications"}),s(!1),m(F.I.messaging)}}),f=(0,i.useCallback)(e=>{var t;(null==e?void 0:null===(t=e.err)||void 0===t?void 0:t.code)!="messaging/permission-blocked"&&T.F.notificationError({message:e.error})},[]),v=(0,i.useCallback)((t,a)=>{(0,B.ps)(t,t=>{var o,n,i,s,r,l,u,c,d,f,v;if(!(null===(o=t.data)||void 0===o?void 0:o.title)||!(null===(n=t.notification)||void 0===n?void 0:n.title))return;let m=null!==(d=null===(i=t.data)||void 0===i?void 0:i.title)&&void 0!==d?d:null===(s=t.notification)||void 0===s?void 0:s.title,b=null===(r=t.data)||void 0===r?void 0:r.address,p={body:null!==(f=null===(l=t.data)||void 0===l?void 0:l.body)&&void 0!==f?f:null===(u=t.notification)||void 0===u?void 0:u.body,icon:null!==(v=null===(c=t.data)||void 0===c?void 0:c.image)&&void 0!==v?v:"/logo.png"};try{new Notification(m,p).onclick=t=>{t.preventDefault(),e.push((0,P.p4)(b))}}catch(e){a.showNotification(m,p)}})},[e]),m=(0,i.useCallback)(e=>{var t;if(!(null===(t=navigator)||void 0===t?void 0:t.serviceWorker))return;let a=new URLSearchParams({apiKey:"AIzaSyBcV-3qswc5QRFEBK8GBU6AsNp4KdW1UCg",projectId:"flooz-profiles-prod",messagingSenderId:"514527224954",appId:"1:514527224954:web:862b18433e1977b4c387c3"}).toString();navigator.serviceWorker.register("/firebase-messaging-sw.js?".concat(a)).then(t=>v(e,t)).catch(e=>f({error:"Notifications service worker failed",err:e}))},[f,v]),p=(0,i.useCallback)(async e=>{await N._.isBrave()?f({error:"Your browser is rejecting Google push messaging, please turn them on here: brave://settings/privacy",err:e}):f({error:"Notifications rejected or there was an error while enabling them",err:e})},[f]),g=(0,i.useCallback)((e,t)=>{(0,B.LP)(e,{vapidKey:"BO-QGf75CJPCn_MUwKfpjRNK1A_va2GHfRtgr-0FRs2eTrqe6O-0FYEGXnDLCZFxS5W_ByWTaVBT_FaHZO5O6Eo"}).then(e=>{e&&(o(e),u({token:e,walletAddress:t}))}).catch(e=>{p(e)})},[u,p]);(0,i.useEffect)(()=>{F.I.messaging&&t&&null==a&&"Notification"in window&&!0!==Z.W.get(Z.m.pushNotificationRejected)&&!1===l&&!(0,P.dT)(r)&&!(0,P.fG)(r)&&("default"===Notification.permission?Notification.requestPermission(()=>{s(!0),g(F.I.messaging,t)}):"granted"===Notification.permission&&g(F.I.messaging,t))},[t,a,g,l,r])};var j=a(16914);let D=()=>{let{isMiniapp:e}=(0,j.p)();(0,i.useEffect)(()=>{m.Z&&e&&(m.Z.ready(),m.Z.SettingsButton.show(),m.Z.SettingsButton.onClick(()=>{m.Z.openLink("https://flooz.xyz/privacy-policy",{try_instant_view:!0})}))},[e])};var Q=a(38040),U=a(92930),K=a(38922),z=a(19664),H=a(22524),q=a(84721),L=a(23719),M=a(7178),V=a(59031),Y=a(80381),X=a(24315);let J=new Map,$=()=>{let{selectedAccount:e}=(0,c.Z)(),t=(0,Q.useQueryClient)(),a=(0,z.Z)(),o=(0,b.usePathname)(),{data:n}=(0,q.D)({key:Z.m.recentActivities(e)},{enabled:null!=e}),{mutate:s}=(0,H.h)(),r=(0,i.useCallback)(()=>{let a={address:e},o={invalidate:!0,filteroutBlacklisted:!0};t.invalidateQueries(M.a.tokenPortfolio({pathParameters:a,queryParameters:o})),t.invalidateQueries(M.a.activities({pathParameters:a,queryParameters:o}))},[t,e]),u=(0,i.useCallback)(t=>{var a;if(!e)return;let o=null!==(a=null==n?void 0:n.findIndex(e=>{let{transactionHash:a}=e;return a===t.transactionHash}))&&void 0!==a?a:-1,i=[...null!=n?n:[]];-1===o?i.push(t):i[o]=t,s({key:Z.m.recentActivities(e),value:i})},[n,e,s]),d=(0,i.useCallback)(e=>{let t={...e,status:!0,blockTimestamp:K.ou.now().toISO()},{from:a,to:o}={from:"",to:""};if(e.type===L.T.SWAP){let{fromToken:t,toToken:n,amountOutUsd:i}=e;l.I.emitEvent("swap",{from_token_symbol:null==t?void 0:t.symbol,from_token_address:null==t?void 0:t.address,from_token_sell_tax:null==t?void 0:t.sellFees,to_token_symbol:null==n?void 0:n.symbol,to_token_address:null==n?void 0:n.address,to_token_buy_tax:null==n?void 0:n.buyFees,swap_amount:i}),a=t.symbol,o=n.symbol}u(t),T.F.notificationSuccess({message:"You just swapped ".concat(a," to ").concat(o)}),r()},[u,r]),f=(0,i.useCallback)((t,a)=>{let o={...t,blockTimestamp:K.ou.now().toISO(),status:!1},n=X.C.getSwapError(a),i=X.C.parseErrorMessage(a);if(t.type===L.T.SWAP){let{fromToken:e,toToken:a,amountOutUsd:o}=t;l.I.emitEvent("swap_error",{from_token_symbol:null==e?void 0:e.symbol,from_token_address:null==e?void 0:e.address,from_token_sell_tax:null==e?void 0:e.sellFees,to_token_symbol:null==a?void 0:a.symbol,to_token_address:null==a?void 0:a.address,to_token_buy_tax:null==a?void 0:a.buyFees,swap_amount:o,error:n,error_message:i})}u(o),e&&T.F.notificationFailedTx({failedActivity:o,selectedAccount:e}),r()},[u,r,e]);(0,i.useEffect)(()=>{if((0,P.dT)(o)||(0,P.fG)(o))return;let e=async e=>{try{await (0,U.e)(a,{...Y.c,hash:e.transactionHash,chainId:V.Eu[e.network].chainId}),d(e)}catch(t){(null==t?void 0:t.name)==="TransactionNotFoundError"?d(e):f(e,t)}finally{J.set(e.transactionHash,!1)}};null==n||n.forEach(t=>{let{status:a,transactionHash:o}=t;null!=a||null===o||J.has(o)||(e(t),J.set(o,!0))})},[U.e,f,d,n,o])},ee=e=>{let{refId:t}=e;return E(),v({refId:t}),O(),$(),S(),(0,I.u)(),h(),D(),p(),_(),s(),null}},26402:function(e,t,a){a.d(t,{G:function(){return s}});var o=a(80543),n=a(79569),i=a(7178);let s=(e,t)=>(0,o.useInfiniteQuery)(i.a.activities(e),t=>{let{pageParam:a}=t;return n.W.getActivities({...e,...a})},{...t,getNextPageParam:n.W.getReactQueryCursorPaginatedParams(e)})}}]);