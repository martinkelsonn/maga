!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="020621dd-778f-4576-9962-865bc59b5d79",e._sentryDebugIdIdentifier="sentry-dbid-020621dd-778f-4576-9962-865bc59b5d79")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4419],{77544:function(e,t,r){"use strict";var i=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoinbaseWalletProvider=void 0;let s=n(r(19089)),o=r(35401),a=r(37539),c=r(17105),u=r(64732),l=r(68387),h=r(95934),d=r(79549),f=r(40296),p=r(4640);class g extends s.default{constructor(e){var t,r,{metadata:n}=e,s=e.preference,{keysUrl:a}=s,f=i(s,["keysUrl"]);super(),this.accounts=[],this.handlers={handshake:async e=>{try{if(this.connected)return this.emit("connect",{chainId:(0,u.hexStringFromIntNumber)((0,c.IntNumber)(this.chain.id))}),this.accounts;let e=await this.requestSignerSelection(),t=this.initSigner(e),r=await t.handshake();return this.signer=t,(0,l.storeSignerType)(e),this.emit("connect",{chainId:(0,u.hexStringFromIntNumber)((0,c.IntNumber)(this.chain.id))}),r}catch(e){throw this.handleUnauthorizedError(e),e}},sign:async e=>{if(!this.connected||!this.signer)throw o.standardErrors.provider.unauthorized("Must call 'eth_requestAccounts' before other methods");try{return await this.signer.request(e)}catch(e){throw this.handleUnauthorizedError(e),e}},fetch:e=>(0,h.fetchRPCRequest)(e,this.chain),state:e=>{let t=()=>{if(this.connected)return this.accounts;throw o.standardErrors.provider.unauthorized("Must call 'eth_requestAccounts' before other methods")};switch(e.method){case"eth_chainId":return(0,u.hexStringFromIntNumber)((0,c.IntNumber)(this.chain.id));case"net_version":return this.chain.id;case"eth_accounts":return t();case"eth_coinbase":return t()[0];default:return this.handlers.unsupported(e)}},deprecated:({method:e})=>{throw o.standardErrors.rpc.methodNotSupported(`Method ${e} is deprecated.`)},unsupported:({method:e})=>{throw o.standardErrors.rpc.methodNotSupported(`Method ${e} is not supported.`)}},this.isCoinbaseWallet=!0,this.updateListener={onAccountsUpdate:({accounts:e,source:t})=>{(0,u.areAddressArraysEqual)(this.accounts,e)||(this.accounts=e,"storage"!==t&&this.emit("accountsChanged",this.accounts))},onChainUpdate:({chain:e,source:t})=>{(e.id!==this.chain.id||e.rpcUrl!==this.chain.rpcUrl)&&(this.chain=e,"storage"!==t&&this.emit("chainChanged",(0,u.hexStringFromIntNumber)((0,c.IntNumber)(e.id))))}},this.metadata=n,this.preference=f,this.communicator=new d.Communicator(a),this.chain={id:null!==(r=null===(t=n.appChainIds)||void 0===t?void 0:t[0])&&void 0!==r?r:1};let p=(0,l.loadSignerType)();this.signer=p?this.initSigner(p):null}get connected(){return this.accounts.length>0}async request(e){var t;try{let r=(0,h.checkErrorForInvalidRequestArgs)(e);if(r)throw r;let i=null!==(t=(0,f.determineMethodCategory)(e.method))&&void 0!==t?t:"fetch";return this.handlers[i](e)}catch(t){return Promise.reject((0,a.serializeError)(t,e.method))}}handleUnauthorizedError(e){e.code===o.standardErrorCodes.provider.unauthorized&&this.disconnect()}async enable(){return console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'),await this.request({method:"eth_requestAccounts"})}async disconnect(){this.accounts=[],this.chain={id:1},p.ScopedLocalStorage.clearAll(),this.emit("disconnect",o.standardErrors.provider.disconnected("User initiated disconnection"))}requestSignerSelection(){return(0,l.fetchSignerType)({communicator:this.communicator,preference:this.preference,metadata:this.metadata})}initSigner(e){return(0,l.createSigner)({signerType:e,metadata:this.metadata,communicator:this.communicator,updateListener:this.updateListener})}}t.CoinbaseWalletProvider=g},10879:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CoinbaseWalletSDK=void 0;let i=r(9896),n=r(77544),s=r(4640),o=r(55254),a=r(64732),c=r(95934);class u{constructor(e){this.metadata={appName:e.appName||"Dapp",appLogoUrl:e.appLogoUrl||(0,a.getFavicon)(),appChainIds:e.appChainIds||[]},this.storeLatestVersion()}makeWeb3Provider(e={options:"all"}){var t;let r={metadata:this.metadata,preference:e};return null!==(t=(0,c.getCoinbaseInjectedProvider)(r))&&void 0!==t?t:new n.CoinbaseWalletProvider(r)}getCoinbaseWalletLogo(e,t=240){return(0,i.walletLogo)(e,t)}storeLatestVersion(){new s.ScopedLocalStorage("CBWSDK").setItem("VERSION",o.LIB_VERSION)}}t.CoinbaseWalletSDK=u},9896:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.walletLogo=void 0,t.walletLogo=(e,t)=>{let r;switch(e){case"standard":default:return r=t,`data:image/svg+xml,%3Csvg width='${t}' height='${r}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return r=t,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${t}' height='${r}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return r=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return r=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return r=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return r=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`}}},79549:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Communicator=void 0;let i=r(55254),n=r(11792),s=r(95337),o=r(35401);class a{constructor(e=s.CB_KEYS_URL){this.popup=null,this.listeners=new Map,this.postMessage=async e=>{(await this.waitForPopupLoaded()).postMessage(e,this.url.origin)},this.postRequestAndWaitForResponse=async e=>{let t=this.onMessage(({requestId:t})=>t===e.id);return this.postMessage(e),await t},this.onMessage=async e=>new Promise((t,r)=>{let i=r=>{if(r.origin!==this.url.origin)return;let n=r.data;e(n)&&(t(n),window.removeEventListener("message",i),this.listeners.delete(i))};window.addEventListener("message",i),this.listeners.set(i,{reject:r})}),this.disconnect=()=>{(0,n.closePopup)(this.popup),this.popup=null,this.listeners.forEach(({reject:e},t)=>{e(o.standardErrors.provider.userRejectedRequest("Request rejected")),window.removeEventListener("message",t)}),this.listeners.clear()},this.waitForPopupLoaded=async()=>this.popup&&!this.popup.closed?(this.popup.focus(),this.popup):(this.popup=(0,n.openPopup)(this.url),this.onMessage(({event:e})=>"PopupUnload"===e).then(this.disconnect).catch(()=>{}),this.onMessage(({event:e})=>"PopupLoaded"===e).then(e=>{this.postMessage({requestId:e.id,data:{version:i.LIB_VERSION}})}).then(()=>{if(!this.popup)throw o.standardErrors.rpc.internal();return this.popup})),this.url=new URL(e)}}t.Communicator=a},11792:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closePopup=t.openPopup=void 0;let i=r(35401);t.openPopup=function(e){let t=(window.innerWidth-420)/2+window.screenX,r=(window.innerHeight-540)/2+window.screenY,n=window.open(e,"Smart Wallet",`width=420, height=540, left=${t}, top=${r}`);if(null==n||n.focus(),!n)throw i.standardErrors.rpc.internal("Pop up window failed to open");return n},t.closePopup=function(e){e&&!e.closed&&e.close()}},95337:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CBW_MOBILE_DEEPLINK_URL=t.WALLETLINK_URL=t.CB_KEYS_URL=void 0,t.CB_KEYS_URL="https://keys.coinbase.com/connect",t.WALLETLINK_URL="https://www.walletlink.org",t.CBW_MOBILE_DEEPLINK_URL="https://go.cb-w.com/walletlink"},69384:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorValues=t.standardErrorCodes=void 0,t.standardErrorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}},t.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}}},91603:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.standardErrors=void 0;let i=r(69384),n=r(84786);function s(e,t){let[r,i]=a(t);return new c(e,r||(0,n.getMessageFromCode)(e),i)}function o(e,t){let[r,i]=a(t);return new u(e,r||(0,n.getMessageFromCode)(e),i)}function a(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){let{message:t,data:r}=e;if(t&&"string"!=typeof t)throw Error("Must specify string message.");return[t||void 0,r]}}return[]}t.standardErrors={rpc:{parse:e=>s(i.standardErrorCodes.rpc.parse,e),invalidRequest:e=>s(i.standardErrorCodes.rpc.invalidRequest,e),invalidParams:e=>s(i.standardErrorCodes.rpc.invalidParams,e),methodNotFound:e=>s(i.standardErrorCodes.rpc.methodNotFound,e),internal:e=>s(i.standardErrorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw Error("Ethereum RPC Server errors must provide single object argument.");let{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw Error('"code" must be an integer such that: -32099 <= code <= -32005');return s(t,e)},invalidInput:e=>s(i.standardErrorCodes.rpc.invalidInput,e),resourceNotFound:e=>s(i.standardErrorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>s(i.standardErrorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>s(i.standardErrorCodes.rpc.transactionRejected,e),methodNotSupported:e=>s(i.standardErrorCodes.rpc.methodNotSupported,e),limitExceeded:e=>s(i.standardErrorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>o(i.standardErrorCodes.provider.userRejectedRequest,e),unauthorized:e=>o(i.standardErrorCodes.provider.unauthorized,e),unsupportedMethod:e=>o(i.standardErrorCodes.provider.unsupportedMethod,e),disconnected:e=>o(i.standardErrorCodes.provider.disconnected,e),chainDisconnected:e=>o(i.standardErrorCodes.provider.chainDisconnected,e),unsupportedChain:e=>o(i.standardErrorCodes.provider.unsupportedChain,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw Error("Ethereum Provider custom errors must provide single object argument.");let{code:t,message:r,data:i}=e;if(!r||"string"!=typeof r)throw Error('"message" must be a nonempty string');return new u(t,r,i)}}};class c extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}}class u extends c{constructor(e,t,r){if(!(Number.isInteger(e)&&e>=1e3&&e<=4999))throw Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}},35401:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.standardErrors=t.standardErrorCodes=void 0;var i=r(69384);Object.defineProperty(t,"standardErrorCodes",{enumerable:!0,get:function(){return i.standardErrorCodes}});var n=r(91603);Object.defineProperty(t,"standardErrors",{enumerable:!0,get:function(){return n.standardErrors}})},37539:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=void 0;let i=r(7090),n=r(55254),s=r(69384),o=r(84786);t.serializeError=function(e,t){let r=(0,o.serialize)("string"==typeof e?{message:e,code:s.standardErrorCodes.rpc.internal}:(0,i.isErrorResponse)(e)?Object.assign(Object.assign({},e),{message:e.errorMessage,code:e.errorCode,data:{method:e.method}}):e,{shouldIncludeStack:!0}),a=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");a.searchParams.set("version",n.LIB_VERSION),a.searchParams.set("code",r.code.toString());let c=function(e,t){let r=null==e?void 0:e.method;if(r)return r;if(void 0===t);else if("string"==typeof t)return t;else if(!Array.isArray(t))return t.method;else if(t.length>0)return t[0].method}(r.data,t);return c&&a.searchParams.set("method",c),a.searchParams.set("message",r.message),Object.assign(Object.assign({},r),{docUrl:a.href})}},84786:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=t.getErrorCode=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;let i=r(69384),n="Unspecified error message.";function s(e,r=n){if(e&&Number.isInteger(e)){let r=e.toString();if(c(i.errorValues,r))return i.errorValues[r].message;if(e>=-32099&&e<=-32e3)return t.JSON_RPC_SERVER_ERROR_MESSAGE}return r}function o(e){if(!Number.isInteger(e))return!1;let t=e.toString();return!!(i.errorValues[t]||e>=-32099&&e<=-32e3)}function a(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){return"object"==typeof e&&null!==e&&t in e&&"string"==typeof e[t]}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=s,t.isValidCode=o,t.getErrorCode=function(e){var t;return"number"==typeof e?e:"object"==typeof e&&null!==e&&("number"==typeof e.code||"number"==typeof e.errorCode)?null!==(t=e.code)&&void 0!==t?t:e.errorCode:void 0},t.serialize=function(e,{shouldIncludeStack:t=!1}={}){let r={};return e&&"object"==typeof e&&!Array.isArray(e)&&c(e,"code")&&o(e.code)?(r.code=e.code,e.message&&"string"==typeof e.message?(r.message=e.message,c(e,"data")&&(r.data=e.data)):(r.message=s(r.code),r.data={originalError:a(e)})):(r.code=i.standardErrorCodes.rpc.internal,r.message=u(e,"message")?e.message:n,r.data={originalError:a(e)}),t&&(r.stack=u(e,"stack")?e.stack:void 0),r}},40296:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.determineMethodCategory=void 0;let r={handshake:["eth_requestAccounts"],sign:["eth_ecRecover","personal_sign","personal_ecRecover","eth_signTransaction","eth_sendTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4","eth_signTypedData","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_watchAsset","wallet_getCapabilities","wallet_sendCalls","wallet_showCallsStatus"],state:["eth_chainId","eth_accounts","eth_coinbase","net_version"],deprecated:["eth_sign","eth_signTypedData_v2"],unsupported:["eth_subscribe","eth_unsubscribe"],fetch:[]};t.determineMethodCategory=function(e){for(let t in r)if(r[t].includes(e))return t}},17105:function(e,t){"use strict";function r(){return e=>e}Object.defineProperty(t,"__esModule",{value:!0}),t.RegExpString=t.IntNumber=t.BigIntString=t.AddressString=t.HexString=t.OpaqueType=void 0,t.OpaqueType=r,t.HexString=r(),t.AddressString=r(),t.BigIntString=r(),t.IntNumber=function(e){return Math.floor(e)},t.RegExpString=r()},64732:function(e,t,r){"use strict";var i=r(90687).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.areAddressArraysEqual=t.getFavicon=t.range=t.isBigNumber=t.ensureParsedJSONObject=t.ensureBigInt=t.ensureRegExpString=t.ensureIntNumber=t.ensureBuffer=t.ensureAddressString=t.ensureEvenLengthHexString=t.ensureHexString=t.isHexString=t.prepend0x=t.strip0x=t.has0xPrefix=t.hexStringFromIntNumber=t.intNumberFromHexString=t.bigIntStringFromBigInt=t.hexStringFromBuffer=t.hexStringToUint8Array=t.uint8ArrayToHex=t.randomBytesHex=void 0;let n=r(35401),s=r(17105),o=/^[0-9]*$/,a=/^[a-f0-9]*$/;function c(e){return[...e].map(e=>e.toString(16).padStart(2,"0")).join("")}function u(e){return e.startsWith("0x")||e.startsWith("0X")}function l(e){return u(e)?e.slice(2):e}function h(e){return u(e)?`0x${e.slice(2)}`:`0x${e}`}function d(e){if("string"!=typeof e)return!1;let t=l(e).toLowerCase();return a.test(t)}function f(e,t=!1){if("string"==typeof e){let r=l(e).toLowerCase();if(a.test(r))return(0,s.HexString)(t?`0x${r}`:r)}throw n.standardErrors.rpc.invalidParams(`"${String(e)}" is not a hexadecimal string`)}function p(e,t=!1){let r=f(e,!1);return r.length%2==1&&(r=(0,s.HexString)(`0${r}`)),t?(0,s.HexString)(`0x${r}`):r}function g(e){if("number"==typeof e&&Number.isInteger(e))return(0,s.IntNumber)(e);if("string"==typeof e){if(o.test(e))return(0,s.IntNumber)(Number(e));if(d(e))return(0,s.IntNumber)(Number(BigInt(p(e,!0))))}throw n.standardErrors.rpc.invalidParams(`Not an integer: ${String(e)}`)}function y(e){if(null==e||"function"!=typeof e.constructor)return!1;let{constructor:t}=e;return"function"==typeof t.config&&"number"==typeof t.EUCLID}t.randomBytesHex=function(e){return c(crypto.getRandomValues(new Uint8Array(e)))},t.uint8ArrayToHex=c,t.hexStringToUint8Array=function(e){return new Uint8Array(e.match(/.{1,2}/g).map(e=>parseInt(e,16)))},t.hexStringFromBuffer=function(e,t=!1){let r=e.toString("hex");return(0,s.HexString)(t?`0x${r}`:r)},t.bigIntStringFromBigInt=function(e){return(0,s.BigIntString)(e.toString(10))},t.intNumberFromHexString=function(e){return(0,s.IntNumber)(Number(BigInt(p(e,!0))))},t.hexStringFromIntNumber=function(e){return(0,s.HexString)(`0x${BigInt(e).toString(16)}`)},t.has0xPrefix=u,t.strip0x=l,t.prepend0x=h,t.isHexString=d,t.ensureHexString=f,t.ensureEvenLengthHexString=p,t.ensureAddressString=function(e){if("string"==typeof e){let t=l(e).toLowerCase();if(d(t)&&40===t.length)return(0,s.AddressString)(h(t))}throw n.standardErrors.rpc.invalidParams(`Invalid Ethereum address: ${String(e)}`)},t.ensureBuffer=function(e){if(i.isBuffer(e))return e;if("string"==typeof e){if(d(e)){let t=p(e,!1);return i.from(t,"hex")}return i.from(e,"utf8")}throw n.standardErrors.rpc.invalidParams(`Not binary data: ${String(e)}`)},t.ensureIntNumber=g,t.ensureRegExpString=function(e){if(e instanceof RegExp)return(0,s.RegExpString)(e.toString());throw n.standardErrors.rpc.invalidParams(`Not a RegExp: ${String(e)}`)},t.ensureBigInt=function(e){if(null!==e&&("bigint"==typeof e||y(e)))return BigInt(e.toString(10));if("number"==typeof e)return BigInt(g(e));if("string"==typeof e){if(o.test(e))return BigInt(e);if(d(e))return BigInt(p(e,!0))}throw n.standardErrors.rpc.invalidParams(`Not an integer: ${String(e)}`)},t.ensureParsedJSONObject=function(e){if("string"==typeof e)return JSON.parse(e);if("object"==typeof e)return e;throw n.standardErrors.rpc.invalidParams(`Not a JSON string or an object: ${String(e)}`)},t.isBigNumber=y,t.range=function(e,t){return Array.from({length:t-e},(t,r)=>e+r)},t.getFavicon=function(){let e=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:t,host:r}=document.location,i=e?e.getAttribute("href"):null;return!i||i.startsWith("javascript:")||i.startsWith("vbscript:")?null:i.startsWith("http://")||i.startsWith("https://")||i.startsWith("data:")?i:i.startsWith("//")?t+i:`${t}//${r}${i}`},t.areAddressArraysEqual=function(e,t){return e.length===t.length&&e.every((e,r)=>e===t[r])}},82318:function(e,t,r){"use strict";t.jp=void 0,r(10879).CoinbaseWalletSDK;var i=r(10879);Object.defineProperty(t,"jp",{enumerable:!0,get:function(){return i.CoinbaseWalletSDK}})},59780:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCWKeyManager=void 0;let i=r(40921),n=r(4640),s={storageKey:"ownPrivateKey",keyType:"private"},o={storageKey:"ownPublicKey",keyType:"public"},a={storageKey:"peerPublicKey",keyType:"public"};class c{constructor(){this.storage=new n.ScopedLocalStorage("CBWSDK","SCWKeyManager"),this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}async getOwnPublicKey(){return await this.loadKeysIfNeeded(),this.ownPublicKey}async getSharedSecret(){return await this.loadKeysIfNeeded(),this.sharedSecret}async setPeerPublicKey(e){this.sharedSecret=null,this.peerPublicKey=e,await this.storeKey(a,e),await this.loadKeysIfNeeded()}async clear(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,this.storage.removeItem(o.storageKey),this.storage.removeItem(s.storageKey),this.storage.removeItem(a.storageKey)}async generateKeyPair(){let e=await (0,i.generateKeyPair)();this.ownPrivateKey=e.privateKey,this.ownPublicKey=e.publicKey,await this.storeKey(s,e.privateKey),await this.storeKey(o,e.publicKey)}async loadKeysIfNeeded(){null===this.ownPrivateKey&&(this.ownPrivateKey=await this.loadKey(s)),null===this.ownPublicKey&&(this.ownPublicKey=await this.loadKey(o)),(null===this.ownPrivateKey||null===this.ownPublicKey)&&await this.generateKeyPair(),null===this.peerPublicKey&&(this.peerPublicKey=await this.loadKey(a)),null===this.sharedSecret&&null!==this.ownPrivateKey&&null!==this.peerPublicKey&&(this.sharedSecret=await (0,i.deriveSharedSecret)(this.ownPrivateKey,this.peerPublicKey))}async loadKey(e){let t=this.storage.getItem(e.storageKey);return t?(0,i.importKeyFromHexString)(e.keyType,t):null}async storeKey(e,t){let r=await (0,i.exportKeyToHexString)(e.keyType,t);this.storage.setItem(e.storageKey,r)}}t.SCWKeyManager=c},93808:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCWSigner=void 0;let i=r(59780),n=r(66420),s=r(35401),o=r(64732),a=r(40921);class c{constructor(e){this.metadata=e.metadata,this.communicator=e.communicator,this.keyManager=new i.SCWKeyManager,this.stateManager=new n.SCWStateManager({appChainIds:this.metadata.appChainIds,updateListener:e.updateListener}),this.handshake=this.handshake.bind(this),this.request=this.request.bind(this),this.createRequestMessage=this.createRequestMessage.bind(this),this.decryptResponseMessage=this.decryptResponseMessage.bind(this)}async handshake(){let e=await this.createRequestMessage({handshake:{method:"eth_requestAccounts",params:this.metadata}}),t=await this.communicator.postRequestAndWaitForResponse(e);if("failure"in t.content)throw t.content.failure;let r=await (0,a.importKeyFromHexString)("public",t.sender);await this.keyManager.setPeerPublicKey(r);let i=await this.decryptResponseMessage(t);this.updateInternalState({method:"eth_requestAccounts"},i);let n=i.result;if("error"in n)throw n.error;return this.stateManager.accounts}async request(e){let t=this.tryLocalHandling(e);if(void 0!==t){if(t instanceof Error)throw t;return t}await this.communicator.waitForPopupLoaded();let r=await this.sendEncryptedRequest(e),i=await this.decryptResponseMessage(r);this.updateInternalState(e,i);let n=i.result;if("error"in n)throw n.error;return n.value}async disconnect(){this.stateManager.clear(),await this.keyManager.clear()}tryLocalHandling(e){var t;switch(e.method){case"wallet_switchEthereumChain":{let r=e.params;if(!r||!(null===(t=r[0])||void 0===t?void 0:t.chainId))throw s.standardErrors.rpc.invalidParams();let i=(0,o.ensureIntNumber)(r[0].chainId);return this.stateManager.switchChain(i)?null:void 0}case"wallet_getCapabilities":{let e=this.stateManager.walletCapabilities;if(!e)throw s.standardErrors.provider.unauthorized("No wallet capabilities found, please disconnect and reconnect");return e}default:return}}async sendEncryptedRequest(e){let t=await this.keyManager.getSharedSecret();if(!t)throw s.standardErrors.provider.unauthorized("No valid session found, try requestAccounts before other methods");let r=await (0,a.encryptContent)({action:e,chainId:this.stateManager.activeChain.id},t),i=await this.createRequestMessage({encrypted:r});return this.communicator.postRequestAndWaitForResponse(i)}async createRequestMessage(e){let t=await (0,a.exportKeyToHexString)("public",await this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),sender:t,content:e,timestamp:new Date}}async decryptResponseMessage(e){let t=e.content;if("failure"in t)throw t.failure;let r=await this.keyManager.getSharedSecret();if(!r)throw s.standardErrors.provider.unauthorized("Invalid session");return(0,a.decryptContent)(t.encrypted,r)}updateInternalState(e,t){var r,i;let n=null===(r=t.data)||void 0===r?void 0:r.chains;n&&this.stateManager.updateAvailableChains(n);let s=null===(i=t.data)||void 0===i?void 0:i.capabilities;s&&this.stateManager.updateWalletCapabilities(s);let a=t.result;if(!("error"in a))switch(e.method){case"eth_requestAccounts":{let e=a.value;this.stateManager.updateAccounts(e);break}case"wallet_switchEthereumChain":{if(null!==a.value)return;let t=e.params,r=(0,o.ensureIntNumber)(t[0].chainId);this.stateManager.switchChain(r)}}}}t.SCWSigner=c},66420:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCWStateManager=void 0;let i=r(4640),n="accounts",s="activeChain",o="availableChains",a="walletCapabilities";class c{get accounts(){return this._accounts}get activeChain(){return this._activeChain}get walletCapabilities(){return this._walletCapabilities}constructor(e){var t,r;this.storage=new i.ScopedLocalStorage("CBWSDK","SCWStateManager"),this.updateListener=e.updateListener,this.availableChains=this.loadItemFromStorage(o),this._walletCapabilities=this.loadItemFromStorage(a);let c=this.loadItemFromStorage(n),u=this.loadItemFromStorage(s);c&&this.updateListener.onAccountsUpdate({accounts:c,source:"storage"}),u&&this.updateListener.onChainUpdate({chain:u,source:"storage"}),this._accounts=c||[],this._activeChain=u||{id:null!==(r=null===(t=e.appChainIds)||void 0===t?void 0:t[0])&&void 0!==r?r:1}}updateAccounts(e){this._accounts=e,this.storeItemToStorage(n,e),this.updateListener.onAccountsUpdate({accounts:e,source:"wallet"})}switchChain(e){var t;let r=null===(t=this.availableChains)||void 0===t?void 0:t.find(t=>t.id===e);return!!r&&(r===this._activeChain||(this._activeChain=r,this.storeItemToStorage(s,r),this.updateListener.onChainUpdate({chain:r,source:"wallet"}),!0))}updateAvailableChains(e){if(!e||0===Object.keys(e).length)return;let t=Object.entries(e).map(([e,t])=>({id:Number(e),rpcUrl:t}));this.availableChains=t,this.storeItemToStorage(o,t),this.switchChain(this._activeChain.id)}updateWalletCapabilities(e){this._walletCapabilities=e,this.storeItemToStorage(a,e)}storeItemToStorage(e,t){this.storage.setItem(e,JSON.stringify(t))}loadItemFromStorage(e){let t=this.storage.getItem(e);return t?JSON.parse(t):void 0}clear(){this.storage.clear()}}t.SCWStateManager=c},68387:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSigner=t.fetchSignerType=t.storeSignerType=t.loadSignerType=void 0;let i=r(93808),n=r(13652),s=r(35401),o=r(95934),a=r(4640),c="SignerType",u=new a.ScopedLocalStorage("CBWSDK","SignerConfigurator");async function l(e){let{communicator:t,metadata:r}=e;h(t,r).catch(()=>{});let i={id:crypto.randomUUID(),event:"selectSignerType",data:e.preference},{data:n}=await t.postRequestAndWaitForResponse(i);return n}async function h(e,t){await e.onMessage(({event:e})=>"WalletLinkSessionRequest"===e);let r=new n.WalletLinkSigner({metadata:t});e.postMessage({event:"WalletLinkUpdate",data:{session:r.getSession()}}),await r.handshake(),e.postMessage({event:"WalletLinkUpdate",data:{connected:!0}})}t.loadSignerType=function(){return u.getItem(c)},t.storeSignerType=function(e){u.setItem(c,e)},t.fetchSignerType=l,t.createSigner=function(e){let{signerType:t,metadata:r,communicator:a,updateListener:c}=e;switch(t){case"scw":return new i.SCWSigner({metadata:r,updateListener:c,communicator:a});case"walletlink":return new n.WalletLinkSigner({metadata:r,updateListener:c});case"extension":{let e=(0,o.getCoinbaseInjectedSigner)();if(!e)throw s.standardErrors.rpc.internal("injected signer not found");return e}}}},13652:function(e,t,r){"use strict";var i=r(90687).Buffer,n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkSigner=void 0;let s=n(r(35978)),o=r(6949),a=r(73018),c=r(7090),u=r(91811),l=r(95337),h=r(35401),d=r(64732),f=r(4640),p="DefaultChainId",g="DefaultJsonRpcUrl";class y{constructor(e){var t,r;this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1;let{appName:i,appLogoUrl:n}=e.metadata;this._appName=i,this._appLogoUrl=n,this._storage=new f.ScopedLocalStorage("walletlink",l.WALLETLINK_URL),this.updateListener=e.updateListener,this._relayEventManager=new a.RelayEventManager,this._jsonRpcUrlFromOpts="";let s=this._storage.getItem(o.LOCAL_STORAGE_ADDRESSES_KEY);if(s){let e=s.split(" ");""!==e[0]&&(this._addresses=e.map(e=>(0,d.ensureAddressString)(e)),null===(t=this.updateListener)||void 0===t||t.onAccountsUpdate({accounts:this._addresses,source:"storage"}))}this._storage.getItem(p)&&(null===(r=this.updateListener)||void 0===r||r.onChainUpdate({chain:{id:this.getChainId(),rpcUrl:this.jsonRpcUrl},source:"storage"}),this.hasMadeFirstChainChangedEmission=!0),this.initializeRelay()}getSession(){let{id:e,secret:t}=this.initializeRelay().getWalletLinkSession();return{id:e,secret:t}}async handshake(){return await this.request({method:"eth_requestAccounts"})}get selectedAddress(){return this._addresses[0]||void 0}get jsonRpcUrl(){var e;return null!==(e=this._storage.getItem(g))&&void 0!==e?e:this._jsonRpcUrlFromOpts}set jsonRpcUrl(e){this._storage.setItem(g,e)}updateProviderInfo(e,t){var r;this.jsonRpcUrl=e;let i=this.getChainId();this._storage.setItem(p,t.toString(10)),(0,d.ensureIntNumber)(t)===i&&this.hasMadeFirstChainChangedEmission||(null===(r=this.updateListener)||void 0===r||r.onChainUpdate({chain:{id:t,rpcUrl:e},source:"wallet"}),this.hasMadeFirstChainChangedEmission=!0)}async watchAsset(e,t,r,i,n,s){let o=this.initializeRelay(),a=await o.watchAsset(e,t,r,i,n,null==s?void 0:s.toString());return!(0,c.isErrorResponse)(a)&&!!a.result}async addEthereumChain(e,t,r,i,n,s){var o,a;if((0,d.ensureIntNumber)(e)===this.getChainId())return!1;let u=this.initializeRelay();this._isAuthorized()||await u.requestEthereumAccounts();let l=await u.addEthereumChain(e.toString(),t,n,r,i,s);return!(0,c.isErrorResponse)(l)&&((null===(o=l.result)||void 0===o?void 0:o.isApproved)===!0&&this.updateProviderInfo(t[0],e),(null===(a=l.result)||void 0===a?void 0:a.isApproved)===!0)}async switchEthereumChain(e){let t=this.initializeRelay(),r=await t.switchEthereumChain(e.toString(10),this.selectedAddress||void 0);if((0,c.isErrorResponse)(r)){if(!r.errorCode)return;if(r.errorCode===h.standardErrorCodes.provider.unsupportedChain)throw h.standardErrors.provider.unsupportedChain();throw h.standardErrors.provider.custom({message:r.errorMessage,code:r.errorCode})}let i=r.result;i.isApproved&&i.rpcUrl.length>0&&this.updateProviderInfo(i.rpcUrl,e)}async disconnect(){this._relay&&this._relay.resetAndReload(),this._storage.clear()}async request(e){try{return this._request(e).catch(e=>{throw e})}catch(e){return Promise.reject(e)}}async _request(e){if(!e||"object"!=typeof e||Array.isArray(e))throw h.standardErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:e});let{method:t,params:r}=e;if("string"!=typeof t||0===t.length)throw h.standardErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:e});if(void 0!==r&&!Array.isArray(r)&&("object"!=typeof r||null===r))throw h.standardErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:e});let i=void 0===r?[]:r,n=this._relayEventManager.makeRequestId();return(await this._sendRequestAsync({method:t,params:i,jsonrpc:"2.0",id:n})).result}_setAddresses(e,t){var r;if(!Array.isArray(e))throw Error("addresses is not an array");let i=e.map(e=>(0,d.ensureAddressString)(e));JSON.stringify(i)!==JSON.stringify(this._addresses)&&(this._addresses=i,null===(r=this.updateListener)||void 0===r||r.onAccountsUpdate({accounts:i,source:"wallet"}),this._storage.setItem(o.LOCAL_STORAGE_ADDRESSES_KEY,i.join(" ")))}_sendRequestAsync(e){return new Promise((t,r)=>{try{let r=this._handleSynchronousMethods(e);if(void 0!==r)return t({jsonrpc:"2.0",id:e.id,result:r})}catch(e){return r(e)}this._handleAsynchronousMethods(e).then(r=>r&&t(Object.assign(Object.assign({},r),{id:e.id}))).catch(e=>r(e))})}_handleSynchronousMethods(e){let{method:t}=e;switch(t){case"eth_accounts":return this._eth_accounts();case"eth_coinbase":return this._eth_coinbase();case"net_version":return this._net_version();case"eth_chainId":return this._eth_chainId();default:return}}async _handleAsynchronousMethods(e){let{method:t}=e,r=e.params||[];switch(t){case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_sign":return this._eth_sign(r);case"eth_ecRecover":return this._eth_ecRecover(r);case"personal_sign":return this._personal_sign(r);case"personal_ecRecover":return this._personal_ecRecover(r);case"eth_signTransaction":return this._eth_signTransaction(r);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(r);case"eth_sendTransaction":return this._eth_sendTransaction(r);case"eth_signTypedData_v1":return this._eth_signTypedData_v1(r);case"eth_signTypedData_v2":default:return this._throwUnsupportedMethodError();case"eth_signTypedData_v3":return this._eth_signTypedData_v3(r);case"eth_signTypedData_v4":case"eth_signTypedData":return this._eth_signTypedData_v4(r);case"wallet_addEthereumChain":return this._wallet_addEthereumChain(r);case"wallet_switchEthereumChain":return this._wallet_switchEthereumChain(r);case"wallet_watchAsset":return this._wallet_watchAsset(r)}}_isKnownAddress(e){try{let t=(0,d.ensureAddressString)(e);return this._addresses.map(e=>(0,d.ensureAddressString)(e)).includes(t)}catch(e){}return!1}_ensureKnownAddress(e){if(!this._isKnownAddress(e))throw Error("Unknown Ethereum address")}_prepareTransactionParams(e){let t=e.from?(0,d.ensureAddressString)(e.from):this.selectedAddress;if(!t)throw Error("Ethereum address is unavailable");this._ensureKnownAddress(t);let r=e.to?(0,d.ensureAddressString)(e.to):null,n=null!=e.value?(0,d.ensureBigInt)(e.value):BigInt(0),s=e.data?(0,d.ensureBuffer)(e.data):i.alloc(0),o=null!=e.nonce?(0,d.ensureIntNumber)(e.nonce):null,a=null!=e.gasPrice?(0,d.ensureBigInt)(e.gasPrice):null,c=null!=e.maxFeePerGas?(0,d.ensureBigInt)(e.maxFeePerGas):null;return{fromAddress:t,toAddress:r,weiValue:n,data:s,nonce:o,gasPriceInWei:a,maxFeePerGas:c,maxPriorityFeePerGas:null!=e.maxPriorityFeePerGas?(0,d.ensureBigInt)(e.maxPriorityFeePerGas):null,gasLimit:null!=e.gas?(0,d.ensureBigInt)(e.gas):null,chainId:e.chainId?(0,d.ensureIntNumber)(e.chainId):this.getChainId()}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw h.standardErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw h.standardErrors.provider.unsupportedMethod({})}async _signEthereumMessage(e,t,r,i){this._ensureKnownAddress(t);try{let n=this.initializeRelay(),s=await n.signEthereumMessage(e,t,r,i);if((0,c.isErrorResponse)(s))throw Error(s.errorMessage);return{jsonrpc:"2.0",id:0,result:s.result}}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw h.standardErrors.provider.userRejectedRequest("User denied message signature");throw e}}async _ethereumAddressFromSignedMessage(e,t,r){let i=this.initializeRelay(),n=await i.ethereumAddressFromSignedMessage(e,t,r);if((0,c.isErrorResponse)(n))throw Error(n.errorMessage);return{jsonrpc:"2.0",id:0,result:n.result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,d.hexStringFromIntNumber)(this.getChainId())}getChainId(){let e=this._storage.getItem(p);if(!e)return(0,d.ensureIntNumber)(1);let t=parseInt(e,10);return(0,d.ensureIntNumber)(t)}async _eth_requestAccounts(){let e;if(this._isAuthorized())return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});try{let t=this.initializeRelay();if(e=await t.requestEthereumAccounts(),(0,c.isErrorResponse)(e))throw Error(e.errorMessage)}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw h.standardErrors.provider.userRejectedRequest("User denied account authorization");throw e}if(!e.result)throw Error("accounts received is empty");return this._setAddresses(e.result),{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(e){this._requireAuthorization();let t=(0,d.ensureAddressString)(e[0]),r=(0,d.ensureBuffer)(e[1]);return this._signEthereumMessage(r,t,!1)}_eth_ecRecover(e){let t=(0,d.ensureBuffer)(e[0]),r=(0,d.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(t,r,!1)}_personal_sign(e){this._requireAuthorization();let t=(0,d.ensureBuffer)(e[0]),r=(0,d.ensureAddressString)(e[1]);return this._signEthereumMessage(t,r,!0)}_personal_ecRecover(e){let t=(0,d.ensureBuffer)(e[0]),r=(0,d.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(t,r,!0)}async _eth_signTransaction(e){this._requireAuthorization();let t=this._prepareTransactionParams(e[0]||{});try{let e=this.initializeRelay(),r=await e.signEthereumTransaction(t);if((0,c.isErrorResponse)(r))throw Error(r.errorMessage);return{jsonrpc:"2.0",id:0,result:r.result}}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw h.standardErrors.provider.userRejectedRequest("User denied transaction signature");throw e}}async _eth_sendRawTransaction(e){let t=(0,d.ensureBuffer)(e[0]),r=this.initializeRelay(),i=await r.submitEthereumTransaction(t,this.getChainId());if((0,c.isErrorResponse)(i))throw Error(i.errorMessage);return{jsonrpc:"2.0",id:0,result:i.result}}async _eth_sendTransaction(e){this._requireAuthorization();let t=this._prepareTransactionParams(e[0]||{});try{let e=this.initializeRelay(),r=await e.signAndSubmitEthereumTransaction(t);if((0,c.isErrorResponse)(r))throw Error(r.errorMessage);return{jsonrpc:"2.0",id:0,result:r.result}}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw h.standardErrors.provider.userRejectedRequest("User denied transaction signature");throw e}}async _eth_signTypedData_v1(e){this._requireAuthorization();let t=(0,d.ensureParsedJSONObject)(e[0]),r=(0,d.ensureAddressString)(e[1]);this._ensureKnownAddress(r);let i=s.default.hashForSignTypedDataLegacy({data:t}),n=JSON.stringify(t,null,2);return this._signEthereumMessage(i,r,!1,n)}async _eth_signTypedData_v3(e){this._requireAuthorization();let t=(0,d.ensureAddressString)(e[0]),r=(0,d.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(t);let i=s.default.hashForSignTypedData_v3({data:r}),n=JSON.stringify(r,null,2);return this._signEthereumMessage(i,t,!1,n)}async _eth_signTypedData_v4(e){this._requireAuthorization();let t=(0,d.ensureAddressString)(e[0]),r=(0,d.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(t);let i=s.default.hashForSignTypedData_v4({data:r}),n=JSON.stringify(r,null,2);return this._signEthereumMessage(i,t,!1,n)}async _wallet_addEthereumChain(e){var t,r,i,n;let s=e[0];if((null===(t=s.rpcUrls)||void 0===t?void 0:t.length)===0)return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!s.chainName||""===s.chainName.trim())throw h.standardErrors.rpc.invalidParams("chainName is a required field");if(!s.nativeCurrency)throw h.standardErrors.rpc.invalidParams("nativeCurrency is a required field");let o=parseInt(s.chainId,16);return await this.addEthereumChain(o,null!==(r=s.rpcUrls)&&void 0!==r?r:[],null!==(i=s.blockExplorerUrls)&&void 0!==i?i:[],s.chainName,null!==(n=s.iconUrls)&&void 0!==n?n:[],s.nativeCurrency)?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}}async _wallet_switchEthereumChain(e){let t=e[0];return await this.switchEthereumChain(parseInt(t.chainId,16)),{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(e){let t=Array.isArray(e)?e[0]:e;if(!t.type)throw h.standardErrors.rpc.invalidParams("Type is required");if((null==t?void 0:t.type)!=="ERC20")throw h.standardErrors.rpc.invalidParams(`Asset of type '${t.type}' is not supported`);if(!(null==t?void 0:t.options))throw h.standardErrors.rpc.invalidParams("Options are required");if(!(null==t?void 0:t.options.address))throw h.standardErrors.rpc.invalidParams("Address is required");let r=this.getChainId(),{address:i,symbol:n,image:s,decimals:o}=t.options;return{jsonrpc:"2.0",id:0,result:await this.watchAsset(t.type,i,n,o,s,r)}}initializeRelay(){if(!this._relay){let e=new u.WalletLinkRelay({linkAPIUrl:l.WALLETLINK_URL,storage:this._storage});e.setAppInfo(this._appName,this._appLogoUrl),e.attachUI(),e.setAccountsCallback((e,t)=>this._setAddresses(e,t)),e.setChainCallback((e,t)=>{this.updateProviderInfo(t,parseInt(e,10))}),this._relay=e}return this._relay}}t.WalletLinkSigner=y},73018:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelayEventManager=void 0;let i=r(64732);class n{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;let e=this._nextRequestId,t=(0,i.prepend0x)(e.toString(16));return this.callbacks.get(t)&&this.callbacks.delete(t),e}}t.RelayEventManager=n},91811:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkRelay=void 0;let i=r(50032),n=r(6949),s=r(73018),o=r(98083),a=r(7090),c=r(39092),u=r(46183),l=r(18929),h=r(35401),d=r(64732),f=r(4640);class p{constructor(e){this.accountsCallback=null,this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.chainCallback=null,this.dappDefaultChain=1,this.isMobileWeb=(0,c.isMobileWeb)(),this.appName="",this.appLogoUrl=null,this.linkedUpdated=e=>{this.isLinked=e;let t=this.storage.getItem(n.LOCAL_STORAGE_ADDRESSES_KEY);if(e&&(this._session.linked=e),this.isUnlinkedErrorState=!1,t){let r=t.split(" "),i="true"===this.storage.getItem("IsStandaloneSigning");""===r[0]||e||!this._session.linked||i||(this.isUnlinkedErrorState=!0)}},this.metadataUpdated=(e,t)=>{this.storage.setItem(e,t)},this.chainUpdated=(e,t)=>{(this.chainCallbackParams.chainId!==e||this.chainCallbackParams.jsonRpcUrl!==t)&&(this.chainCallbackParams={chainId:e,jsonRpcUrl:t},this.chainCallback&&this.chainCallback(e,t))},this.accountUpdated=e=>{this.accountsCallback&&this.accountsCallback([e]),p.accountRequestCallbackIds.size>0&&(Array.from(p.accountRequestCallbackIds.values()).forEach(t=>{this.invokeCallback(Object.assign(Object.assign({},{type:"WEB3_RESPONSE",id:t,response:{method:"requestEthereumAccounts",result:[e]}}),{id:t}))}),p.accountRequestCallbackIds.clear())},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=e.linkAPIUrl,this.storage=e.storage;let{session:t,ui:r,connection:i}=this.subscribe();this._session=t,this.connection=i,this.relayEventManager=new s.RelayEventManager,this.ui=r}subscribe(){let e=o.WalletLinkSession.load(this.storage)||new o.WalletLinkSession(this.storage).save(),{linkAPIUrl:t}=this,r=new i.WalletLinkConnection({session:e,linkAPIUrl:t,listener:this}),n=this.isMobileWeb?new l.WLMobileRelayUI:new u.WalletLinkRelayUI;return r.connect(),{session:e,ui:n,connection:r}}attachUI(){this.ui.attach()}resetAndReload(){Promise.race([this.connection.setSessionMetadata("__destroyed","1"),new Promise(e=>setTimeout(()=>e(null),1e3))]).then(()=>{this.connection.destroy();let e=o.WalletLinkSession.load(this.storage);(null==e?void 0:e.id)===this._session.id&&f.ScopedLocalStorage.clearAll(),document.location.reload()}).catch(e=>{})}setAppInfo(e,t){this.appName=e,this.appLogoUrl=t}getStorageItem(e){return this.storage.getItem(e)}setStorageItem(e,t){this.storage.setItem(e,t)}signEthereumMessage(e,t,r,i){return this.sendRequest({method:"signEthereumMessage",params:{message:(0,d.hexStringFromBuffer)(e,!0),address:t,addPrefix:r,typedDataJson:i||null}})}ethereumAddressFromSignedMessage(e,t,r){return this.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:(0,d.hexStringFromBuffer)(e,!0),signature:(0,d.hexStringFromBuffer)(t,!0),addPrefix:r}})}signEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,d.bigIntStringFromBigInt)(e.weiValue),data:(0,d.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,d.bigIntStringFromBigInt)(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?(0,d.bigIntStringFromBigInt)(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?(0,d.bigIntStringFromBigInt)(e.gasPriceInWei):null,gasLimit:e.gasLimit?(0,d.bigIntStringFromBigInt)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,d.bigIntStringFromBigInt)(e.weiValue),data:(0,d.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,d.bigIntStringFromBigInt)(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?(0,d.bigIntStringFromBigInt)(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?(0,d.bigIntStringFromBigInt)(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?(0,d.bigIntStringFromBigInt)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}submitEthereumTransaction(e,t){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:(0,d.hexStringFromBuffer)(e,!0),chainId:t}})}scanQRCode(e){return this.sendRequest({method:"scanQRCode",params:{regExp:e}})}getWalletLinkSession(){return this._session}genericRequest(e,t){return this.sendRequest({method:"generic",params:{action:t,data:e}})}sendGenericMessage(e){return this.sendRequest(e)}sendRequest(e){let t=null,r=(0,d.randomBytesHex)(8),i=i=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,e.method,i),null==t||t()};return new Promise((n,s)=>{t=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:i,onResetConnection:this.resetAndReload}),this.relayEventManager.callbacks.set(r,e=>{if(null==t||t(),(0,a.isErrorResponse)(e))return s(Error(e.errorMessage));n(e)}),this.publishWeb3RequestEvent(r,e)})}setAccountsCallback(e){this.accountsCallback=e}setChainCallback(e){this.chainCallback=e}setDappDefaultChainCallback(e){this.dappDefaultChain=e}publishWeb3RequestEvent(e,t){let r={type:"WEB3_REQUEST",id:e,request:t};this.publishEvent("Web3Request",r,!0).then(e=>{}).catch(e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:r.id,response:{method:t.method,errorMessage:e.message}})}),this.isMobileWeb&&this.openCoinbaseWalletDeeplink(t.method)}openCoinbaseWalletDeeplink(e){if(this.ui instanceof l.WLMobileRelayUI)switch(e){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0}),this.ui.openCoinbaseWalletDeeplink()}}publishWeb3RequestCanceledEvent(e){this.publishEvent("Web3RequestCanceled",{type:"WEB3_REQUEST_CANCELED",id:e},!1).then()}publishEvent(e,t,r){return this.connection.publishEvent(e,t,r)}handleWeb3ResponseMessage(e){let{response:t}=e;if("requestEthereumAccounts"===t.method){p.accountRequestCallbackIds.forEach(t=>this.invokeCallback(Object.assign(Object.assign({},e),{id:t}))),p.accountRequestCallbackIds.clear();return}this.invokeCallback(e)}handleErrorResponse(e,t,r){var i;let n=null!==(i=null==r?void 0:r.message)&&void 0!==i?i:"Unspecified error message.";this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:e,response:{method:t,errorMessage:n}})}invokeCallback(e){let t=this.relayEventManager.callbacks.get(e.id);t&&(t(e.response),this.relayEventManager.callbacks.delete(e.id))}requestEthereumAccounts(){let e={method:"requestEthereumAccounts",params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},t=(0,d.randomBytesHex)(8);return new Promise((r,i)=>{this.relayEventManager.callbacks.set(t,e=>{if((0,a.isErrorResponse)(e))return i(Error(e.errorMessage));r(e)}),p.accountRequestCallbackIds.add(t),this.publishWeb3RequestEvent(t,e)})}watchAsset(e,t,r,i,n,s){let o={method:"watchAsset",params:{type:e,options:{address:t,symbol:r,decimals:i,image:n},chainId:s}},c=null,u=(0,d.randomBytesHex)(8);return c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:e=>{this.publishWeb3RequestCanceledEvent(u),this.handleErrorResponse(u,o.method,e),null==c||c()},onResetConnection:this.resetAndReload}),new Promise((e,t)=>{this.relayEventManager.callbacks.set(u,r=>{if(null==c||c(),(0,a.isErrorResponse)(r))return t(Error(r.errorMessage));e(r)}),this.publishWeb3RequestEvent(u,o)})}addEthereumChain(e,t,r,i,n,s){let o={method:"addEthereumChain",params:{chainId:e,rpcUrls:t,blockExplorerUrls:i,chainName:n,iconUrls:r,nativeCurrency:s}},c=null,u=(0,d.randomBytesHex)(8);return c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:e=>{this.publishWeb3RequestCanceledEvent(u),this.handleErrorResponse(u,o.method,e),null==c||c()},onResetConnection:this.resetAndReload}),new Promise((e,t)=>{this.relayEventManager.callbacks.set(u,r=>{if(null==c||c(),(0,a.isErrorResponse)(r))return t(Error(r.errorMessage));e(r)}),this.publishWeb3RequestEvent(u,o)})}switchEthereumChain(e,t){let r={method:"switchEthereumChain",params:Object.assign({chainId:e},{address:t})},i=(0,d.randomBytesHex)(8);return new Promise((e,t)=>{this.relayEventManager.callbacks.set(i,r=>(0,a.isErrorResponse)(r)&&r.errorCode?t(h.standardErrors.provider.custom({code:r.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."})):(0,a.isErrorResponse)(r)?t(Error(r.errorMessage)):void e(r)),this.publishWeb3RequestEvent(i,r)})}}t.WalletLinkRelay=p,p.accountRequestCallbackIds=new Set},22040:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkCipher=void 0;let i=r(64732);class n{constructor(e){this.secret=e}async encrypt(e){let t=this.secret;if(64!==t.length)throw Error("secret must be 256 bits");let r=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.importKey("raw",(0,i.hexStringToUint8Array)(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),s=new TextEncoder,o=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,s.encode(e)),a=o.slice(o.byteLength-16),c=o.slice(0,o.byteLength-16),u=new Uint8Array(a),l=new Uint8Array(c),h=new Uint8Array([...r,...u,...l]);return(0,i.uint8ArrayToHex)(h)}async decrypt(e){let t=this.secret;if(64!==t.length)throw Error("secret must be 256 bits");return new Promise((r,n)=>{(async function(){let s=await crypto.subtle.importKey("raw",(0,i.hexStringToUint8Array)(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),o=(0,i.hexStringToUint8Array)(e),a=o.slice(0,12),c=o.slice(12,28),u=new Uint8Array([...o.slice(28),...c]),l={name:"AES-GCM",iv:new Uint8Array(a)};try{let e=await window.crypto.subtle.decrypt(l,s,u),t=new TextDecoder;r(t.decode(e))}catch(e){n(e)}})()})}}t.WalletLinkCipher=n},50032:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkConnection=void 0;let i=r(6949),n=r(22040),s=r(17627),o=r(21903),a=r(17105);class c{constructor({session:e,linkAPIUrl:t,listener:r,WebSocketClass:c=WebSocket}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=(0,a.IntNumber)(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=e=>{e&&new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",t=>e.JsonRpcUrl&&this.handleChainUpdated(t,e.JsonRpcUrl)]]).forEach((t,r)=>{let i=e[r];void 0!==i&&t(i)})},this.handleDestroyed=e=>{var t;"1"===e&&(null===(t=this.listener)||void 0===t||t.resetAndReload())},this.handleAccountUpdated=async e=>{var t;{let r=await this.cipher.decrypt(e);null===(t=this.listener)||void 0===t||t.accountUpdated(r)}},this.handleMetadataUpdated=async(e,t)=>{var r;{let i=await this.cipher.decrypt(t);null===(r=this.listener)||void 0===r||r.metadataUpdated(e,i)}},this.handleWalletUsernameUpdated=async e=>{this.handleMetadataUpdated(i.WALLET_USER_NAME_KEY,e)},this.handleAppVersionUpdated=async e=>{this.handleMetadataUpdated(i.APP_VERSION_KEY,e)},this.handleChainUpdated=async(e,t)=>{var r;{let i=await this.cipher.decrypt(e),n=await this.cipher.decrypt(t);null===(r=this.listener)||void 0===r||r.chainUpdated(i,n)}},this.session=e,this.cipher=new n.WalletLinkCipher(e.secret),this.listener=r;let u=new o.WalletLinkWebSocket(`${t}/rpc`,c);u.setConnectionStateListener(async e=>{let t=!1;switch(e){case o.ConnectionState.DISCONNECTED:if(!this.destroyed){let e=async()=>{await new Promise(e=>setTimeout(e,5e3)),this.destroyed||u.connect().catch(()=>{e()})};e()}break;case o.ConnectionState.CONNECTED:try{await this.authenticate(),this.sendIsLinked(),this.sendGetSessionConfig(),t=!0}catch(e){}this.updateLastHeartbeat(),setInterval(()=>{this.heartbeat()},1e4),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();case o.ConnectionState.CONNECTING:}this.connected!==t&&(this.connected=t)}),u.setIncomingDataListener(e=>{var t;switch(e.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{let t="IsLinkedOK"===e.type?e.linked:void 0;this.linked=t||e.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":this.handleSessionMetadataUpdated(e.metadata);break;case"Event":this.handleIncomingEvent(e)}void 0!==e.id&&(null===(t=this.requestResolutions.get(e.id))||void 0===t||t(e))}),this.ws=u,this.http=new s.WalletLinkHTTP(t,e.id,e.key)}connect(){if(this.destroyed)throw Error("instance is destroyed");this.ws.connect()}destroy(){this.destroyed=!0,this.ws.disconnect(),this.listener=void 0}get isDestroyed(){return this.destroyed}get connected(){return this._connected}set connected(e){var t;this._connected=e,e&&(null===(t=this.onceConnected)||void 0===t||t.call(this))}setOnceConnected(e){return new Promise(t=>{this.connected?e().then(t):this.onceConnected=()=>{e().then(t),this.onceConnected=void 0}})}get linked(){return this._linked}set linked(e){var t,r;this._linked=e,e&&(null===(t=this.onceLinked)||void 0===t||t.call(this)),null===(r=this.listener)||void 0===r||r.linkedUpdated(e)}setOnceLinked(e){return new Promise(t=>{this.linked?e().then(t):this.onceLinked=()=>{e().then(t),this.onceLinked=void 0}})}async handleIncomingEvent(e){var t;if("Event"===e.type&&"Web3Response"===e.event){let r=JSON.parse(await this.cipher.decrypt(e.data));if("WEB3_RESPONSE"!==r.type)return;null===(t=this.listener)||void 0===t||t.handleWeb3ResponseMessage(r)}}async checkUnseenEvents(){if(!this.connected){this.shouldFetchUnseenEventsOnConnect=!0;return}await new Promise(e=>setTimeout(e,250));try{await this.fetchUnseenEventsAPI()}catch(e){console.error("Unable to check for unseen events",e)}}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=!1,(await this.http.fetchUnseenEvents()).forEach(e=>this.handleIncomingEvent(e))}async setSessionMetadata(e,t){let r={type:"SetSessionConfig",id:(0,a.IntNumber)(this.nextReqId++),sessionId:this.session.id,metadata:{[e]:t}};return this.setOnceConnected(async()=>{let e=await this.makeRequest(r);if("Fail"===e.type)throw Error(e.error||"failed to set session metadata")})}async publishEvent(e,t,r=!1){let i=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},t),{origin:location.origin,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),n={type:"PublishEvent",id:(0,a.IntNumber)(this.nextReqId++),sessionId:this.session.id,event:e,data:i,callWebhook:r};return this.setOnceLinked(async()=>{let e=await this.makeRequest(n);if("Fail"===e.type)throw Error(e.error||"failed to publish event");return e.eventId})}sendData(e){this.ws.sendData(JSON.stringify(e))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>2e4){this.ws.disconnect();return}try{this.ws.sendData("h")}catch(e){}}async makeRequest(e,t=6e4){let r;let i=e.id;return this.sendData(e),Promise.race([new Promise((e,n)=>{r=window.setTimeout(()=>{n(Error(`request ${i} timed out`))},t)}),new Promise(e=>{this.requestResolutions.set(i,t=>{clearTimeout(r),e(t),this.requestResolutions.delete(i)})})])}async authenticate(){let e={type:"HostSession",id:(0,a.IntNumber)(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key},t=await this.makeRequest(e);if("Fail"===t.type)throw Error(t.error||"failed to authenticate")}sendIsLinked(){let e={type:"IsLinked",id:(0,a.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(e)}sendGetSessionConfig(){let e={type:"GetSessionConfig",id:(0,a.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(e)}}t.WalletLinkConnection=c},17627:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkHTTP=void 0;class r{constructor(e,t,r){this.linkAPIUrl=e,this.sessionId=t;let i=`${t}:${r}`;this.auth=`Basic ${btoa(i)}`}async markUnseenEventsAsSeen(e){return Promise.all(e.map(e=>fetch(`${this.linkAPIUrl}/events/${e.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(e=>console.error("Unabled to mark event as failed:",e))}async fetchUnseenEvents(){var e;let t=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(t.ok){let{events:r,error:i}=await t.json();if(i)throw Error(`Check unseen events failed: ${i}`);let n=null!==(e=null==r?void 0:r.filter(e=>"Web3Response"===e.event).map(e=>({type:"Event",sessionId:this.sessionId,eventId:e.id,event:e.event,data:e.data})))&&void 0!==e?e:[];return this.markUnseenEventsAsSeen(n),n}throw Error(`Check unseen events failed: ${t.status}`)}}t.WalletLinkHTTP=r},21903:function(e,t){"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkWebSocket=t.ConnectionState=void 0,(i=r||(t.ConnectionState=r={}))[i.DISCONNECTED=0]="DISCONNECTED",i[i.CONNECTING=1]="CONNECTING",i[i.CONNECTED=2]="CONNECTED";class n{setConnectionStateListener(e){this.connectionStateListener=e}setIncomingDataListener(e){this.incomingDataListener=e}constructor(e,t=WebSocket){this.WebSocketClass=t,this.webSocket=null,this.pendingData=[],this.url=e.replace(/^http/,"ws")}async connect(){if(this.webSocket)throw Error("webSocket object is not null");return new Promise((e,t)=>{var i;let n;try{this.webSocket=n=new this.WebSocketClass(this.url)}catch(e){t(e);return}null===(i=this.connectionStateListener)||void 0===i||i.call(this,r.CONNECTING),n.onclose=e=>{var i;this.clearWebSocket(),t(Error(`websocket error ${e.code}: ${e.reason}`)),null===(i=this.connectionStateListener)||void 0===i||i.call(this,r.DISCONNECTED)},n.onopen=t=>{var i;e(),null===(i=this.connectionStateListener)||void 0===i||i.call(this,r.CONNECTED),this.pendingData.length>0&&([...this.pendingData].forEach(e=>this.sendData(e)),this.pendingData=[])},n.onmessage=e=>{var t,r;if("h"===e.data)null===(t=this.incomingDataListener)||void 0===t||t.call(this,{type:"Heartbeat"});else try{let t=JSON.parse(e.data);null===(r=this.incomingDataListener)||void 0===r||r.call(this,t)}catch(e){}}})}disconnect(){var e;let{webSocket:t}=this;if(t){this.clearWebSocket(),null===(e=this.connectionStateListener)||void 0===e||e.call(this,r.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{t.close()}catch(e){}}}sendData(e){let{webSocket:t}=this;if(!t){this.pendingData.push(e),this.connect();return}t.send(e)}clearWebSocket(){let{webSocket:e}=this;e&&(this.webSocket=null,e.onclose=null,e.onerror=null,e.onmessage=null,e.onopen=null)}}t.WalletLinkWebSocket=n},6949:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APP_VERSION_KEY=t.LOCAL_STORAGE_ADDRESSES_KEY=t.WALLET_USER_NAME_KEY=void 0,t.WALLET_USER_NAME_KEY="walletUsername",t.LOCAL_STORAGE_ADDRESSES_KEY="Addresses",t.APP_VERSION_KEY="AppVersion"},98083:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkSession=void 0;let i=r(20708),n=r(64732),s="session:id",o="session:secret",a="session:linked";class c{constructor(e,t,r,s){this._storage=e,this._id=t||(0,n.randomBytesHex)(16),this._secret=r||(0,n.randomBytesHex)(32),this._key=new i.sha256().update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!s}static load(e){let t=e.getItem(s),r=e.getItem(a),i=e.getItem(o);return t&&i?new c(e,t,i,"1"===r):null}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(e){this._linked=e,this.persistLinked()}save(){return this._storage.setItem(s,this._id),this._storage.setItem(o,this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem(a,this._linked?"1":"0")}}t.WalletLinkSession=c},7090:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isErrorResponse=void 0,t.isErrorResponse=function(e){return void 0!==e.errorMessage}},18929:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WLMobileRelayUI=void 0;let i=r(72595),n=r(39092),s=r(95337);class o{constructor(){this.attached=!1,this.redirectDialog=new i.RedirectDialog}attach(){if(this.attached)throw Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}redirectToCoinbaseWallet(e){let t=new URL(s.CBW_MOBILE_DEEPLINK_URL);t.searchParams.append("redirect_url",(0,n.getLocation)().href),e&&t.searchParams.append("wl_url",e);let r=document.createElement("a");r.target="cbw-opener",r.href=t.href,r.rel="noreferrer noopener",r.click()}openCoinbaseWalletDeeplink(e){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:()=>{this.redirectToCoinbaseWallet(e)}}),setTimeout(()=>{this.redirectToCoinbaseWallet(e)},99)}showConnecting(e){return()=>{this.redirectDialog.clear()}}}t.WLMobileRelayUI=o},46183:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkRelayUI=void 0;let i=r(64060),n=r(37351);class s{constructor(){this.attached=!1,this.snackbar=new n.Snackbar}attach(){if(this.attached)throw Error("Coinbase Wallet SDK UI is already attached");let e=document.documentElement,t=document.createElement("div");t.className="-cbwsdk-css-reset",e.appendChild(t),this.snackbar.attach(t),this.attached=!0,(0,i.injectCssReset)()}showConnecting(e){let t;return t=e.isUnlinkedErrorState?{autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:{message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(t)}}t.WalletLinkRelayUI=s},88227:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}"},72595:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RedirectDialog=void 0;let n=i(r(15582)),s=r(62154),o=r(64060),a=r(37351),c=r(39092),u=i(r(88227));class l{constructor(){this.root=null,this.darkMode=(0,c.isDarkMode)()}attach(){let e=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",e.appendChild(this.root),(0,o.injectCssReset)()}present(e){this.render(e)}clear(){this.render(null)}render(e){this.root&&((0,s.render)(null,this.root),e&&(0,s.render)((0,s.h)(h,Object.assign({},e,{onDismiss:()=>{this.clear()},darkMode:this.darkMode})),this.root))}}t.RedirectDialog=l;let h=({title:e,buttonText:t,darkMode:r,onButtonClick:i,onDismiss:o})=>(0,s.h)(a.SnackbarContainer,{darkMode:r},(0,s.h)("div",{class:"-cbwsdk-redirect-dialog"},(0,s.h)("style",null,u.default),(0,s.h)("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:o}),(0,s.h)("div",{class:(0,n.default)("-cbwsdk-redirect-dialog-box",r?"dark":"light")},(0,s.h)("p",null,e),(0,s.h)("button",{onClick:i},t))))},27446:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}"},37351:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SnackbarInstance=t.SnackbarContainer=t.Snackbar=void 0;let n=i(r(15582)),s=r(62154),o=r(38641),a=r(39092),c=i(r(27446));class u{constructor(){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=(0,a.isDarkMode)()}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",e.appendChild(this.root),this.render()}presentItem(e){let t=this.nextItemKey++;return this.items.set(t,e),this.render(),()=>{this.items.delete(t),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&(0,s.render)((0,s.h)("div",null,(0,s.h)(t.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([e,r])=>(0,s.h)(t.SnackbarInstance,Object.assign({},r,{key:e}))))),this.root)}}t.Snackbar=u,t.SnackbarContainer=e=>(0,s.h)("div",{class:(0,n.default)("-cbwsdk-snackbar-container")},(0,s.h)("style",null,c.default),(0,s.h)("div",{class:"-cbwsdk-snackbar"},e.children)),t.SnackbarInstance=({autoExpand:e,message:t,menuItems:r})=>{let[i,a]=(0,o.useState)(!0),[c,u]=(0,o.useState)(null!=e&&e);return(0,o.useEffect)(()=>{let e=[window.setTimeout(()=>{a(!1)},1),window.setTimeout(()=>{u(!0)},1e4)];return()=>{e.forEach(window.clearTimeout)}}),(0,s.h)("div",{class:(0,n.default)("-cbwsdk-snackbar-instance",i&&"-cbwsdk-snackbar-instance-hidden",c&&"-cbwsdk-snackbar-instance-expanded")},(0,s.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:()=>{u(!c)}},(0,s.h)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",(0,s.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},t),(0,s.h)("div",{class:"-gear-container"},!c&&(0,s.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,s.h)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=",class:"-gear-icon",title:"Expand"}))),r&&r.length>0&&(0,s.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},r.map((e,t)=>(0,s.h)("div",{class:(0,n.default)("-cbwsdk-snackbar-instance-menu-item",e.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:e.onClick,key:t},(0,s.h)("svg",{width:e.svgWidth,height:e.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.h)("path",{"fill-rule":e.defaultFillRule,"clip-rule":e.defaultClipRule,d:e.path,fill:"#AAAAAA"})),(0,s.h)("span",{class:(0,n.default)("-cbwsdk-snackbar-instance-menu-item-info",e.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},e.info)))))}},56352:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}'},64060:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.injectCssReset=void 0;let n=i(r(56352));t.injectCssReset=function(){let e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(n.default)),document.documentElement.appendChild(e)}},39092:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDarkMode=t.isMobileWeb=t.getLocation=t.createQrUrl=void 0,t.createQrUrl=function(e,t,r,i,n,s){let o=new URLSearchParams({[i?"parent-id":"id"]:e,secret:t,server:r,v:n,chainId:s.toString()}).toString();return`${r}/#/link?${o}`},t.getLocation=function(){try{if(function(){try{return null!==window.frameElement}catch(e){return!1}}()&&window.top)return window.top.location;return window.location}catch(e){return window.location}},t.isMobileWeb=function(){var e;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(null===(e=null==window?void 0:window.navigator)||void 0===e?void 0:e.userAgent)},t.isDarkMode=function(){var e,t;return null!==(t=null===(e=null==window?void 0:window.matchMedia)||void 0===e?void 0:e.call(window,"(prefers-color-scheme: dark)").matches)&&void 0!==t&&t}},4640:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScopedLocalStorage=void 0;class r{constructor(e,t){this.scope=e,this.module=t}setItem(e,t){localStorage.setItem(this.scopedKey(e),t)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){let e=this.scopedKey(""),t=[];for(let r=0;r<localStorage.length;r++){let i=localStorage.key(r);"string"==typeof i&&i.startsWith(e)&&t.push(i)}t.forEach(e=>localStorage.removeItem(e))}scopedKey(e){return`-${this.scope}${this.module?`:${this.module}`:""}:${e}`}static clearAll(){new r("CBWSDK").clear(),new r("walletlink").clear()}}t.ScopedLocalStorage=r},40921:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decryptContent=t.encryptContent=t.importKeyFromHexString=t.exportKeyToHexString=t.decrypt=t.encrypt=t.deriveSharedSecret=t.generateKeyPair=void 0;let i=r(64732);async function n(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])}async function s(e,t){return crypto.subtle.deriveKey({name:"ECDH",public:t},e,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function o(e,t){let r=crypto.getRandomValues(new Uint8Array(12)),i=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},e,new TextEncoder().encode(t));return{iv:r,cipherText:i}}async function a(e,{iv:t,cipherText:r}){let i=await crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,r);return new TextDecoder().decode(i)}function c(e){switch(e){case"public":return"spki";case"private":return"pkcs8"}}async function u(e,t){let r=c(e),n=await crypto.subtle.exportKey(r,t);return(0,i.uint8ArrayToHex)(new Uint8Array(n))}async function l(e,t){let r=c(e),n=(0,i.hexStringToUint8Array)(t).buffer;return await crypto.subtle.importKey(r,n,{name:"ECDH",namedCurve:"P-256"},!0,"private"===e?["deriveKey"]:[])}async function h(e,t){return o(t,JSON.stringify(e,(e,t)=>t instanceof Error?Object.assign(Object.assign({},t.code?{code:t.code}:{}),{message:t.message}):t))}async function d(e,t){return JSON.parse(await a(t,e))}t.generateKeyPair=n,t.deriveSharedSecret=s,t.encrypt=o,t.decrypt=a,t.exportKeyToHexString=u,t.importKeyFromHexString=l,t.encryptContent=h,t.decryptContent=d},95934:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkErrorForInvalidRequestArgs=t.getCoinbaseInjectedProvider=t.getCoinbaseInjectedSigner=t.fetchRPCRequest=void 0;let i=r(55254),n=r(35401);async function s(e,t){if(!t.rpcUrl)throw n.standardErrors.rpc.internal("No RPC URL set for chain");let r=Object.assign(Object.assign({},e),{jsonrpc:"2.0",id:crypto.randomUUID()}),s=await window.fetch(t.rpcUrl,{method:"POST",body:JSON.stringify(r),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":i.LIB_VERSION}});return(await s.json()).result}function o(){return globalThis.coinbaseWalletSigner}t.fetchRPCRequest=s,t.getCoinbaseInjectedSigner=o,t.getCoinbaseInjectedProvider=function({metadata:e,preference:t}){var r;if("smartWalletOnly"!==t.options){if(o())return;let t=globalThis.coinbaseWalletExtension;if(t){let{appName:i,appLogoUrl:n,appChainIds:s}=e;return null===(r=t.setAppInfo)||void 0===r||r.call(t,i,n,s),t}}let i=function(){var e,t;try{let r=globalThis;return null!==(e=r.ethereum)&&void 0!==e?e:null===(t=r.top)||void 0===t?void 0:t.ethereum}catch(e){return}}();if(null==i?void 0:i.isCoinbaseBrowser)return i},t.checkErrorForInvalidRequestArgs=function(e){if(!e||"object"!=typeof e||Array.isArray(e))return n.standardErrors.rpc.invalidParams({message:"Expected a single, non-array, object argument.",data:e});let{method:t,params:r}=e;return"string"!=typeof t||0===t.length?n.standardErrors.rpc.invalidParams({message:"'args.method' must be a non-empty string.",data:e}):void 0===r||Array.isArray(r)||"object"==typeof r&&null!==r?void 0:n.standardErrors.rpc.invalidParams({message:"'args.params' must be an object or array if provided.",data:e})}},63444:function(e,t,r){var i=r(90687).Buffer;let n=r(85832);function s(e){if(e.startsWith("int["))return"int256"+e.slice(3);if("int"===e)return"int256";if(e.startsWith("uint["))return"uint256"+e.slice(4);if("uint"===e)return"uint256";if(e.startsWith("fixed["))return"fixed128x128"+e.slice(5);if("fixed"===e)return"fixed128x128";if(e.startsWith("ufixed["))return"ufixed128x128"+e.slice(6);else if("ufixed"===e)return"ufixed128x128";return e}function o(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function a(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function c(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?""===t[2]?"dynamic":parseInt(t[2],10):null}function u(e){var t=typeof e;if("string"===t||"number"===t)return BigInt(e);if("bigint"===t)return e;throw Error("Argument is not a number")}function l(e,t){if("address"===e)return l("uint160",u(t));if("bool"===e)return l("uint8",t?1:0);if("string"===e)return l("bytes",new i(t,"utf8"));if((f=e).lastIndexOf("]")===f.length-1){if(void 0===t.length)throw Error("Not an array?");if("dynamic"!==(r=c(e))&&0!==r&&t.length>r)throw Error("Elements exceed array size: "+r);for(d in h=[],e=e.slice(0,e.lastIndexOf("[")),"string"==typeof t&&(t=JSON.parse(t)),t)h.push(l(e,t[d]));if("dynamic"===r){var r,s,h,d,f,p=l("uint256",t.length);h.unshift(p)}return i.concat(h)}if("bytes"===e)return t=new i(t),h=i.concat([l("uint256",t.length),t]),t.length%32!=0&&(h=i.concat([h,n.zeros(32-t.length%32)])),h;if(e.startsWith("bytes")){if((r=o(e))<1||r>32)throw Error("Invalid bytes<N> width: "+r);return n.setLengthRight(t,32)}else if(e.startsWith("uint")){if((r=o(e))%8||r<8||r>256)throw Error("Invalid uint<N> width: "+r);s=u(t);let i=n.bitLengthFromBigInt(s);if(i>r)throw Error("Supplied uint exceeds width: "+r+" vs "+i);if(s<0)throw Error("Supplied uint is negative");return n.bufferBEFromBigInt(s,32)}else if(e.startsWith("int")){if((r=o(e))%8||r<8||r>256)throw Error("Invalid int<N> width: "+r);s=u(t);let i=n.bitLengthFromBigInt(s);if(i>r)throw Error("Supplied int exceeds width: "+r+" vs "+i);let a=n.twosFromBigInt(s,256);return n.bufferBEFromBigInt(a,32)}else if(e.startsWith("ufixed")){if(r=a(e),(s=u(t))<0)throw Error("Supplied ufixed is negative");return l("uint256",s*BigInt(2)**BigInt(r[1]))}else if(e.startsWith("fixed"))return r=a(e),l("int256",u(t)*BigInt(2)**BigInt(r[1]));throw Error("Unsupported or invalid type: "+e)}function h(e,t){if(e.length!==t.length)throw Error("Number of types are not matching the values");for(var r,a,c=[],l=0;l<e.length;l++){var h=s(e[l]),d=t[l];if("bytes"===h)c.push(d);else if("string"===h)c.push(new i(d,"utf8"));else if("bool"===h)c.push(new i(d?"01":"00","hex"));else if("address"===h)c.push(n.setLength(d,20));else if(h.startsWith("bytes")){if((r=o(h))<1||r>32)throw Error("Invalid bytes<N> width: "+r);c.push(n.setLengthRight(d,r))}else if(h.startsWith("uint")){if((r=o(h))%8||r<8||r>256)throw Error("Invalid uint<N> width: "+r);a=u(d);let e=n.bitLengthFromBigInt(a);if(e>r)throw Error("Supplied uint exceeds width: "+r+" vs "+e);c.push(n.bufferBEFromBigInt(a,r/8))}else if(h.startsWith("int")){if((r=o(h))%8||r<8||r>256)throw Error("Invalid int<N> width: "+r);a=u(d);let e=n.bitLengthFromBigInt(a);if(e>r)throw Error("Supplied int exceeds width: "+r+" vs "+e);let t=n.twosFromBigInt(a,r);c.push(n.bufferBEFromBigInt(t,r/8))}else throw Error("Unsupported or invalid type: "+h)}return i.concat(c)}e.exports={rawEncode:function(e,t){var r=[],n=[],o=32*e.length;for(var a in e){var u=s(e[a]),h=l(u,t[a]);"string"===u||"bytes"===u||"dynamic"===c(u)?(r.push(l("uint256",o)),n.push(h),o+=h.length):r.push(h)}return i.concat(r.concat(n))},solidityPack:h,soliditySHA3:function(e,t){return n.keccak(h(e,t))}}},35978:function(e,t,r){var i=r(90687).Buffer;let n=r(85832),s=r(63444),o={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},a={encodeData(e,t,r,o=!0){let a=["bytes32"],c=[this.hashType(e,r)];if(o){let u=(e,t,a)=>{if(void 0!==r[t])return["bytes32",null==a?"0x0000000000000000000000000000000000000000000000000000000000000000":n.keccak(this.encodeData(t,a,r,o))];if(void 0===a)throw Error(`missing value for field ${e} of type ${t}`);if("bytes"===t)return["bytes32",n.keccak(a)];if("string"===t)return"string"==typeof a&&(a=i.from(a,"utf8")),["bytes32",n.keccak(a)];if(t.lastIndexOf("]")===t.length-1){let r=t.slice(0,t.lastIndexOf("[")),i=a.map(t=>u(e,r,t));return["bytes32",n.keccak(s.rawEncode(i.map(([e])=>e),i.map(([,e])=>e)))]}return[t,a]};for(let i of r[e]){let[e,r]=u(i.name,i.type,t[i.name]);a.push(e),c.push(r)}}else for(let s of r[e]){let e=t[s.name];if(void 0!==e){if("bytes"===s.type)a.push("bytes32"),e=n.keccak(e),c.push(e);else if("string"===s.type)a.push("bytes32"),"string"==typeof e&&(e=i.from(e,"utf8")),e=n.keccak(e),c.push(e);else if(void 0!==r[s.type])a.push("bytes32"),e=n.keccak(this.encodeData(s.type,e,r,o)),c.push(e);else if(s.type.lastIndexOf("]")===s.type.length-1)throw Error("Arrays currently unimplemented in encodeData");else a.push(s.type),c.push(e)}}return s.rawEncode(a,c)},encodeType(e,t){let r="",i=this.findTypeDependencies(e,t).filter(t=>t!==e);for(let n of i=[e].concat(i.sort())){if(!t[n])throw Error("No type definition specified: "+n);r+=n+"("+t[n].map(({name:e,type:t})=>t+" "+e).join(",")+")"}return r},findTypeDependencies(e,t,r=[]){if(e=e.match(/^\w*/)[0],r.includes(e)||void 0===t[e])return r;for(let i of(r.push(e),t[e]))for(let e of this.findTypeDependencies(i.type,t,r))r.includes(e)||r.push(e);return r},hashStruct(e,t,r,i=!0){return n.keccak(this.encodeData(e,t,r,i))},hashType(e,t){return n.keccak(this.encodeType(e,t))},sanitizeData(e){let t={};for(let r in o.properties)e[r]&&(t[r]=e[r]);return t.types&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t},hash(e,t=!0){let r=this.sanitizeData(e),s=[i.from("1901","hex")];return s.push(this.hashStruct("EIP712Domain",r.domain,r.types,t)),"EIP712Domain"!==r.primaryType&&s.push(this.hashStruct(r.primaryType,r.message,r.types,t)),n.keccak(i.concat(s))}};e.exports={TYPED_MESSAGE_SCHEMA:o,TypedDataUtils:a,hashForSignTypedDataLegacy:function(e){return function(e){let t=Error("Expect argument to be non-empty array");if("object"!=typeof e||!e.length)throw t;let r=e.map(function(e){return"bytes"===e.type?n.toBuffer(e.value):e.value}),i=e.map(function(e){return e.type}),o=e.map(function(e){if(!e.name)throw t;return e.type+" "+e.name});return s.soliditySHA3(["bytes32","bytes32"],[s.soliditySHA3(Array(e.length).fill("string"),o),s.soliditySHA3(i,r)])}(e.data)},hashForSignTypedData_v3:function(e){return a.hash(e.data,!1)},hashForSignTypedData_v4:function(e){return a.hash(e.data)}}},85832:function(e,t,r){var i=r(90687).Buffer;let n=r(88661);function s(e){return i.allocUnsafe(e).fill(0)}function o(e,t){let r=e.toString(16);r.length%2!=0&&(r="0"+r);let n=r.match(/.{1,2}/g).map(e=>parseInt(e,16));for(;n.length<t;)n.unshift(0);return i.from(n)}function a(e,t,r){let i=s(t);return(e=c(e),r)?e.length<t?(e.copy(i),i):e.slice(0,t):e.length<t?(e.copy(i,t-e.length),i):e.slice(-t)}function c(e){if(!i.isBuffer(e)){if(Array.isArray(e))e=i.from(e);else if("string"==typeof e){var t;e=u(e)?i.from((t=l(e)).length%2?"0"+t:t,"hex"):i.from(e)}else if("number"==typeof e)e=intToBuffer(e);else if(null==e)e=i.allocUnsafe(0);else if("bigint"==typeof e)e=o(e);else if(e.toArray)e=i.from(e.toArray());else throw Error("invalid type")}return e}function u(e){return"string"==typeof e&&e.match(/^0x[0-9A-Fa-f]*$/)}function l(e){return"string"==typeof e&&e.startsWith("0x")?e.slice(2):e}e.exports={zeros:s,setLength:a,setLengthRight:function(e,t){return a(e,t,!0)},isHexString:u,stripHexPrefix:l,toBuffer:c,bufferToHex:function(e){return"0x"+(e=c(e)).toString("hex")},keccak:function(e,t){return e=c(e),t||(t=256),n("keccak"+t).update(e).digest()},bitLengthFromBigInt:function(e){return e.toString(2).length},bufferBEFromBigInt:o,twosFromBigInt:function(e,t){return(e<0n?(~e&(1n<<BigInt(t))-1n)+1n:e)&(1n<<BigInt(t))-1n}}},55254:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LIB_VERSION=void 0,t.LIB_VERSION="4.0.4"},87483:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(15421);function n(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}function s(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}function o(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function a(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function c(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function u(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function l(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}function h(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}function d(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),l(e/4294967296>>>0,t,r),l(e>>>0,t,r+4),t}function f(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),h(e>>>0,t,r),h(e/4294967296>>>0,t,r+4),t}t.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},t.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},t.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},t.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},t.writeUint16BE=n,t.writeInt16BE=n,t.writeUint16LE=s,t.writeInt16LE=s,t.readInt32BE=o,t.readUint32BE=a,t.readInt32LE=c,t.readUint32LE=u,t.writeUint32BE=l,t.writeInt32BE=l,t.writeUint32LE=h,t.writeInt32LE=h,t.readInt64BE=function(e,t){void 0===t&&(t=0);var r=o(e,t),i=o(e,t+4);return 4294967296*r+i-(i>>31)*4294967296},t.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*a(e,t)+a(e,t+4)},t.readInt64LE=function(e,t){void 0===t&&(t=0);var r=c(e,t);return 4294967296*c(e,t+4)+r-(r>>31)*4294967296},t.readUint64LE=function(e,t){void 0===t&&(t=0);var r=u(e,t);return 4294967296*u(e,t+4)+r},t.writeUint64BE=d,t.writeInt64BE=d,t.writeUint64LE=f,t.writeInt64LE=f,t.readUintBE=function(e,t,r){if(void 0===r&&(r=0),e%8!=0)throw Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw Error("readUintBE: array is too short for the given bitLength");for(var i=0,n=1,s=e/8+r-1;s>=r;s--)i+=t[s]*n,n*=256;return i},t.readUintLE=function(e,t,r){if(void 0===r&&(r=0),e%8!=0)throw Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw Error("readUintLE: array is too short for the given bitLength");for(var i=0,n=1,s=r;s<r+e/8;s++)i+=t[s]*n,n*=256;return i},t.writeUintBE=function(e,t,r,n){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===n&&(n=0),e%8!=0)throw Error("writeUintBE supports only bitLengths divisible by 8");if(!i.isSafeInteger(t))throw Error("writeUintBE value must be an integer");for(var s=1,o=e/8+n-1;o>=n;o--)r[o]=t/s&255,s*=256;return r},t.writeUintLE=function(e,t,r,n){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===n&&(n=0),e%8!=0)throw Error("writeUintLE supports only bitLengths divisible by 8");if(!i.isSafeInteger(t))throw Error("writeUintLE value must be an integer");for(var s=1,o=n;o<n+e/8;o++)r[o]=t/s&255,s*=256;return r},t.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},t.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},t.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},t.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},t.writeFloat32BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e),t},t.writeFloat32LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e,!0),t},t.writeFloat64BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e),t},t.writeFloat64LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e,!0),t}},49581:function(e,t,r){"use strict";var i=r(38785),n=r(71539),s=r(123),o=r(87483),a=r(76901);t.Cv=32,t.WH=12,t.pg=16;var c=new Uint8Array(16),u=function(){function e(e){if(this.nonceLength=t.WH,this.tagLength=t.pg,e.length!==t.Cv)throw Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return e.prototype.seal=function(e,t,r,n){if(e.length>16)throw Error("ChaCha20Poly1305: incorrect nonce length");var o,a=new Uint8Array(16);a.set(e,a.length-e.length);var c=new Uint8Array(32);i.stream(this._key,a,c,4);var u=t.length+this.tagLength;if(n){if(n.length!==u)throw Error("ChaCha20Poly1305: incorrect destination length");o=n}else o=new Uint8Array(u);return i.streamXOR(this._key,a,t,o,4),this._authenticate(o.subarray(o.length-this.tagLength,o.length),c,o.subarray(0,o.length-this.tagLength),r),s.wipe(a),o},e.prototype.open=function(e,t,r,n){if(e.length>16)throw Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var o,c=new Uint8Array(16);c.set(e,c.length-e.length);var u=new Uint8Array(32);i.stream(this._key,c,u,4);var l=new Uint8Array(this.tagLength);if(this._authenticate(l,u,t.subarray(0,t.length-this.tagLength),r),!a.equal(l,t.subarray(t.length-this.tagLength,t.length)))return null;var h=t.length-this.tagLength;if(n){if(n.length!==h)throw Error("ChaCha20Poly1305: incorrect destination length");o=n}else o=new Uint8Array(h);return i.streamXOR(this._key,c,t.subarray(0,t.length-this.tagLength),o,4),s.wipe(c),o},e.prototype.clean=function(){return s.wipe(this._key),this},e.prototype._authenticate=function(e,t,r,i){var a=new n.Poly1305(t);i&&(a.update(i),i.length%16>0&&a.update(c.subarray(i.length%16))),a.update(r),r.length%16>0&&a.update(c.subarray(r.length%16));var u=new Uint8Array(8);i&&o.writeUint64LE(i.length,u),a.update(u),o.writeUint64LE(r.length,u),a.update(u);for(var l=a.digest(),h=0;h<l.length;h++)e[h]=l[h];a.clean(),s.wipe(l),s.wipe(u)},e}();t.OK=u},38785:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(87483),n=r(123);function s(e,t,r,s,o){if(void 0===o&&(o=0),32!==e.length)throw Error("ChaCha: key size must be 32 bytes");if(s.length<r.length)throw Error("ChaCha: destination is shorter than source");if(0===o){if(8!==t.length&&12!==t.length)throw Error("ChaCha nonce must be 8 or 12 bytes");c=(a=new Uint8Array(16)).length-t.length,a.set(t,c)}else{if(16!==t.length)throw Error("ChaCha nonce with counter must be 16 bytes");a=t,c=o}for(var a,c,u=new Uint8Array(64),l=0;l<r.length;l+=64){!function(e,t,r){for(var n=r[3]<<24|r[2]<<16|r[1]<<8|r[0],s=r[7]<<24|r[6]<<16|r[5]<<8|r[4],o=r[11]<<24|r[10]<<16|r[9]<<8|r[8],a=r[15]<<24|r[14]<<16|r[13]<<8|r[12],c=r[19]<<24|r[18]<<16|r[17]<<8|r[16],u=r[23]<<24|r[22]<<16|r[21]<<8|r[20],l=r[27]<<24|r[26]<<16|r[25]<<8|r[24],h=r[31]<<24|r[30]<<16|r[29]<<8|r[28],d=t[3]<<24|t[2]<<16|t[1]<<8|t[0],f=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],g=t[15]<<24|t[14]<<16|t[13]<<8|t[12],y=1634760805,v=857760878,m=2036477234,_=1797285236,b=n,w=s,E=o,S=a,I=c,C=u,D=l,P=h,k=d,A=f,O=p,x=g,R=0;R<20;R+=2)k^=y=y+b|0,b^=I=I+(k=k>>>16|k<<16)|0,b=b>>>20|b<<12,A^=v=v+w|0,w^=C=C+(A=A>>>16|A<<16)|0,w=w>>>20|w<<12,O^=m=m+E|0,E^=D=D+(O=O>>>16|O<<16)|0,E=E>>>20|E<<12,x^=_=_+S|0,S^=P=P+(x=x>>>16|x<<16)|0,S=S>>>20|S<<12,O^=m=m+E|0,E^=D=D+(O=O>>>24|O<<8)|0,E=E>>>25|E<<7,x^=_=_+S|0,S^=P=P+(x=x>>>24|x<<8)|0,S=S>>>25|S<<7,A^=v=v+w|0,w^=C=C+(A=A>>>24|A<<8)|0,w=w>>>25|w<<7,k^=y=y+b|0,b^=I=I+(k=k>>>24|k<<8)|0,b=b>>>25|b<<7,x^=y=y+w|0,w^=D=D+(x=x>>>16|x<<16)|0,w=w>>>20|w<<12,k^=v=v+E|0,E^=P=P+(k=k>>>16|k<<16)|0,E=E>>>20|E<<12,A^=m=m+S|0,S^=I=I+(A=A>>>16|A<<16)|0,S=S>>>20|S<<12,O^=_=_+b|0,b^=C=C+(O=O>>>16|O<<16)|0,b=b>>>20|b<<12,A^=m=m+S|0,S^=I=I+(A=A>>>24|A<<8)|0,S=S>>>25|S<<7,O^=_=_+b|0,b^=C=C+(O=O>>>24|O<<8)|0,b=b>>>25|b<<7,k^=v=v+E|0,E^=P=P+(k=k>>>24|k<<8)|0,E=E>>>25|E<<7,x^=y=y+w|0,w^=D=D+(x=x>>>24|x<<8)|0,w=w>>>25|w<<7;i.writeUint32LE(y+1634760805|0,e,0),i.writeUint32LE(v+857760878|0,e,4),i.writeUint32LE(m+2036477234|0,e,8),i.writeUint32LE(_+1797285236|0,e,12),i.writeUint32LE(b+n|0,e,16),i.writeUint32LE(w+s|0,e,20),i.writeUint32LE(E+o|0,e,24),i.writeUint32LE(S+a|0,e,28),i.writeUint32LE(I+c|0,e,32),i.writeUint32LE(C+u|0,e,36),i.writeUint32LE(D+l|0,e,40),i.writeUint32LE(P+h|0,e,44),i.writeUint32LE(k+d|0,e,48),i.writeUint32LE(A+f|0,e,52),i.writeUint32LE(O+p|0,e,56),i.writeUint32LE(x+g|0,e,60)}(u,a,e);for(var h=l;h<l+64&&h<r.length;h++)s[h]=r[h]^u[h-l];(function(e,t,r){for(var i=1;r--;)i=i+(255&e[t])|0,e[t]=255&i,i>>>=8,t++;if(i>0)throw Error("ChaCha: counter overflow")})(a,0,c)}return n.wipe(u),0===o&&n.wipe(a),s}t.streamXOR=s,t.stream=function(e,t,r,i){return void 0===i&&(i=0),n.wipe(r),s(e,t,r,r,i)}},76901:function(e,t){"use strict";function r(e,t){if(e.length!==t.length)return 0;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return 1&r-1>>>8}Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t,r){return~(e-1)&t|e-1&r},t.lessOrEqual=function(e,t){return(0|e)-(0|t)-1>>>31&1},t.compare=r,t.equal=function(e,t){return 0!==e.length&&0!==t.length&&0!==r(e,t)}},67679:function(e,t,r){"use strict";t.Xx=t._w=t.aP=t.KS=t.jQ=void 0,r(27708);let i=r(58841);function n(e){let t=new Float64Array(16);if(e)for(let r=0;r<e.length;r++)t[r]=e[r];return t}r(123),t.jQ=64,t.KS=64,t.aP=32,new Uint8Array(32)[0]=9;let s=n(),o=n([1]),a=(n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222])),c=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),u=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);function l(e,t){for(let r=0;r<16;r++)e[r]=0|t[r]}function h(e){let t=1;for(let r=0;r<16;r++){let i=e[r]+t+65535;t=Math.floor(i/65536),e[r]=i-65536*t}e[0]+=t-1+37*(t-1)}function d(e,t,r){let i=~(r-1);for(let r=0;r<16;r++){let n=i&(e[r]^t[r]);e[r]^=n,t[r]^=n}}function f(e,t){let r=n(),i=n();for(let e=0;e<16;e++)i[e]=t[e];h(i),h(i),h(i);for(let e=0;e<2;e++){r[0]=i[0]-65517;for(let e=1;e<15;e++)r[e]=i[e]-65535-(r[e-1]>>16&1),r[e-1]&=65535;r[15]=i[15]-32767-(r[14]>>16&1);let e=r[15]>>16&1;r[14]&=65535,d(i,r,1-e)}for(let t=0;t<16;t++)e[2*t]=255&i[t],e[2*t+1]=i[t]>>8}n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(e,t,r){for(let i=0;i<16;i++)e[i]=t[i]+r[i]}function g(e,t,r){for(let i=0;i<16;i++)e[i]=t[i]-r[i]}function y(e,t,r){let i,n,s=0,o=0,a=0,c=0,u=0,l=0,h=0,d=0,f=0,p=0,g=0,y=0,v=0,m=0,_=0,b=0,w=0,E=0,S=0,I=0,C=0,D=0,P=0,k=0,A=0,O=0,x=0,R=0,N=0,T=0,M=0,L=r[0],j=r[1],U=r[2],q=r[3],z=r[4],H=r[5],B=r[6],W=r[7],F=r[8],$=r[9],K=r[10],V=r[11],G=r[12],Y=r[13],Z=r[14],J=r[15];s+=(i=t[0])*L,o+=i*j,a+=i*U,c+=i*q,u+=i*z,l+=i*H,h+=i*B,d+=i*W,f+=i*F,p+=i*$,g+=i*K,y+=i*V,v+=i*G,m+=i*Y,_+=i*Z,b+=i*J,o+=(i=t[1])*L,a+=i*j,c+=i*U,u+=i*q,l+=i*z,h+=i*H,d+=i*B,f+=i*W,p+=i*F,g+=i*$,y+=i*K,v+=i*V,m+=i*G,_+=i*Y,b+=i*Z,w+=i*J,a+=(i=t[2])*L,c+=i*j,u+=i*U,l+=i*q,h+=i*z,d+=i*H,f+=i*B,p+=i*W,g+=i*F,y+=i*$,v+=i*K,m+=i*V,_+=i*G,b+=i*Y,w+=i*Z,E+=i*J,c+=(i=t[3])*L,u+=i*j,l+=i*U,h+=i*q,d+=i*z,f+=i*H,p+=i*B,g+=i*W,y+=i*F,v+=i*$,m+=i*K,_+=i*V,b+=i*G,w+=i*Y,E+=i*Z,S+=i*J,u+=(i=t[4])*L,l+=i*j,h+=i*U,d+=i*q,f+=i*z,p+=i*H,g+=i*B,y+=i*W,v+=i*F,m+=i*$,_+=i*K,b+=i*V,w+=i*G,E+=i*Y,S+=i*Z,I+=i*J,l+=(i=t[5])*L,h+=i*j,d+=i*U,f+=i*q,p+=i*z,g+=i*H,y+=i*B,v+=i*W,m+=i*F,_+=i*$,b+=i*K,w+=i*V,E+=i*G,S+=i*Y,I+=i*Z,C+=i*J,h+=(i=t[6])*L,d+=i*j,f+=i*U,p+=i*q,g+=i*z,y+=i*H,v+=i*B,m+=i*W,_+=i*F,b+=i*$,w+=i*K,E+=i*V,S+=i*G,I+=i*Y,C+=i*Z,D+=i*J,d+=(i=t[7])*L,f+=i*j,p+=i*U,g+=i*q,y+=i*z,v+=i*H,m+=i*B,_+=i*W,b+=i*F,w+=i*$,E+=i*K,S+=i*V,I+=i*G,C+=i*Y,D+=i*Z,P+=i*J,f+=(i=t[8])*L,p+=i*j,g+=i*U,y+=i*q,v+=i*z,m+=i*H,_+=i*B,b+=i*W,w+=i*F,E+=i*$,S+=i*K,I+=i*V,C+=i*G,D+=i*Y,P+=i*Z,k+=i*J,p+=(i=t[9])*L,g+=i*j,y+=i*U,v+=i*q,m+=i*z,_+=i*H,b+=i*B,w+=i*W,E+=i*F,S+=i*$,I+=i*K,C+=i*V,D+=i*G,P+=i*Y,k+=i*Z,A+=i*J,g+=(i=t[10])*L,y+=i*j,v+=i*U,m+=i*q,_+=i*z,b+=i*H,w+=i*B,E+=i*W,S+=i*F,I+=i*$,C+=i*K,D+=i*V,P+=i*G,k+=i*Y,A+=i*Z,O+=i*J,y+=(i=t[11])*L,v+=i*j,m+=i*U,_+=i*q,b+=i*z,w+=i*H,E+=i*B,S+=i*W,I+=i*F,C+=i*$,D+=i*K,P+=i*V,k+=i*G,A+=i*Y,O+=i*Z,x+=i*J,v+=(i=t[12])*L,m+=i*j,_+=i*U,b+=i*q,w+=i*z,E+=i*H,S+=i*B,I+=i*W,C+=i*F,D+=i*$,P+=i*K,k+=i*V,A+=i*G,O+=i*Y,x+=i*Z,R+=i*J,m+=(i=t[13])*L,_+=i*j,b+=i*U,w+=i*q,E+=i*z,S+=i*H,I+=i*B,C+=i*W,D+=i*F,P+=i*$,k+=i*K,A+=i*V,O+=i*G,x+=i*Y,R+=i*Z,N+=i*J,_+=(i=t[14])*L,b+=i*j,w+=i*U,E+=i*q,S+=i*z,I+=i*H,C+=i*B,D+=i*W,P+=i*F,k+=i*$,A+=i*K,O+=i*V,x+=i*G,R+=i*Y,N+=i*Z,T+=i*J,b+=(i=t[15])*L,w+=i*j,E+=i*U,S+=i*q,I+=i*z,C+=i*H,D+=i*B,P+=i*W,k+=i*F,A+=i*$,O+=i*K,x+=i*V,R+=i*G,N+=i*Y,T+=i*Z,M+=i*J,s+=38*w,o+=38*E,a+=38*S,c+=38*I,u+=38*C,l+=38*D,h+=38*P,d+=38*k,f+=38*A,p+=38*O,g+=38*x,y+=38*R,v+=38*N,m+=38*T,_+=38*M,n=Math.floor((i=s+(n=1)+65535)/65536),s=i-65536*n,n=Math.floor((i=o+n+65535)/65536),o=i-65536*n,n=Math.floor((i=a+n+65535)/65536),a=i-65536*n,n=Math.floor((i=c+n+65535)/65536),c=i-65536*n,n=Math.floor((i=u+n+65535)/65536),u=i-65536*n,n=Math.floor((i=l+n+65535)/65536),l=i-65536*n,n=Math.floor((i=h+n+65535)/65536),h=i-65536*n,n=Math.floor((i=d+n+65535)/65536),d=i-65536*n,n=Math.floor((i=f+n+65535)/65536),f=i-65536*n,n=Math.floor((i=p+n+65535)/65536),p=i-65536*n,n=Math.floor((i=g+n+65535)/65536),g=i-65536*n,n=Math.floor((i=y+n+65535)/65536),y=i-65536*n,n=Math.floor((i=v+n+65535)/65536),v=i-65536*n,n=Math.floor((i=m+n+65535)/65536),m=i-65536*n,n=Math.floor((i=_+n+65535)/65536),_=i-65536*n,n=Math.floor((i=b+n+65535)/65536),b=i-65536*n,s+=n-1+37*(n-1),n=Math.floor((i=s+(n=1)+65535)/65536),s=i-65536*n,n=Math.floor((i=o+n+65535)/65536),o=i-65536*n,n=Math.floor((i=a+n+65535)/65536),a=i-65536*n,n=Math.floor((i=c+n+65535)/65536),c=i-65536*n,n=Math.floor((i=u+n+65535)/65536),u=i-65536*n,n=Math.floor((i=l+n+65535)/65536),l=i-65536*n,n=Math.floor((i=h+n+65535)/65536),h=i-65536*n,n=Math.floor((i=d+n+65535)/65536),d=i-65536*n,n=Math.floor((i=f+n+65535)/65536),f=i-65536*n,n=Math.floor((i=p+n+65535)/65536),p=i-65536*n,n=Math.floor((i=g+n+65535)/65536),g=i-65536*n,n=Math.floor((i=y+n+65535)/65536),y=i-65536*n,n=Math.floor((i=v+n+65535)/65536),v=i-65536*n,n=Math.floor((i=m+n+65535)/65536),m=i-65536*n,n=Math.floor((i=_+n+65535)/65536),_=i-65536*n,n=Math.floor((i=b+n+65535)/65536),b=i-65536*n,s+=n-1+37*(n-1),e[0]=s,e[1]=o,e[2]=a,e[3]=c,e[4]=u,e[5]=l,e[6]=h,e[7]=d,e[8]=f,e[9]=p,e[10]=g,e[11]=y,e[12]=v,e[13]=m,e[14]=_,e[15]=b}function v(e,t){let r=n(),i=n(),s=n(),o=n(),c=n(),u=n(),l=n(),h=n(),d=n();g(r,e[1],e[0]),g(d,t[1],t[0]),y(r,r,d),p(i,e[0],e[1]),p(d,t[0],t[1]),y(i,i,d),y(s,e[3],t[3]),y(s,s,a),y(o,e[2],t[2]),p(o,o,o),g(c,i,r),g(u,o,s),p(l,o,s),p(h,i,r),y(e[0],c,u),y(e[1],h,l),y(e[2],l,u),y(e[3],c,h)}function m(e,t,r){for(let i=0;i<4;i++)d(e[i],t[i],r)}function _(e,t){let r=n(),i=n(),s=n();(function(e,t){let r;let i=n();for(r=0;r<16;r++)i[r]=t[r];for(r=253;r>=0;r--)y(i,i,i),2!==r&&4!==r&&y(i,i,t);for(r=0;r<16;r++)e[r]=i[r]})(s,t[2]),y(r,t[0],s),y(i,t[1],s),f(e,i),e[31]^=function(e){let t=new Uint8Array(32);return f(t,e),1&t[0]}(r)<<7}function b(e,t){let r=[n(),n(),n(),n()];l(r[0],c),l(r[1],u),l(r[2],o),y(r[3],c,u),function(e,t,r){l(e[0],s),l(e[1],o),l(e[2],o),l(e[3],s);for(let i=255;i>=0;--i){let n=r[i/8|0]>>(7&i)&1;m(e,t,n),v(t,e),v(e,e),m(e,t,n)}}(e,r,t)}t._w=function(e){if(e.length!==t.aP)throw Error(`ed25519: seed must be ${t.aP} bytes`);let r=(0,i.hash)(e);r[0]&=248,r[31]&=127,r[31]|=64;let s=new Uint8Array(32),o=[n(),n(),n(),n()];b(o,r),_(s,o);let a=new Uint8Array(64);return a.set(e),a.set(s,32),{publicKey:s,secretKey:a}};let w=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function E(e,t){let r,i,n,s;for(i=63;i>=32;--i){for(r=0,n=i-32,s=i-12;n<s;++n)t[n]+=r-16*t[i]*w[n-(i-32)],r=Math.floor((t[n]+128)/256),t[n]-=256*r;t[n]+=r,t[i]=0}for(n=0,r=0;n<32;n++)t[n]+=r-(t[31]>>4)*w[n],r=t[n]>>8,t[n]&=255;for(n=0;n<32;n++)t[n]-=r*w[n];for(i=0;i<32;i++)t[i+1]+=t[i]>>8,e[i]=255&t[i]}function S(e){let t=new Float64Array(64);for(let r=0;r<64;r++)t[r]=e[r];for(let t=0;t<64;t++)e[t]=0;E(e,t)}t.Xx=function(e,t){let r=new Float64Array(64),s=[n(),n(),n(),n()],o=(0,i.hash)(e.subarray(0,32));o[0]&=248,o[31]&=127,o[31]|=64;let a=new Uint8Array(64);a.set(o.subarray(32),32);let c=new i.SHA512;c.update(a.subarray(32)),c.update(t);let u=c.digest();c.clean(),S(u),b(s,u),_(a,s),c.reset(),c.update(a.subarray(0,32)),c.update(e.subarray(32)),c.update(t);let l=c.digest();S(l);for(let e=0;e<32;e++)r[e]=u[e];for(let e=0;e<32;e++)for(let t=0;t<32;t++)r[e+t]+=l[e]*o[t];return E(a.subarray(32),r),a}},23201:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializableHash=function(e){return void 0!==e.saveState&&void 0!==e.restoreState&&void 0!==e.cleanSavedState}},90727:function(e,t,r){"use strict";var i=r(46862),n=r(123),s=function(){function e(e,t,r,n){void 0===r&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=n;var s=i.hmac(this._hash,r,t);this._hmac=new i.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(e){for(var t=new Uint8Array(e),r=0;r<t.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[r]=this._buffer[this._bufpos++];return t},e.prototype.clean=function(){this._hmac.clean(),n.wipe(this._buffer),n.wipe(this._counter),this._bufpos=0},e}();t.t=s},46862:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(23201),n=r(76901),s=r(123),o=function(){function e(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(r).clean():r.set(t);for(var n=0;n<r.length;n++)r[n]^=54;this._inner.update(r);for(var n=0;n<r.length;n++)r[n]^=106;this._outer.update(r),i.isSerializableHash(this._inner)&&i.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),s.wipe(r)}return e.prototype.reset=function(){if(!i.isSerializableHash(this._inner)||!i.isSerializableHash(this._outer))throw Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){i.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),i.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(e){return this._inner.update(e),this},e.prototype.finish=function(e){return this._finished?this._outer.finish(e):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0),this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(!i.isSerializableHash(this._inner))throw Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(e){if(!i.isSerializableHash(this._inner)||!i.isSerializableHash(this._outer))throw Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(e){if(!i.isSerializableHash(this._inner))throw Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},e}();t.HMAC=o,t.hmac=function(e,t,r){var i=new o(e,t);i.update(r);var n=i.digest();return i.clean(),n},t.equal=n.equal},15421:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||function(e,t){var r=65535&e,i=65535&t;return r*i+((e>>>16&65535)*i+r*(t>>>16&65535)<<16>>>0)|0},t.add=function(e,t){return e+t|0},t.sub=function(e,t){return e-t|0},t.rotl=function(e,t){return e<<t|e>>>32-t},t.rotr=function(e,t){return e<<32-t|e>>>t},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},71539:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(76901),n=r(123);t.DIGEST_LENGTH=16;var s=function(){function e(e){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=8191&r;var i=e[2]|e[3]<<8;this._r[1]=(r>>>13|i<<3)&8191;var n=e[4]|e[5]<<8;this._r[2]=(i>>>10|n<<6)&7939;var s=e[6]|e[7]<<8;this._r[3]=(n>>>7|s<<9)&8191;var o=e[8]|e[9]<<8;this._r[4]=(s>>>4|o<<12)&255,this._r[5]=o>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=(o>>>14|a<<2)&8191;var c=e[12]|e[13]<<8;this._r[7]=(a>>>11|c<<5)&8065;var u=e[14]|e[15]<<8;this._r[8]=(c>>>8|u<<8)&8191,this._r[9]=u>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return e.prototype._blocks=function(e,t,r){for(var i=this._fin?0:2048,n=this._h[0],s=this._h[1],o=this._h[2],a=this._h[3],c=this._h[4],u=this._h[5],l=this._h[6],h=this._h[7],d=this._h[8],f=this._h[9],p=this._r[0],g=this._r[1],y=this._r[2],v=this._r[3],m=this._r[4],_=this._r[5],b=this._r[6],w=this._r[7],E=this._r[8],S=this._r[9];r>=16;){var I,C=e[t+0]|e[t+1]<<8;n+=8191&C;var D=e[t+2]|e[t+3]<<8;s+=(C>>>13|D<<3)&8191;var P=e[t+4]|e[t+5]<<8;o+=(D>>>10|P<<6)&8191;var k=e[t+6]|e[t+7]<<8;a+=(P>>>7|k<<9)&8191;var A=e[t+8]|e[t+9]<<8;c+=(k>>>4|A<<12)&8191,u+=A>>>1&8191;var O=e[t+10]|e[t+11]<<8;l+=(A>>>14|O<<2)&8191;var x=e[t+12]|e[t+13]<<8;h+=(O>>>11|x<<5)&8191;var R=e[t+14]|e[t+15]<<8;d+=(x>>>8|R<<8)&8191,f+=R>>>5|i;var N=0;N=(I=0+n*p+5*S*s+5*E*o+5*w*a+5*b*c)>>>13,I&=8191,I+=5*_*u+5*m*l+5*v*h+5*y*d+5*g*f,N+=I>>>13,I&=8191;var T=N;T+=n*g+s*p+5*S*o+5*E*a+5*w*c,N=T>>>13,T&=8191,T+=5*b*u+5*_*l+5*m*h+5*v*d+5*y*f,N+=T>>>13,T&=8191;var M=N;M+=n*y+s*g+o*p+5*S*a+5*E*c,N=M>>>13,M&=8191,M+=5*w*u+5*b*l+5*_*h+5*m*d+5*v*f,N+=M>>>13,M&=8191;var L=N;L+=n*v+s*y+o*g+a*p+5*S*c,N=L>>>13,L&=8191,L+=5*E*u+5*w*l+5*b*h+5*_*d+5*m*f,N+=L>>>13,L&=8191;var j=N;j+=n*m+s*v+o*y+a*g+c*p,N=j>>>13,j&=8191,j+=5*S*u+5*E*l+5*w*h+5*b*d+5*_*f,N+=j>>>13,j&=8191;var U=N;U+=n*_+s*m+o*v+a*y+c*g,N=U>>>13,U&=8191,U+=u*p+5*S*l+5*E*h+5*w*d+5*b*f,N+=U>>>13,U&=8191;var q=N;q+=n*b+s*_+o*m+a*v+c*y,N=q>>>13,q&=8191,q+=u*g+l*p+5*S*h+5*E*d+5*w*f,N+=q>>>13,q&=8191;var z=N;z+=n*w+s*b+o*_+a*m+c*v,N=z>>>13,z&=8191,z+=u*y+l*g+h*p+5*S*d+5*E*f,N+=z>>>13,z&=8191;var H=N;H+=n*E+s*w+o*b+a*_+c*m,N=H>>>13,H&=8191,H+=u*v+l*y+h*g+d*p+5*S*f,N+=H>>>13,H&=8191;var B=N;B+=n*S+s*E+o*w+a*b+c*_,N=B>>>13,B&=8191,B+=u*m+l*v+h*y+d*g+f*p,N+=B>>>13,B&=8191,I=8191&(N=(N=(N<<2)+N|0)+I|0),N>>>=13,T+=N,n=I,s=T,o=M,a=L,c=j,u=U,l=q,h=z,d=H,f=B,t+=16,r-=16}this._h[0]=n,this._h[1]=s,this._h[2]=o,this._h[3]=a,this._h[4]=c,this._h[5]=u,this._h[6]=l,this._h[7]=h,this._h[8]=d,this._h[9]=f},e.prototype.finish=function(e,t){void 0===t&&(t=0);var r,i,n,s,o=new Uint16Array(10);if(this._leftover){for(s=this._leftover,this._buffer[s++]=1;s<16;s++)this._buffer[s]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(r=this._h[1]>>>13,this._h[1]&=8191,s=2;s<10;s++)this._h[s]+=r,r=this._h[s]>>>13,this._h[s]&=8191;for(this._h[0]+=5*r,r=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=r,r=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=r,o[0]=this._h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this._h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,i=(1^r)-1,s=0;s<10;s++)o[s]&=i;for(s=0,i=~i;s<10;s++)this._h[s]=this._h[s]&i|o[s];for(s=1,this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,n=this._h[0]+this._pad[0],this._h[0]=65535&n;s<8;s++)n=(this._h[s]+this._pad[s]|0)+(n>>>16)|0,this._h[s]=65535&n;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(e){var t,r=0,i=e.length;if(this._leftover){(t=16-this._leftover)>i&&(t=i);for(var n=0;n<t;n++)this._buffer[this._leftover+n]=e[r+n];if(i-=t,r+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(i>=16&&(t=i-i%16,this._blocks(e,r,t),r+=t,i-=t),i){for(var n=0;n<i;n++)this._buffer[this._leftover+n]=e[r+n];this._leftover+=i}return this},e.prototype.digest=function(){if(this._finished)throw Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},e.prototype.clean=function(){return n.wipe(this._buffer),n.wipe(this._r),n.wipe(this._h),n.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();t.Poly1305=s,t.oneTimeAuth=function(e,t){var r=new s(e);r.update(t);var i=r.digest();return r.clean(),i},t.equal=function(e,r){return e.length===t.DIGEST_LENGTH&&r.length===t.DIGEST_LENGTH&&i.equal(e,r)}},27708:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;let i=r(7477),n=r(87483),s=r(123);function o(e,r=t.defaultRandomSource){return r.randomBytes(e)}t.defaultRandomSource=new i.SystemRandomSource,t.randomBytes=o,t.randomUint32=function(e=t.defaultRandomSource){let r=o(4,e),i=(0,n.readUint32LE)(r);return(0,s.wipe)(r),i};let a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(e,r=a,i=t.defaultRandomSource){if(r.length<2)throw Error("randomString charset is too short");if(r.length>256)throw Error("randomString charset is too long");let n="",c=r.length,u=256-256%c;for(;e>0;){let t=o(Math.ceil(256*e/u),i);for(let i=0;i<t.length&&e>0;i++){let s=t[i];s<u&&(n+=r.charAt(s%c),e--)}(0,s.wipe)(t)}return n}t.randomString=c,t.randomStringForEntropy=function(e,r=a,i=t.defaultRandomSource){return c(Math.ceil(e/(Math.log(r.length)/Math.LN2)),r,i)}},69997:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRandomSource=void 0;class r{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw Error("Browser random byte generator is not available.");let t=new Uint8Array(e);for(let e=0;e<t.length;e+=65536)this._crypto.getRandomValues(t.subarray(e,e+Math.min(t.length-e,65536)));return t}}t.BrowserRandomSource=r},32022:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandomSource=void 0;let i=r(123);class n{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{let e=r(10985);e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw Error("NodeRandomSource: got fewer bytes than requested");let r=new Uint8Array(e);for(let e=0;e<r.length;e++)r[e]=t[e];return(0,i.wipe)(t),r}}t.NodeRandomSource=n},7477:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRandomSource=void 0;let i=r(69997),n=r(32022);class s{constructor(){if(this.isAvailable=!1,this.name="",this._source=new i.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new n.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw Error("System random byte generator is not available.");return this._source.randomBytes(e)}}t.SystemRandomSource=s},49012:function(e,t,r){"use strict";var i=r(87483),n=r(123);t.k=32,t.cn=64;var s=function(){function e(){this.digestLength=t.k,this.blockSize=t.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw Error("SHA256: can't update because hash was finished.");var r=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[r++],t--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(r=a(this._temp,this._state,e,r,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[r++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,r=this._bufferLength,n=t%64<56?64:128;this._buffer[r]=128;for(var s=r+1;s<n-8;s++)this._buffer[s]=0;i.writeUint32BE(t/536870912|0,this._buffer,n-8),i.writeUint32BE(t<<3,this._buffer,n-4),a(this._temp,this._state,this._buffer,0,n),this._finished=!0}for(var s=0;s<this.digestLength/4;s++)i.writeUint32BE(this._state[s],e,4*s);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){n.wipe(e.state),e.buffer&&n.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.mE=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(e,t,r,n,s){for(;s>=64;){for(var a=t[0],c=t[1],u=t[2],l=t[3],h=t[4],d=t[5],f=t[6],p=t[7],g=0;g<16;g++){var y=n+4*g;e[g]=i.readUint32BE(r,y)}for(var g=16;g<64;g++){var v=e[g-2],m=(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10,_=((v=e[g-15])>>>7|v<<25)^(v>>>18|v<<14)^v>>>3;e[g]=(m+e[g-7]|0)+(_+e[g-16]|0)}for(var g=0;g<64;g++){var m=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&d^~h&f)|0)+(p+(o[g]+e[g]|0)|0)|0,_=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&c^a&u^c&u)|0;p=f,f=d,d=h,h=l+m|0,l=u,u=c,c=a,a=m+_|0}t[0]+=a,t[1]+=c,t[2]+=u,t[3]+=l,t[4]+=h,t[5]+=d,t[6]+=f,t[7]+=p,n+=64,s-=64}return n}t.vp=function(e){var t=new s;t.update(e);var r=t.digest();return t.clean(),r}},58841:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(87483),n=r(123);t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var s=function(){function e(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._tempHi),n.wipe(this._tempLo),this.reset()},e.prototype.update=function(e,r){if(void 0===r&&(r=e.length),this._finished)throw Error("SHA512: can't update because hash was finished.");var i=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&r>0;)this._buffer[this._bufferLength++]=e[i++],r--;this._bufferLength===this.blockSize&&(a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(i=a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,e,i,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[i++],r--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,r=this._bufferLength,n=t%128<112?128:256;this._buffer[r]=128;for(var s=r+1;s<n-8;s++)this._buffer[s]=0;i.writeUint32BE(t/536870912|0,this._buffer,n-8),i.writeUint32BE(t<<3,this._buffer,n-4),a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,n),this._finished=!0}for(var s=0;s<this.digestLength/8;s++)i.writeUint32BE(this._stateHi[s],e,8*s),i.writeUint32BE(this._stateLo[s],e,8*s+4);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){n.wipe(e.stateHi),n.wipe(e.stateLo),e.buffer&&n.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function a(e,t,r,n,s,a,c){for(var u,l,h,d,f,p,g,y,v=r[0],m=r[1],_=r[2],b=r[3],w=r[4],E=r[5],S=r[6],I=r[7],C=n[0],D=n[1],P=n[2],k=n[3],A=n[4],O=n[5],x=n[6],R=n[7];c>=128;){for(var N=0;N<16;N++){var T=8*N+a;e[N]=i.readUint32BE(s,T),t[N]=i.readUint32BE(s,T+4)}for(var N=0;N<80;N++){var M=v,L=m,j=_,U=b,q=w,z=E,H=S,B=I,W=C,F=D,$=P,K=k,V=A,G=O,Y=x,Z=R;if(u=I,f=65535&(l=R),p=l>>>16,g=65535&u,y=u>>>16,u=(w>>>14|A<<18)^(w>>>18|A<<14)^(A>>>9|w<<23),f+=65535&(l=(A>>>14|w<<18)^(A>>>18|w<<14)^(w>>>9|A<<23)),p+=l>>>16,g+=65535&u,y+=u>>>16,u=w&E^~w&S,f+=65535&(l=A&O^~A&x),p+=l>>>16,g+=65535&u,y+=u>>>16,u=o[2*N],f+=65535&(l=o[2*N+1]),p+=l>>>16,g+=65535&u,y+=u>>>16,u=e[N%16],f+=65535&(l=t[N%16]),p+=l>>>16,g+=65535&u,y+=u>>>16,p+=f>>>16,g+=p>>>16,y+=g>>>16,h=65535&g|y<<16,d=65535&f|p<<16,u=h,f=65535&(l=d),p=l>>>16,g=65535&u,y=u>>>16,u=(v>>>28|C<<4)^(C>>>2|v<<30)^(C>>>7|v<<25),f+=65535&(l=(C>>>28|v<<4)^(v>>>2|C<<30)^(v>>>7|C<<25)),p+=l>>>16,g+=65535&u,y+=u>>>16,u=v&m^v&_^m&_,f+=65535&(l=C&D^C&P^D&P),p+=l>>>16,g+=65535&u,y+=u>>>16,p+=f>>>16,g+=p>>>16,y+=g>>>16,B=65535&g|y<<16,Z=65535&f|p<<16,u=U,f=65535&(l=K),p=l>>>16,g=65535&u,y=u>>>16,u=h,f+=65535&(l=d),p+=l>>>16,g+=65535&u,y+=u>>>16,p+=f>>>16,g+=p>>>16,y+=g>>>16,U=65535&g|y<<16,K=65535&f|p<<16,m=M,_=L,b=j,w=U,E=q,S=z,I=H,v=B,D=W,P=F,k=$,A=K,O=V,x=G,R=Y,C=Z,N%16==15)for(var T=0;T<16;T++)u=e[T],f=65535&(l=t[T]),p=l>>>16,g=65535&u,y=u>>>16,u=e[(T+9)%16],f+=65535&(l=t[(T+9)%16]),p+=l>>>16,g+=65535&u,y+=u>>>16,u=((h=e[(T+1)%16])>>>1|(d=t[(T+1)%16])<<31)^(h>>>8|d<<24)^h>>>7,f+=65535&(l=(d>>>1|h<<31)^(d>>>8|h<<24)^(d>>>7|h<<25)),p+=l>>>16,g+=65535&u,y+=u>>>16,u=((h=e[(T+14)%16])>>>19|(d=t[(T+14)%16])<<13)^(d>>>29|h<<3)^h>>>6,f+=65535&(l=(d>>>19|h<<13)^(h>>>29|d<<3)^(d>>>6|h<<26)),p+=l>>>16,g+=65535&u,y+=u>>>16,p+=f>>>16,g+=p>>>16,y+=g>>>16,e[T]=65535&g|y<<16,t[T]=65535&f|p<<16}u=v,f=65535&(l=C),p=l>>>16,g=65535&u,y=u>>>16,u=r[0],f+=65535&(l=n[0]),p+=l>>>16,g+=65535&u,y+=u>>>16,p+=f>>>16,g+=p>>>16,y+=g>>>16,r[0]=v=65535&g|y<<16,n[0]=C=65535&f|p<<16,u=m,f=65535&(l=D),p=l>>>16,g=65535&u,y=u>>>16,u=r[1],f+=65535&(l=n[1]),p+=l>>>16,g+=65535&u,y+=u>>>16,p+=f>>>16,g+=p>>>16,y+=g>>>16,r[1]=m=65535&g|y<<16,n[1]=D=65535&f|p<<16,u=_,f=65535&(l=P),p=l>>>16,g=65535&u,y=u>>>16,u=r[2],f+=65535&(l=n[2]),p+=l>>>16,g+=65535&u,y+=u>>>16,p+=f>>>16,g+=p>>>16,y+=g>>>16,r[2]=_=65535&g|y<<16,n[2]=P=65535&f|p<<16,u=b,f=65535&(l=k),p=l>>>16,g=65535&u,y=u>>>16,u=r[3],f+=65535&(l=n[3]),p+=l>>>16,g+=65535&u,y+=u>>>16,p+=f>>>16,g+=p>>>16,y+=g>>>16,r[3]=b=65535&g|y<<16,n[3]=k=65535&f|p<<16,u=w,f=65535&(l=A),p=l>>>16,g=65535&u,y=u>>>16,u=r[4],f+=65535&(l=n[4]),p+=l>>>16,g+=65535&u,y+=u>>>16,p+=f>>>16,g+=p>>>16,y+=g>>>16,r[4]=w=65535&g|y<<16,n[4]=A=65535&f|p<<16,u=E,f=65535&(l=O),p=l>>>16,g=65535&u,y=u>>>16,u=r[5],f+=65535&(l=n[5]),p+=l>>>16,g+=65535&u,y+=u>>>16,p+=f>>>16,g+=p>>>16,y+=g>>>16,r[5]=E=65535&g|y<<16,n[5]=O=65535&f|p<<16,u=S,f=65535&(l=x),p=l>>>16,g=65535&u,y=u>>>16,u=r[6],f+=65535&(l=n[6]),p+=l>>>16,g+=65535&u,y+=u>>>16,p+=f>>>16,g+=p>>>16,y+=g>>>16,r[6]=S=65535&g|y<<16,n[6]=x=65535&f|p<<16,u=I,f=65535&(l=R),p=l>>>16,g=65535&u,y=u>>>16,u=r[7],f+=65535&(l=n[7]),p+=l>>>16,g+=65535&u,y+=u>>>16,p+=f>>>16,g+=p>>>16,y+=g>>>16,r[7]=I=65535&g|y<<16,n[7]=R=65535&f|p<<16,a+=128,c-=128}return a}t.hash=function(e){var t=new s;t.update(e);var r=t.digest();return t.clean(),r}},123:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}},41086:function(e,t,r){"use strict";t.gi=t.Au=t.KS=t.kz=void 0;let i=r(27708),n=r(123);function s(e){let t=new Float64Array(16);if(e)for(let r=0;r<e.length;r++)t[r]=e[r];return t}t.kz=32,t.KS=32;let o=new Uint8Array(32);o[0]=9;let a=s([56129,1]);function c(e){let t=1;for(let r=0;r<16;r++){let i=e[r]+t+65535;t=Math.floor(i/65536),e[r]=i-65536*t}e[0]+=t-1+37*(t-1)}function u(e,t,r){let i=~(r-1);for(let r=0;r<16;r++){let n=i&(e[r]^t[r]);e[r]^=n,t[r]^=n}}function l(e,t,r){for(let i=0;i<16;i++)e[i]=t[i]+r[i]}function h(e,t,r){for(let i=0;i<16;i++)e[i]=t[i]-r[i]}function d(e,t,r){let i,n,s=0,o=0,a=0,c=0,u=0,l=0,h=0,d=0,f=0,p=0,g=0,y=0,v=0,m=0,_=0,b=0,w=0,E=0,S=0,I=0,C=0,D=0,P=0,k=0,A=0,O=0,x=0,R=0,N=0,T=0,M=0,L=r[0],j=r[1],U=r[2],q=r[3],z=r[4],H=r[5],B=r[6],W=r[7],F=r[8],$=r[9],K=r[10],V=r[11],G=r[12],Y=r[13],Z=r[14],J=r[15];s+=(i=t[0])*L,o+=i*j,a+=i*U,c+=i*q,u+=i*z,l+=i*H,h+=i*B,d+=i*W,f+=i*F,p+=i*$,g+=i*K,y+=i*V,v+=i*G,m+=i*Y,_+=i*Z,b+=i*J,o+=(i=t[1])*L,a+=i*j,c+=i*U,u+=i*q,l+=i*z,h+=i*H,d+=i*B,f+=i*W,p+=i*F,g+=i*$,y+=i*K,v+=i*V,m+=i*G,_+=i*Y,b+=i*Z,w+=i*J,a+=(i=t[2])*L,c+=i*j,u+=i*U,l+=i*q,h+=i*z,d+=i*H,f+=i*B,p+=i*W,g+=i*F,y+=i*$,v+=i*K,m+=i*V,_+=i*G,b+=i*Y,w+=i*Z,E+=i*J,c+=(i=t[3])*L,u+=i*j,l+=i*U,h+=i*q,d+=i*z,f+=i*H,p+=i*B,g+=i*W,y+=i*F,v+=i*$,m+=i*K,_+=i*V,b+=i*G,w+=i*Y,E+=i*Z,S+=i*J,u+=(i=t[4])*L,l+=i*j,h+=i*U,d+=i*q,f+=i*z,p+=i*H,g+=i*B,y+=i*W,v+=i*F,m+=i*$,_+=i*K,b+=i*V,w+=i*G,E+=i*Y,S+=i*Z,I+=i*J,l+=(i=t[5])*L,h+=i*j,d+=i*U,f+=i*q,p+=i*z,g+=i*H,y+=i*B,v+=i*W,m+=i*F,_+=i*$,b+=i*K,w+=i*V,E+=i*G,S+=i*Y,I+=i*Z,C+=i*J,h+=(i=t[6])*L,d+=i*j,f+=i*U,p+=i*q,g+=i*z,y+=i*H,v+=i*B,m+=i*W,_+=i*F,b+=i*$,w+=i*K,E+=i*V,S+=i*G,I+=i*Y,C+=i*Z,D+=i*J,d+=(i=t[7])*L,f+=i*j,p+=i*U,g+=i*q,y+=i*z,v+=i*H,m+=i*B,_+=i*W,b+=i*F,w+=i*$,E+=i*K,S+=i*V,I+=i*G,C+=i*Y,D+=i*Z,P+=i*J,f+=(i=t[8])*L,p+=i*j,g+=i*U,y+=i*q,v+=i*z,m+=i*H,_+=i*B,b+=i*W,w+=i*F,E+=i*$,S+=i*K,I+=i*V,C+=i*G,D+=i*Y,P+=i*Z,k+=i*J,p+=(i=t[9])*L,g+=i*j,y+=i*U,v+=i*q,m+=i*z,_+=i*H,b+=i*B,w+=i*W,E+=i*F,S+=i*$,I+=i*K,C+=i*V,D+=i*G,P+=i*Y,k+=i*Z,A+=i*J,g+=(i=t[10])*L,y+=i*j,v+=i*U,m+=i*q,_+=i*z,b+=i*H,w+=i*B,E+=i*W,S+=i*F,I+=i*$,C+=i*K,D+=i*V,P+=i*G,k+=i*Y,A+=i*Z,O+=i*J,y+=(i=t[11])*L,v+=i*j,m+=i*U,_+=i*q,b+=i*z,w+=i*H,E+=i*B,S+=i*W,I+=i*F,C+=i*$,D+=i*K,P+=i*V,k+=i*G,A+=i*Y,O+=i*Z,x+=i*J,v+=(i=t[12])*L,m+=i*j,_+=i*U,b+=i*q,w+=i*z,E+=i*H,S+=i*B,I+=i*W,C+=i*F,D+=i*$,P+=i*K,k+=i*V,A+=i*G,O+=i*Y,x+=i*Z,R+=i*J,m+=(i=t[13])*L,_+=i*j,b+=i*U,w+=i*q,E+=i*z,S+=i*H,I+=i*B,C+=i*W,D+=i*F,P+=i*$,k+=i*K,A+=i*V,O+=i*G,x+=i*Y,R+=i*Z,N+=i*J,_+=(i=t[14])*L,b+=i*j,w+=i*U,E+=i*q,S+=i*z,I+=i*H,C+=i*B,D+=i*W,P+=i*F,k+=i*$,A+=i*K,O+=i*V,x+=i*G,R+=i*Y,N+=i*Z,T+=i*J,b+=(i=t[15])*L,w+=i*j,E+=i*U,S+=i*q,I+=i*z,C+=i*H,D+=i*B,P+=i*W,k+=i*F,A+=i*$,O+=i*K,x+=i*V,R+=i*G,N+=i*Y,T+=i*Z,M+=i*J,s+=38*w,o+=38*E,a+=38*S,c+=38*I,u+=38*C,l+=38*D,h+=38*P,d+=38*k,f+=38*A,p+=38*O,g+=38*x,y+=38*R,v+=38*N,m+=38*T,_+=38*M,n=Math.floor((i=s+(n=1)+65535)/65536),s=i-65536*n,n=Math.floor((i=o+n+65535)/65536),o=i-65536*n,n=Math.floor((i=a+n+65535)/65536),a=i-65536*n,n=Math.floor((i=c+n+65535)/65536),c=i-65536*n,n=Math.floor((i=u+n+65535)/65536),u=i-65536*n,n=Math.floor((i=l+n+65535)/65536),l=i-65536*n,n=Math.floor((i=h+n+65535)/65536),h=i-65536*n,n=Math.floor((i=d+n+65535)/65536),d=i-65536*n,n=Math.floor((i=f+n+65535)/65536),f=i-65536*n,n=Math.floor((i=p+n+65535)/65536),p=i-65536*n,n=Math.floor((i=g+n+65535)/65536),g=i-65536*n,n=Math.floor((i=y+n+65535)/65536),y=i-65536*n,n=Math.floor((i=v+n+65535)/65536),v=i-65536*n,n=Math.floor((i=m+n+65535)/65536),m=i-65536*n,n=Math.floor((i=_+n+65535)/65536),_=i-65536*n,n=Math.floor((i=b+n+65535)/65536),b=i-65536*n,s+=n-1+37*(n-1),n=Math.floor((i=s+(n=1)+65535)/65536),s=i-65536*n,n=Math.floor((i=o+n+65535)/65536),o=i-65536*n,n=Math.floor((i=a+n+65535)/65536),a=i-65536*n,n=Math.floor((i=c+n+65535)/65536),c=i-65536*n,n=Math.floor((i=u+n+65535)/65536),u=i-65536*n,n=Math.floor((i=l+n+65535)/65536),l=i-65536*n,n=Math.floor((i=h+n+65535)/65536),h=i-65536*n,n=Math.floor((i=d+n+65535)/65536),d=i-65536*n,n=Math.floor((i=f+n+65535)/65536),f=i-65536*n,n=Math.floor((i=p+n+65535)/65536),p=i-65536*n,n=Math.floor((i=g+n+65535)/65536),g=i-65536*n,n=Math.floor((i=y+n+65535)/65536),y=i-65536*n,n=Math.floor((i=v+n+65535)/65536),v=i-65536*n,n=Math.floor((i=m+n+65535)/65536),m=i-65536*n,n=Math.floor((i=_+n+65535)/65536),_=i-65536*n,n=Math.floor((i=b+n+65535)/65536),b=i-65536*n,s+=n-1+37*(n-1),e[0]=s,e[1]=o,e[2]=a,e[3]=c,e[4]=u,e[5]=l,e[6]=h,e[7]=d,e[8]=f,e[9]=p,e[10]=g,e[11]=y,e[12]=v,e[13]=m,e[14]=_,e[15]=b}function f(e,t){let r=new Uint8Array(32),i=new Float64Array(80),n=s(),o=s(),f=s(),p=s(),g=s(),y=s();for(let t=0;t<31;t++)r[t]=e[t];r[31]=127&e[31]|64,r[0]&=248,function(e,t){for(let r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}(i,t);for(let e=0;e<16;e++)o[e]=i[e];n[0]=p[0]=1;for(let e=254;e>=0;--e){let t=r[e>>>3]>>>(7&e)&1;u(n,o,t),u(f,p,t),l(g,n,f),h(n,n,f),l(f,o,p),h(o,o,p),d(p,g,g),d(y,n,n),d(n,f,n),d(f,o,g),l(g,n,f),h(n,n,f),d(o,n,n),h(f,p,y),d(n,f,a),l(n,n,p),d(f,f,n),d(n,p,y),d(p,o,i),d(o,g,g),u(n,o,t),u(f,p,t)}for(let e=0;e<16;e++)i[e+16]=n[e],i[e+32]=f[e],i[e+48]=o[e],i[e+64]=p[e];let v=i.subarray(32),m=i.subarray(16);(function(e,t){let r=s();for(let e=0;e<16;e++)r[e]=t[e];for(let e=253;e>=0;e--)d(r,r,r),2!==e&&4!==e&&d(r,r,t);for(let t=0;t<16;t++)e[t]=r[t]})(v,v),d(m,m,v);let _=new Uint8Array(32);return function(e,t){let r=s(),i=s();for(let e=0;e<16;e++)i[e]=t[e];c(i),c(i),c(i);for(let e=0;e<2;e++){r[0]=i[0]-65517;for(let e=1;e<15;e++)r[e]=i[e]-65535-(r[e-1]>>16&1),r[e-1]&=65535;r[15]=i[15]-32767-(r[14]>>16&1);let e=r[15]>>16&1;r[14]&=65535,u(i,r,1-e)}for(let t=0;t<16;t++)e[2*t]=255&i[t],e[2*t+1]=i[t]>>8}(_,m),_}t.Au=function(e){let r=(0,i.randomBytes)(32,e),s=function(e){if(e.length!==t.KS)throw Error(`x25519: seed must be ${t.KS} bytes`);let r=new Uint8Array(e);return{publicKey:f(r,o),secretKey:r}}(r);return(0,n.wipe)(r),s},t.gi=function(e,r,i=!1){if(e.length!==t.kz)throw Error("X25519: incorrect secret key length");if(r.length!==t.kz)throw Error("X25519: incorrect public key length");let n=f(e,r);if(i){let e=0;for(let t=0;t<n.length;t++)e|=n[t];if(0===e)throw Error("X25519: invalid shared key")}return n}},18832:function(e,t,r){"use strict";function i(){return(null===r.g||void 0===r.g?void 0:r.g.crypto)||(null===r.g||void 0===r.g?void 0:r.g.msCrypto)||{}}function n(){let e=i();return e.subtle||e.webkitSubtle}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserCryptoAvailable=t.getSubtleCrypto=t.getBrowerCrypto=void 0,t.getBrowerCrypto=i,t.getSubtleCrypto=n,t.isBrowserCryptoAvailable=function(){return!!i()&&!!n()}},9249:function(e,t,r){"use strict";var i=r(28070);function n(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function s(){return void 0!==i&&void 0!==i.versions&&void 0!==i.versions.node}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isNode=t.isReactNative=void 0,t.isReactNative=n,t.isNode=s,t.isBrowser=function(){return!n()&&!s()}},49857:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(75700);i.__exportStar(r(18832),t),i.__exportStar(r(9249),t)},20772:function(e,t,r){"use strict";r.d(t,{q:function(){return i}});class i{}},92455:function(e,t,r){"use strict";r.r(t),r.d(t,{IEvents:function(){return i.q}});var i=r(20772)},97637:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HEARTBEAT_EVENTS=t.HEARTBEAT_INTERVAL=void 0;let i=r(72261);t.HEARTBEAT_INTERVAL=i.FIVE_SECONDS,t.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},50125:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(75700).__exportStar(r(97637),t)},86188:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeartBeat=void 0;let i=r(75700),n=r(19998),s=r(72261),o=r(67465),a=r(50125);class c extends o.IHeartBeat{constructor(e){super(e),this.events=new n.EventEmitter,this.interval=a.HEARTBEAT_INTERVAL,this.interval=(null==e?void 0:e.interval)||a.HEARTBEAT_INTERVAL}static init(e){return i.__awaiter(this,void 0,void 0,function*(){let t=new c(e);return yield t.init(),t})}init(){return i.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}initialize(){return i.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),s.toMiliseconds(this.interval))})}pulse(){this.events.emit(a.HEARTBEAT_EVENTS.pulse)}}t.HeartBeat=c},28258:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(75700);i.__exportStar(r(86188),t),i.__exportStar(r(67465),t),i.__exportStar(r(50125),t)},1539:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IHeartBeat=void 0;let i=r(92455);class n extends i.IEvents{constructor(e){super()}}t.IHeartBeat=n},67465:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(75700).__exportStar(r(1539),t)},58430:function(){},98348:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(75700);i.__exportStar(r(61682),t),i.__exportStar(r(65118),t)},61682:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},65118:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},72261:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(75700);i.__exportStar(r(70041),t),i.__exportStar(r(28191),t),i.__exportStar(r(49447),t),i.__exportStar(r(98348),t)},49447:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(75700).__exportStar(r(66423),t)},66423:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0;class r{}t.IWatch=r},83225:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;let i=r(98348);t.toMiliseconds=function(e){return e*i.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/i.ONE_THOUSAND)}},21189:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}},70041:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(75700);i.__exportStar(r(21189),t),i.__exportStar(r(83225),t)},28191:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){let t=this.get(e);if(void 0!==t.elapsed)throw Error(`Watch already stopped for label: ${e}`);let r=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:r})}get(e){let t=this.timestamps.get(e);if(void 0===t)throw Error(`No timestamp found for label: ${e}`);return t}elapsed(e){let t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=r,t.default=r},48668:function(e,t){"use strict";function r(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function i(e){let t=r(e);if(!t)throw Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=r,t.getFromWindowOrThrow=i,t.getDocumentOrThrow=function(){return i("document")},t.getDocument=function(){return r("document")},t.getNavigatorOrThrow=function(){return i("navigator")},t.getNavigator=function(){return r("navigator")},t.getLocationOrThrow=function(){return i("location")},t.getLocation=function(){return r("location")},t.getCryptoOrThrow=function(){return i("crypto")},t.getCrypto=function(){return r("crypto")},t.getLocalStorageOrThrow=function(){return i("localStorage")},t.getLocalStorage=function(){return r("localStorage")}},13555:function(e,t,r){"use strict";t.D=void 0;let i=r(48668);t.D=function(){let e,t,r;try{e=i.getDocumentOrThrow(),t=i.getLocationOrThrow()}catch(e){return null}function n(...t){let r=e.getElementsByTagName("meta");for(let e=0;e<r.length;e++){let i=r[e],n=["itemprop","property","name"].map(e=>i.getAttribute(e)).filter(e=>!!e&&t.includes(e));if(n.length&&n){let e=i.getAttribute("content");if(e)return e}}return""}let s=((r=n("name","og:site_name","og:title","twitter:title"))||(r=e.title),r),o=n("description","og:description","twitter:description","keywords");return{description:o,url:t.origin,icons:function(){let r=e.getElementsByTagName("link"),i=[];for(let e=0;e<r.length;e++){let n=r[e],s=n.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){let e=n.getAttribute("href");if(e){if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let r=t.protocol+"//"+t.host;if(0===e.indexOf("/"))r+=e;else{let i=t.pathname.split("/");i.pop(),r+=i.join("/")+"/"+e}i.push(r)}else if(0===e.indexOf("//")){let r=t.protocol+e;i.push(r)}else i.push(e)}}}return i}(),name:s}}},15582:function(e,t,r){"use strict";function i(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=function e(t){var r,i,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t))for(r=0;r<t.length;r++)t[r]&&(i=e(t[r]))&&(n&&(n+=" "),n+=i);else for(r in t)t[r]&&(n&&(n+=" "),n+=r)}return n}(e))&&(i&&(i+=" "),i+=t);return i}r.r(t),r.d(t,{clsx:function(){return i}}),t.default=i},11517:function(e){"use strict";var t="%[a-f0-9]{2}",r=RegExp("("+t+")|([^%]+?)","gi"),i=RegExp("("+t+")+","gi");e.exports=function(e){if("string"!=typeof e)throw TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=i.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var s=function(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(r)||[],i=1;i<t.length;i++)t=(e=(function e(t,r){try{return[decodeURIComponent(t.join(""))]}catch(e){}if(1===t.length)return t;r=r||1;var i=t.slice(0,r),n=t.slice(r);return Array.prototype.concat.call([],e(i),e(n))})(t,i).join("")).match(r)||[];return e}}(n[0]);s!==n[0]&&(t[n[0]]=s)}n=i.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),a=0;a<o.length;a++){var c=o[a];e=e.replace(RegExp(c,"g"),t[c])}return e}(e)}}},19998:function(e){"use strict";var t,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise(function(r,i){var n;function s(r){e.removeListener(t,o),i(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",s),r([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&(n={once:!0},"function"==typeof e.on&&g(e,"error",s,n))})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function u(e,t,r,i){if(a(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),(n=c(e))>0&&o.length>n&&!o.warned){o.warned=!0;var n,s,o,u=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=l.bind(i);return n.listener=r,i.wrapFn=n,n}function d(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):p(n,n.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=Array(t),i=0;i<t;++i)r[i]=e[i];return r}function g(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function n(s){i.once&&e.removeEventListener(t,n),r(s)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||n(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var o,a=Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else for(var u=c.length,l=p(c,u),r=0;r<u;++r)i(l[r],this,t);return!0},s.prototype.addListener=function(e,t){return u(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return u(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,i,n,s,o;if(a(t),void 0===(i=this._events)||void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,n=s;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var n,s=Object.keys(r);for(i=0;i<s.length;++i)"removeListener"!==(n=s[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},91379:function(e){"use strict";e.exports=function(e,t){for(var r={},i=Object.keys(e),n=Array.isArray(t),s=0;s<i.length;s++){var o=i[s],a=e[o];(n?-1!==t.indexOf(o):t(o,a,e))&&(r[o]=a)}return r}},88661:function(e,t,r){e.exports=r(24279)(r(27567))},24279:function(e,t,r){let i=r(21465),n=r(90957);e.exports=function(e){let t=i(e),r=n(e);return function(e,i){switch("string"==typeof e?e.toLowerCase():e){case"keccak224":return new t(1152,448,null,224,i);case"keccak256":return new t(1088,512,null,256,i);case"keccak384":return new t(832,768,null,384,i);case"keccak512":return new t(576,1024,null,512,i);case"sha3-224":return new t(1152,448,6,224,i);case"sha3-256":return new t(1088,512,6,256,i);case"sha3-384":return new t(832,768,6,384,i);case"sha3-512":return new t(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw Error("Invald algorithm: "+e)}}}},21465:function(e,t,r){var i=r(90687).Buffer;let{Transform:n}=r(6182);e.exports=e=>class t extends n{constructor(t,r,i,n,s){super(s),this._rate=t,this._capacity=r,this._delimitedSuffix=i,this._hashBitLength=n,this._options=s,this._state=new e,this._state.initialize(t,r),this._finalized=!1}_transform(e,t,r){let i=null;try{this.update(e,t)}catch(e){i=e}r(i)}_flush(e){let t=null;try{this.push(this.digest())}catch(e){t=e}e(t)}update(e,t){if(!i.isBuffer(e)&&"string"!=typeof e)throw TypeError("Data must be a string or a buffer");if(this._finalized)throw Error("Digest already called");return i.isBuffer(e)||(e=i.from(e,t)),this._state.absorb(e),this}digest(e){if(this._finalized)throw Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let t=this._state.squeeze(this._hashBitLength/8);return void 0!==e&&(t=t.toString(e)),this._resetState(),t}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let e=new t(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e}}},90957:function(e,t,r){var i=r(90687).Buffer;let{Transform:n}=r(6182);e.exports=e=>class t extends n{constructor(t,r,i,n){super(n),this._rate=t,this._capacity=r,this._delimitedSuffix=i,this._options=n,this._state=new e,this._state.initialize(t,r),this._finalized=!1}_transform(e,t,r){let i=null;try{this.update(e,t)}catch(e){i=e}r(i)}_flush(){}_read(e){this.push(this.squeeze(e))}update(e,t){if(!i.isBuffer(e)&&"string"!=typeof e)throw TypeError("Data must be a string or a buffer");if(this._finalized)throw Error("Squeeze already called");return i.isBuffer(e)||(e=i.from(e,t)),this._state.absorb(e),this}squeeze(e,t){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let r=this._state.squeeze(e);return void 0!==t&&(r=r.toString(t)),r}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let e=new t(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e}}},65006:function(e,t){let r=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];t.p1600=function(e){for(let t=0;t<24;++t){let i=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],o=e[3]^e[13]^e[23]^e[33]^e[43],a=e[4]^e[14]^e[24]^e[34]^e[44],c=e[5]^e[15]^e[25]^e[35]^e[45],u=e[6]^e[16]^e[26]^e[36]^e[46],l=e[7]^e[17]^e[27]^e[37]^e[47],h=e[8]^e[18]^e[28]^e[38]^e[48],d=e[9]^e[19]^e[29]^e[39]^e[49],f=h^(s<<1|o>>>31),p=d^(o<<1|s>>>31),g=e[0]^f,y=e[1]^p,v=e[10]^f,m=e[11]^p,_=e[20]^f,b=e[21]^p,w=e[30]^f,E=e[31]^p,S=e[40]^f,I=e[41]^p;f=i^(a<<1|c>>>31),p=n^(c<<1|a>>>31);let C=e[2]^f,D=e[3]^p,P=e[12]^f,k=e[13]^p,A=e[22]^f,O=e[23]^p,x=e[32]^f,R=e[33]^p,N=e[42]^f,T=e[43]^p;f=s^(u<<1|l>>>31),p=o^(l<<1|u>>>31);let M=e[4]^f,L=e[5]^p,j=e[14]^f,U=e[15]^p,q=e[24]^f,z=e[25]^p,H=e[34]^f,B=e[35]^p,W=e[44]^f,F=e[45]^p;f=a^(h<<1|d>>>31),p=c^(d<<1|h>>>31);let $=e[6]^f,K=e[7]^p,V=e[16]^f,G=e[17]^p,Y=e[26]^f,Z=e[27]^p,J=e[36]^f,Q=e[37]^p,X=e[46]^f,ee=e[47]^p;f=u^(i<<1|n>>>31),p=l^(n<<1|i>>>31);let et=e[8]^f,er=e[9]^p,ei=e[18]^f,en=e[19]^p,es=e[28]^f,eo=e[29]^p,ea=e[38]^f,ec=e[39]^p,eu=e[48]^f,el=e[49]^p,eh=m<<4|v>>>28,ed=v<<4|m>>>28,ef=_<<3|b>>>29,ep=b<<3|_>>>29,eg=E<<9|w>>>23,ey=w<<9|E>>>23,ev=S<<18|I>>>14,em=I<<18|S>>>14,e_=C<<1|D>>>31,eb=D<<1|C>>>31,ew=k<<12|P>>>20,eE=P<<12|k>>>20,eS=A<<10|O>>>22,eI=O<<10|A>>>22,eC=R<<13|x>>>19,eD=x<<13|R>>>19,eP=N<<2|T>>>30,ek=T<<2|N>>>30,eA=L<<30|M>>>2,eO=M<<30|L>>>2,ex=j<<6|U>>>26,eR=U<<6|j>>>26,eN=z<<11|q>>>21,eT=q<<11|z>>>21,eM=H<<15|B>>>17,eL=B<<15|H>>>17,ej=F<<29|W>>>3,eU=W<<29|F>>>3,eq=$<<28|K>>>4,ez=K<<28|$>>>4,eH=G<<23|V>>>9,eB=V<<23|G>>>9,eW=Y<<25|Z>>>7,eF=Z<<25|Y>>>7,e$=J<<21|Q>>>11,eK=Q<<21|J>>>11,eV=ee<<24|X>>>8,eG=X<<24|ee>>>8,eY=et<<27|er>>>5,eZ=er<<27|et>>>5,eJ=ei<<20|en>>>12,eQ=en<<20|ei>>>12,eX=eo<<7|es>>>25,e0=es<<7|eo>>>25,e1=ea<<8|ec>>>24,e3=ec<<8|ea>>>24,e2=eu<<14|el>>>18,e5=el<<14|eu>>>18;e[0]=g^~ew&eN,e[1]=y^~eE&eT,e[10]=eq^~eJ&ef,e[11]=ez^~eQ&ep,e[20]=e_^~ex&eW,e[21]=eb^~eR&eF,e[30]=eY^~eh&eS,e[31]=eZ^~ed&eI,e[40]=eA^~eH&eX,e[41]=eO^~eB&e0,e[2]=ew^~eN&e$,e[3]=eE^~eT&eK,e[12]=eJ^~ef&eC,e[13]=eQ^~ep&eD,e[22]=ex^~eW&e1,e[23]=eR^~eF&e3,e[32]=eh^~eS&eM,e[33]=ed^~eI&eL,e[42]=eH^~eX&eg,e[43]=eB^~e0&ey,e[4]=eN^~e$&e2,e[5]=eT^~eK&e5,e[14]=ef^~eC&ej,e[15]=ep^~eD&eU,e[24]=eW^~e1&ev,e[25]=eF^~e3&em,e[34]=eS^~eM&eV,e[35]=eI^~eL&eG,e[44]=eX^~eg&eP,e[45]=e0^~ey&ek,e[6]=e$^~e2&g,e[7]=eK^~e5&y,e[16]=eC^~ej&eq,e[17]=eD^~eU&ez,e[26]=e1^~ev&e_,e[27]=e3^~em&eb,e[36]=eM^~eV&eY,e[37]=eL^~eG&eZ,e[46]=eg^~eP&eA,e[47]=ey^~ek&eO,e[8]=e2^~g&ew,e[9]=e5^~y&eE,e[18]=ej^~eq&eJ,e[19]=eU^~ez&eQ,e[28]=ev^~e_&ex,e[29]=em^~eb&eR,e[38]=eV^~eY&eh,e[39]=eG^~eZ&ed,e[48]=eP^~eA&eH,e[49]=ek^~eO&eB,e[0]^=r[2*t],e[1]^=r[2*t+1]}}},27567:function(e,t,r){var i=r(90687).Buffer;let n=r(65006);function s(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}s.prototype.initialize=function(e,t){for(let e=0;e<50;++e)this.state[e]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1},s.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<this.count%4*8,this.count+=1,this.count===this.blockSize&&(n.p1600(this.state),this.count=0)},s.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<this.count%4*8,(128&e)!=0&&this.count===this.blockSize-1&&n.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<(this.blockSize-1)%4*8,n.p1600(this.state),this.count=0,this.squeezing=!0},s.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);let t=i.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>this.count%4*8&255,this.count+=1,this.count===this.blockSize&&(n.p1600(this.state),this.count=0);return t},s.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing},e.exports=s},93467:function(e,t,r){var i=0/0,n=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,l="object"==typeof self&&self&&self.Object===Object&&self,h=u||l||Function("return this")(),d=Object.prototype.toString,f=Math.max,p=Math.min,g=function(){return h.Date.now()};function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==d.call(t))return i;if(y(e)){var t,r="function"==typeof e.valueOf?e.valueOf():e;e=y(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var u=o.test(e);return u||a.test(e)?c(e.slice(2),u?2:8):s.test(e)?i:+e}e.exports=function(e,t,r){var i,n,s,o,a,c,u=0,l=!1,h=!1,d=!0;if("function"!=typeof e)throw TypeError("Expected a function");function m(t){var r=i,s=n;return i=n=void 0,u=t,o=e.apply(s,r)}function _(e){var r=e-c,i=e-u;return void 0===c||r>=t||r<0||h&&i>=s}function b(){var e,r,i,n=g();if(_(n))return w(n);a=setTimeout(b,(e=n-c,r=n-u,i=t-e,h?p(i,s-r):i))}function w(e){return(a=void 0,d&&i)?m(e):(i=n=void 0,o)}function E(){var e,r=g(),s=_(r);if(i=arguments,n=this,c=r,s){if(void 0===a)return u=e=c,a=setTimeout(b,t),l?m(e):o;if(h)return a=setTimeout(b,t),m(c)}return void 0===a&&(a=setTimeout(b,t)),o}return t=v(t)||0,y(r)&&(l=!!r.leading,s=(h="maxWait"in r)?f(v(r.maxWait)||0,t):s,d="trailing"in r?!!r.trailing:d),E.cancel=function(){void 0!==a&&clearTimeout(a),u=0,i=c=n=a=void 0},E.flush=function(){return void 0===a?o:w(g())},E}},8855:function(e,t,r){e=r.nmd(e);var i,n,s,o="__lodash_hash_undefined__",a="[object Arguments]",c="[object Array]",u="[object Boolean]",l="[object Date]",h="[object Error]",d="[object Function]",f="[object Map]",p="[object Number]",g="[object Object]",y="[object Promise]",v="[object RegExp]",m="[object Set]",_="[object String]",b="[object WeakMap]",w="[object ArrayBuffer]",E="[object DataView]",S=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,C={};C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C[a]=C[c]=C[w]=C[u]=C[E]=C[l]=C[h]=C[d]=C[f]=C[p]=C[g]=C[v]=C[m]=C[_]=C[b]=!1;var D="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,P="object"==typeof self&&self&&self.Object===Object&&self,k=D||P||Function("return this")(),A=t&&!t.nodeType&&t,O=A&&e&&!e.nodeType&&e,x=O&&O.exports===A,R=x&&D.process,N=function(){try{return R&&R.binding&&R.binding("util")}catch(e){}}(),T=N&&N.isTypedArray;function M(e){var t=-1,r=Array(e.size);return e.forEach(function(e,i){r[++t]=[i,e]}),r}function L(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var j=Array.prototype,U=Function.prototype,q=Object.prototype,z=k["__core-js_shared__"],H=U.toString,B=q.hasOwnProperty,W=(i=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",F=q.toString,$=RegExp("^"+H.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),K=x?k.Buffer:void 0,V=k.Symbol,G=k.Uint8Array,Y=q.propertyIsEnumerable,Z=j.splice,J=V?V.toStringTag:void 0,Q=Object.getOwnPropertySymbols,X=K?K.isBuffer:void 0,ee=(n=Object.keys,s=Object,function(e){return n(s(e))}),et=eC(k,"DataView"),er=eC(k,"Map"),ei=eC(k,"Promise"),en=eC(k,"Set"),es=eC(k,"WeakMap"),eo=eC(Object,"create"),ea=ek(et),ec=ek(er),eu=ek(ei),el=ek(en),eh=ek(es),ed=V?V.prototype:void 0,ef=ed?ed.valueOf:void 0;function ep(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function eg(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function ey(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function ev(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new ey;++t<r;)this.add(e[t])}function em(e){var t=this.__data__=new eg(e);this.size=t.size}function e_(e,t){for(var r=e.length;r--;)if(eA(e[r][0],t))return r;return -1}function eb(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":J&&J in Object(e)?function(e){var t=B.call(e,J),r=e[J];try{e[J]=void 0;var i=!0}catch(e){}var n=F.call(e);return i&&(t?e[J]=r:delete e[J]),n}(e):F.call(e)}function ew(e){return eL(e)&&eb(e)==a}function eE(e,t,r,i,n,s){var o=1&r,a=e.length,c=t.length;if(a!=c&&!(o&&c>a))return!1;var u=s.get(e);if(u&&s.get(t))return u==t;var l=-1,h=!0,d=2&r?new ev:void 0;for(s.set(e,t),s.set(t,e);++l<a;){var f=e[l],p=t[l];if(i)var g=o?i(p,f,l,t,e,s):i(f,p,l,e,t,s);if(void 0!==g){if(g)continue;h=!1;break}if(d){if(!function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}(t,function(e,t){if(!d.has(t)&&(f===e||n(f,e,r,i,s)))return d.push(t)})){h=!1;break}}else if(!(f===p||n(f,p,r,i,s))){h=!1;break}}return s.delete(e),s.delete(t),h}function eS(e){var t;return t=function(e){return null!=e&&eT(e.length)&&!eN(e)?function(e,t){var r,i=ex(e),n=!i&&eO(e),s=!i&&!n&&eR(e),o=!i&&!n&&!s&&ej(e),a=i||n||s||o,c=a?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],u=c.length;for(var l in e)B.call(e,l)&&!(a&&("length"==l||s&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||(r=null==(r=u)?9007199254740991:r)&&("number"==typeof l||I.test(l))&&l>-1&&l%1==0&&l<r))&&c.push(l);return c}(e):function(e){if(t=e&&e.constructor,e!==("function"==typeof t&&t.prototype||q))return ee(e);var t,r=[];for(var i in Object(e))B.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e)}(e),ex(e)?t:function(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}(t,eD(e))}function eI(e,t){var r,i=e.__data__;return("string"==(r=typeof t)||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?i["string"==typeof t?"string":"hash"]:i.map}function eC(e,t){var r=null==e?void 0:e[t];return!(!eM(r)||W&&W in r)&&(eN(r)?$:S).test(ek(r))?r:void 0}ep.prototype.clear=function(){this.__data__=eo?eo(null):{},this.size=0},ep.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ep.prototype.get=function(e){var t=this.__data__;if(eo){var r=t[e];return r===o?void 0:r}return B.call(t,e)?t[e]:void 0},ep.prototype.has=function(e){var t=this.__data__;return eo?void 0!==t[e]:B.call(t,e)},ep.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=eo&&void 0===t?o:t,this},eg.prototype.clear=function(){this.__data__=[],this.size=0},eg.prototype.delete=function(e){var t=this.__data__,r=e_(t,e);return!(r<0)&&(r==t.length-1?t.pop():Z.call(t,r,1),--this.size,!0)},eg.prototype.get=function(e){var t=this.__data__,r=e_(t,e);return r<0?void 0:t[r][1]},eg.prototype.has=function(e){return e_(this.__data__,e)>-1},eg.prototype.set=function(e,t){var r=this.__data__,i=e_(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this},ey.prototype.clear=function(){this.size=0,this.__data__={hash:new ep,map:new(er||eg),string:new ep}},ey.prototype.delete=function(e){var t=eI(this,e).delete(e);return this.size-=t?1:0,t},ey.prototype.get=function(e){return eI(this,e).get(e)},ey.prototype.has=function(e){return eI(this,e).has(e)},ey.prototype.set=function(e,t){var r=eI(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this},ev.prototype.add=ev.prototype.push=function(e){return this.__data__.set(e,o),this},ev.prototype.has=function(e){return this.__data__.has(e)},em.prototype.clear=function(){this.__data__=new eg,this.size=0},em.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},em.prototype.get=function(e){return this.__data__.get(e)},em.prototype.has=function(e){return this.__data__.has(e)},em.prototype.set=function(e,t){var r=this.__data__;if(r instanceof eg){var i=r.__data__;if(!er||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new ey(i)}return r.set(e,t),this.size=r.size,this};var eD=Q?function(e){return null==e?[]:function(e,t){for(var r=-1,i=null==e?0:e.length,n=0,s=[];++r<i;){var o=e[r];t(o,r,e)&&(s[n++]=o)}return s}(Q(e=Object(e)),function(t){return Y.call(e,t)})}:function(){return[]},eP=eb;function ek(e){if(null!=e){try{return H.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function eA(e,t){return e===t||e!=e&&t!=t}(et&&eP(new et(new ArrayBuffer(1)))!=E||er&&eP(new er)!=f||ei&&eP(ei.resolve())!=y||en&&eP(new en)!=m||es&&eP(new es)!=b)&&(eP=function(e){var t=eb(e),r=t==g?e.constructor:void 0,i=r?ek(r):"";if(i)switch(i){case ea:return E;case ec:return f;case eu:return y;case el:return m;case eh:return b}return t});var eO=ew(function(){return arguments}())?ew:function(e){return eL(e)&&B.call(e,"callee")&&!Y.call(e,"callee")},ex=Array.isArray,eR=X||function(){return!1};function eN(e){if(!eM(e))return!1;var t=eb(e);return t==d||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function eT(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function eM(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eL(e){return null!=e&&"object"==typeof e}var ej=T?function(e){return T(e)}:function(e){return eL(e)&&eT(e.length)&&!!C[eb(e)]};e.exports=function(e,t){return function e(t,r,i,n,s){return t===r||(null!=t&&null!=r&&(eL(t)||eL(r))?function(e,t,r,i,n,s){var o=ex(e),d=ex(t),y=o?c:eP(e),b=d?c:eP(t);y=y==a?g:y,b=b==a?g:b;var S=y==g,I=b==g,C=y==b;if(C&&eR(e)){if(!eR(t))return!1;o=!0,S=!1}if(C&&!S)return s||(s=new em),o||ej(e)?eE(e,t,r,i,n,s):function(e,t,r,i,n,s,o){switch(r){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case w:if(e.byteLength!=t.byteLength||!s(new G(e),new G(t)))break;return!0;case u:case l:case p:return eA(+e,+t);case h:return e.name==t.name&&e.message==t.message;case v:case _:return e==t+"";case f:var a=M;case m:var c=1&i;if(a||(a=L),e.size!=t.size&&!c)break;var d=o.get(e);if(d)return d==t;i|=2,o.set(e,t);var g=eE(a(e),a(t),i,n,s,o);return o.delete(e),g;case"[object Symbol]":if(ef)return ef.call(e)==ef.call(t)}return!1}(e,t,y,r,i,n,s);if(!(1&r)){var D=S&&B.call(e,"__wrapped__"),P=I&&B.call(t,"__wrapped__");if(D||P){var k=D?e.value():e,A=P?t.value():t;return s||(s=new em),n(k,A,r,i,s)}}return!!C&&(s||(s=new em),function(e,t,r,i,n,s){var o=1&r,a=eS(e),c=a.length;if(c!=eS(t).length&&!o)return!1;for(var u=c;u--;){var l=a[u];if(!(o?l in t:B.call(t,l)))return!1}var h=s.get(e);if(h&&s.get(t))return h==t;var d=!0;s.set(e,t),s.set(t,e);for(var f=o;++u<c;){var p=e[l=a[u]],g=t[l];if(i)var y=o?i(g,p,l,t,e,s):i(p,g,l,e,t,s);if(!(void 0===y?p===g||n(p,g,r,i,s):y)){d=!1;break}f||(f="constructor"==l)}if(d&&!f){var v=e.constructor,m=t.constructor;v!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof m&&m instanceof m)&&(d=!1)}return s.delete(e),s.delete(t),d}(e,t,r,i,n,s))}(t,r,i,n,e,s):t!=t&&r!=r)}(e,t)}},57136:function(e){"use strict";let t=self.fetch.bind(self);e.exports=t,e.exports.default=e.exports},62154:function(e,t,r){"use strict";r.r(t),r.d(t,{Component:function(){return C},Fragment:function(){return I},cloneElement:function(){return q},createContext:function(){return z},createElement:function(){return w},createRef:function(){return S},h:function(){return w},hydrate:function(){return U},isValidElement:function(){return o},options:function(){return n},render:function(){return j},toChildArray:function(){return function e(t,r){return r=r||[],null==t||"boolean"==typeof t||(m(t)?t.some(function(t){e(t,r)}):r.push(t)),r}}});var i,n,s,o,a,c,u,l,h,d,f,p,g={},y=[],v=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,m=Array.isArray;function _(e,t){for(var r in t)e[r]=t[r];return e}function b(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function w(e,t,r){var n,s,o,a={};for(o in t)"key"==o?n=t[o]:"ref"==o?s=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?i.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===a[o]&&(a[o]=e.defaultProps[o]);return E(e,a,n,s,null)}function E(e,t,r,i,o){var a={type:e,props:t,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==o?++s:o,__i:-1,__u:0};return null==o&&null!=n.vnode&&n.vnode(a),a}function S(){return{current:null}}function I(e){return e.children}function C(e,t){this.props=e,this.context=t}function D(e,t){if(null==t)return e.__?D(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?D(e):null}function P(e){(!e.__d&&(e.__d=!0)&&a.push(e)&&!k.__r++||c!==n.debounceRendering)&&((c=n.debounceRendering)||u)(k)}function k(){var e,t,r,i,s,o,c,u;for(a.sort(l);e=a.shift();)e.__d&&(t=a.length,i=void 0,o=(s=(r=e).__v).__e,c=[],u=[],r.__P&&((i=_({},s)).__v=s.__v+1,n.vnode&&n.vnode(i),N(r.__P,i,s,r.__n,r.__P.namespaceURI,32&s.__u?[o]:null,c,null==o?D(s):o,!!(32&s.__u),u),i.__v=s.__v,i.__.__k[i.__i]=i,T(c,i,u),i.__e!=o&&function e(t){var r,i;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if(null!=(i=t.__k[r])&&null!=i.__e){t.__e=t.__c.base=i.__e;break}return e(t)}}(i)),a.length>t&&a.sort(l));k.__r=0}function A(e,t,r,i,s,o,a,c,u,l,h){var d,f,p,v,_,w=i&&i.__k||y,S=t.length;for(r.__d=u,function(e,t,r){var i,s,o,a,c,u=t.length,l=r.length,h=l,d=0;for(e.__k=[],i=0;i<u;i++)null!=(s=t[i])&&"boolean"!=typeof s&&"function"!=typeof s?(a=i+d,(s=e.__k[i]="string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?E(null,s,null,null,null):m(s)?E(I,{children:s},null,null,null):void 0===s.constructor&&s.__b>0?E(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,o=null,-1!==(c=s.__i=function(e,t,r,i){var n=e.key,s=e.type,o=r-1,a=r+1,c=t[r];if(null===c||c&&n==c.key&&s===c.type&&0==(131072&c.__u))return r;if(i>(null!=c&&0==(131072&c.__u)?1:0))for(;o>=0||a<t.length;){if(o>=0){if((c=t[o])&&0==(131072&c.__u)&&n==c.key&&s===c.type)return o;o--}if(a<t.length){if((c=t[a])&&0==(131072&c.__u)&&n==c.key&&s===c.type)return a;a++}}return -1}(s,r,a,h))&&(h--,(o=r[c])&&(o.__u|=131072)),null==o||null===o.__v?(-1==c&&d--,"function"!=typeof s.type&&(s.__u|=65536)):c!==a&&(c==a-1?d--:c==a+1?d++:(c>a?d--:d++,s.__u|=65536))):s=e.__k[i]=null;if(h)for(i=0;i<l;i++)null!=(o=r[i])&&0==(131072&o.__u)&&(o.__e==e.__d&&(e.__d=D(o)),function e(t,r,i){var s,o;if(n.unmount&&n.unmount(t),(s=t.ref)&&(s.current&&s.current!==t.__e||M(s,null,r)),null!=(s=t.__c)){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(e){n.__e(e,r)}s.base=s.__P=null}if(s=t.__k)for(o=0;o<s.length;o++)s[o]&&e(s[o],r,i||"function"!=typeof t.type);i||b(t.__e),t.__c=t.__=t.__e=t.__d=void 0}(o,o))}(r,t,w),u=r.__d,d=0;d<S;d++)null!=(p=r.__k[d])&&(f=-1===p.__i?g:w[p.__i]||g,p.__i=d,N(e,p,f,s,o,a,c,u,l,h),v=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&M(f.ref,null,p),h.push(p.ref,p.__c||v,p)),null==_&&null!=v&&(_=v),65536&p.__u||f.__k===p.__k?u=function e(t,r,i){var n,s;if("function"==typeof t.type){for(n=t.__k,s=0;n&&s<n.length;s++)n[s]&&(n[s].__=t,r=e(n[s],r,i));return r}t.__e!=r&&(r&&t.type&&!i.contains(r)&&(r=D(t)),i.insertBefore(t.__e,r||null),r=t.__e);do r=r&&r.nextSibling;while(null!=r&&8===r.nodeType);return r}(p,u,e):"function"==typeof p.type&&void 0!==p.__d?u=p.__d:v&&(u=v.nextSibling),p.__d=void 0,p.__u&=-196609);r.__d=u,r.__e=_}function O(e,t,r){"-"===t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||v.test(t)?r:r+"px"}function x(e,t,r,i,n){var s;e:if("style"===t){if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)r&&t in r||O(e.style,t,"");if(r)for(t in r)i&&r[t]===i[t]||O(e.style,t,r[t])}}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase() in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=r,r?i?r.u=i.u:(r.u=h,e.addEventListener(t,s?f:d,s)):e.removeEventListener(t,s?f:d,s);else{if("http://www.w3.org/2000/svg"==n)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==r?"":r))}}function R(e){return function(t){if(this.l){var r=this.l[t.type+e];if(null==t.t)t.t=h++;else if(t.t<r.u)return;return r(n.event?n.event(t):t)}}}function N(e,t,r,s,o,a,c,u,l,h){var d,f,p,y,v,w,E,S,P,k,O,R,N,T,M,j,U=t.type;if(void 0!==t.constructor)return null;128&r.__u&&(l=!!(32&r.__u),a=[u=t.__e=r.__e]),(d=n.__b)&&d(t);e:if("function"==typeof U)try{if(S=t.props,P="prototype"in U&&U.prototype.render,k=(d=U.contextType)&&s[d.__c],O=d?k?k.props.value:d.__:s,r.__c?E=(f=t.__c=r.__c).__=f.__E:(P?t.__c=f=new U(S,O):(t.__c=f=new C(S,O),f.constructor=U,f.render=L),k&&k.sub(f),f.props=S,f.state||(f.state={}),f.context=O,f.__n=s,p=f.__d=!0,f.__h=[],f._sb=[]),P&&null==f.__s&&(f.__s=f.state),P&&null!=U.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=_({},f.__s)),_(f.__s,U.getDerivedStateFromProps(S,f.__s))),y=f.props,v=f.state,f.__v=t,p)P&&null==U.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),P&&null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(P&&null==U.getDerivedStateFromProps&&S!==y&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(S,O),!f.__e&&(null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(S,f.__s,O)||t.__v===r.__v)){for(t.__v!==r.__v&&(f.props=S,f.state=f.__s,f.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(e){e&&(e.__=t)}),R=0;R<f._sb.length;R++)f.__h.push(f._sb[R]);f._sb=[],f.__h.length&&c.push(f);break e}null!=f.componentWillUpdate&&f.componentWillUpdate(S,f.__s,O),P&&null!=f.componentDidUpdate&&f.__h.push(function(){f.componentDidUpdate(y,v,w)})}if(f.context=O,f.props=S,f.__P=e,f.__e=!1,N=n.__r,T=0,P){for(f.state=f.__s,f.__d=!1,N&&N(t),d=f.render(f.props,f.state,f.context),M=0;M<f._sb.length;M++)f.__h.push(f._sb[M]);f._sb=[]}else do f.__d=!1,N&&N(t),d=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++T<25);f.state=f.__s,null!=f.getChildContext&&(s=_(_({},s),f.getChildContext())),P&&!p&&null!=f.getSnapshotBeforeUpdate&&(w=f.getSnapshotBeforeUpdate(y,v)),A(e,m(j=null!=d&&d.type===I&&null==d.key?d.props.children:d)?j:[j],t,r,s,o,a,c,u,l,h),f.base=t.__e,t.__u&=-161,f.__h.length&&c.push(f),E&&(f.__E=f.__=null)}catch(e){if(t.__v=null,l||null!=a){for(t.__u|=l?160:32;u&&8===u.nodeType&&u.nextSibling;)u=u.nextSibling;a[a.indexOf(u)]=null,t.__e=u}else t.__e=r.__e,t.__k=r.__k;n.__e(e,t,r)}else null==a&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=function(e,t,r,s,o,a,c,u,l){var h,d,f,p,y,v,_,w=r.props,E=t.props,S=t.type;if("svg"===S?o="http://www.w3.org/2000/svg":"math"===S?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),null!=a){for(h=0;h<a.length;h++)if((y=a[h])&&"setAttribute"in y==!!S&&(S?y.localName===S:3===y.nodeType)){e=y,a[h]=null;break}}if(null==e){if(null===S)return document.createTextNode(E);e=document.createElementNS(o,S,E.is&&E),u&&(n.__m&&n.__m(t,a),u=!1),a=null}if(null===S)w===E||u&&e.data===E||(e.data=E);else{if(a=a&&i.call(e.childNodes),w=r.props||g,!u&&null!=a)for(w={},h=0;h<e.attributes.length;h++)w[(y=e.attributes[h]).name]=y.value;for(h in w)if(y=w[h],"children"==h);else if("dangerouslySetInnerHTML"==h)f=y;else if(!(h in E)){if("value"==h&&"defaultValue"in E||"checked"==h&&"defaultChecked"in E)continue;x(e,h,null,y,o)}for(h in E)y=E[h],"children"==h?p=y:"dangerouslySetInnerHTML"==h?d=y:"value"==h?v=y:"checked"==h?_=y:u&&"function"!=typeof y||w[h]===y||x(e,h,y,w[h],o);if(d)u||f&&(d.__html===f.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(f&&(e.innerHTML=""),A(e,m(p)?p:[p],t,r,s,"foreignObject"===S?"http://www.w3.org/1999/xhtml":o,a,c,a?a[0]:r.__k&&D(r,0),u,l),null!=a)for(h=a.length;h--;)b(a[h]);u||(h="value","progress"===S&&null==v?e.removeAttribute("value"):void 0===v||v===e[h]&&("progress"!==S||v)&&("option"!==S||v===w[h])||x(e,h,v,w[h],o),h="checked",void 0!==_&&_!==e[h]&&x(e,h,_,w[h],o))}return e}(r.__e,t,r,s,o,a,c,l,h);(d=n.diffed)&&d(t)}function T(e,t,r){t.__d=void 0;for(var i=0;i<r.length;i++)M(r[i],r[++i],r[++i]);n.__c&&n.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){n.__e(e,t.__v)}})}function M(e,t,r){try{if("function"==typeof e){var i="function"==typeof e.__u;i&&e.__u(),i&&null==t||(e.__u=e(t))}else e.current=t}catch(e){n.__e(e,r)}}function L(e,t,r){return this.constructor(e,r)}function j(e,t,r){var s,o,a,c;n.__&&n.__(e,t),o=(s="function"==typeof r)?null:r&&r.__k||t.__k,a=[],c=[],N(t,e=(!s&&r||t).__k=w(I,null,[e]),o||g,g,t.namespaceURI,!s&&r?[r]:o?null:t.firstChild?i.call(t.childNodes):null,a,!s&&r?r:o?o.__e:t.firstChild,s,c),T(a,e,c)}function U(e,t){j(e,t,U)}function q(e,t,r){var n,s,o,a,c=_({},e.props);for(o in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)"key"==o?n=t[o]:"ref"==o?s=t[o]:c[o]=void 0===t[o]&&void 0!==a?a[o]:t[o];return arguments.length>2&&(c.children=arguments.length>3?i.call(arguments,2):r),E(e.type,c,n||e.key,s||e.ref,null)}function z(e,t){var r={__c:t="__cC"+p++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var r,i;return this.getChildContext||(r=[],(i={})[t]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&r.some(function(e){e.__e=!0,P(e)})},this.sub=function(e){r.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){r&&r.splice(r.indexOf(e),1),t&&t.call(e)}}),e.children}};return r.Provider.__=r.Consumer.contextType=r}i=y.slice,n={__e:function(e,t,r,i){for(var n,s,o;t=t.__;)if((n=t.__c)&&!n.__)try{if((s=n.constructor)&&null!=s.getDerivedStateFromError&&(n.setState(s.getDerivedStateFromError(e)),o=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e,i||{}),o=n.__d),o)return n.__E=n}catch(t){e=t}throw e}},s=0,o=function(e){return null!=e&&null==e.constructor},C.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=_({},this.state),"function"==typeof e&&(e=e(_({},r),this.props)),e&&_(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),P(this))},C.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),P(this))},C.prototype.render=I,a=[],u="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,l=function(e,t){return e.__v.__b-t.__v.__b},k.__r=0,h=0,d=R(!1),f=R(!0),p=0},38641:function(e,t,r){"use strict";r.r(t),r.d(t,{useCallback:function(){return C},useContext:function(){return D},useDebugValue:function(){return P},useEffect:function(){return b},useErrorBoundary:function(){return k},useId:function(){return A},useImperativeHandle:function(){return S},useLayoutEffect:function(){return w},useMemo:function(){return I},useReducer:function(){return _},useRef:function(){return E},useState:function(){return m}});var i,n,s,o,a=r(62154),c=0,u=[],l=a.options,h=l.__b,d=l.__r,f=l.diffed,p=l.__c,g=l.unmount,y=l.__;function v(e,t){l.__h&&l.__h(n,e,c||t),c=0;var r=n.__H||(n.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function m(e){return c=1,_(M,e)}function _(e,t,r){var s=v(i++,2);if(s.t=e,!s.__c&&(s.__=[r?r(t):M(void 0,t),function(e){var t=s.__N?s.__N[0]:s.__[0],r=s.t(t,e);t!==r&&(s.__N=[r,s.__[1]],s.__c.setState({}))}],s.__c=n,!n.u)){var o=function(e,t,r){if(!s.__c.__H)return!0;var i=s.__c.__H.__.filter(function(e){return!!e.__c});if(i.every(function(e){return!e.__N}))return!a||a.call(this,e,t,r);var n=!1;return i.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(n=!0)}}),!(!n&&s.__c.props===e)&&(!a||a.call(this,e,t,r))};n.u=!0;var a=n.shouldComponentUpdate,c=n.componentWillUpdate;n.componentWillUpdate=function(e,t,r){if(this.__e){var i=a;a=void 0,o(e,t,r),a=i}c&&c.call(this,e,t,r)},n.shouldComponentUpdate=o}return s.__N||s.__}function b(e,t){var r=v(i++,3);!l.__s&&T(r.__H,t)&&(r.__=e,r.i=t,n.__H.__h.push(r))}function w(e,t){var r=v(i++,4);!l.__s&&T(r.__H,t)&&(r.__=e,r.i=t,n.__h.push(r))}function E(e){return c=5,I(function(){return{current:e}},[])}function S(e,t,r){c=6,w(function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},null==r?r:r.concat(e))}function I(e,t){var r=v(i++,7);return T(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function C(e,t){return c=8,I(function(){return e},t)}function D(e){var t=n.context[e.__c],r=v(i++,9);return r.c=e,t?(null==r.__&&(r.__=!0,t.sub(n)),t.props.value):e.__}function P(e,t){l.useDebugValue&&l.useDebugValue(t?t(e):e)}function k(e){var t=v(i++,10),r=m();return t.__=e,n.componentDidCatch||(n.componentDidCatch=function(e,i){t.__&&t.__(e,i),r[1](e)}),[r[0],function(){r[1](void 0)}]}function A(){var e=v(i++,11);if(!e.__){for(var t=n.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var r=t.__m||(t.__m=[0,0]);e.__="P"+r[0]+"-"+r[1]++}return e.__}function O(){for(var e;e=u.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(R),e.__H.__h.forEach(N),e.__H.__h=[]}catch(t){e.__H.__h=[],l.__e(t,e.__v)}}l.__b=function(e){n=null,h&&h(e)},l.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),y&&y(e,t)},l.__r=function(e){d&&d(e),i=0;var t=(n=e.__c).__H;t&&(s===n?(t.__h=[],n.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0})):(t.__h.forEach(R),t.__h.forEach(N),t.__h=[],i=0)),s=n},l.diffed=function(e){f&&f(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==u.push(t)&&o===l.requestAnimationFrame||((o=l.requestAnimationFrame)||function(e){var t,r=function(){clearTimeout(i),x&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(r,100);x&&(t=requestAnimationFrame(r))})(O)),t.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.i=void 0})),s=n=null},l.__c=function(e,t){t.some(function(e){try{e.__h.forEach(R),e.__h=e.__h.filter(function(e){return!e.__||N(e)})}catch(r){t.some(function(e){e.__h&&(e.__h=[])}),t=[],l.__e(r,e.__v)}}),p&&p(e,t)},l.unmount=function(e){g&&g(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(e){try{R(e)}catch(e){t=e}}),r.__H=void 0,t&&l.__e(t,r.__v))};var x="function"==typeof requestAnimationFrame;function R(e){var t=n,r=e.__c;"function"==typeof r&&(e.__c=void 0,r()),n=t}function N(e){var t=n;e.__c=e.__(),n=t}function T(e,t){return!e||e.length!==t.length||t.some(function(t,r){return t!==e[r]})}function M(e,t){return"function"==typeof t?t(e):t}},22995:function(e,t,r){"use strict";let i=r(82628),n=r(11517),s=r(32994),o=r(91379),a=e=>null==e,c=Symbol("encodeFragmentIdentifier");function u(e){if("string"!=typeof e||1!==e.length)throw TypeError("arrayFormatSeparator must be single character string")}function l(e,t){return t.encode?t.strict?i(e):encodeURIComponent(e):e}function h(e,t){return t.decode?n(e):e}function d(e){let t=e.indexOf("#");return -1!==t&&(e=e.slice(0,t)),e}function f(e){let t=(e=d(e)).indexOf("?");return -1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function g(e,t){u((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);let r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,i)=>{if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t){i[e]=r;return}void 0===i[e]&&(i[e]={}),i[e][t[1]]=r};case"bracket":return(e,r,i)=>{if(t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),!t){i[e]=r;return}if(void 0===i[e]){i[e]=[r];return}i[e]=[].concat(i[e],r)};case"colon-list-separator":return(e,r,i)=>{if(t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),!t){i[e]=r;return}if(void 0===i[e]){i[e]=[r];return}i[e]=[].concat(i[e],r)};case"comma":case"separator":return(t,r,i)=>{let n="string"==typeof r&&r.includes(e.arrayFormatSeparator),s="string"==typeof r&&!n&&h(r,e).includes(e.arrayFormatSeparator);r=s?h(r,e):r;let o=n||s?r.split(e.arrayFormatSeparator).map(t=>h(t,e)):null===r?r:h(r,e);i[t]=o};case"bracket-separator":return(t,r,i)=>{let n=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!n){i[t]=r?h(r,e):r;return}let s=null===r?[]:r.split(e.arrayFormatSeparator).map(t=>h(t,e));if(void 0===i[t]){i[t]=s;return}i[t]=[].concat(i[t],s)};default:return(e,t,r)=>{if(void 0===r[e]){r[e]=t;return}r[e]=[].concat(r[e],t)}}}(t),i=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return i;for(let n of e.split("&")){if(""===n)continue;let[e,o]=s(t.decode?n.replace(/\+/g," "):n,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?o:h(o,t),r(h(e,t),o,i)}for(let e of Object.keys(i)){let r=i[e];if("object"==typeof r&&null!==r)for(let e of Object.keys(r))r[e]=p(r[e],t);else i[e]=p(r,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce((e,t)=>{let r=i[t];return r&&"object"==typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(r):e[t]=r,e},Object.create(null))}t.extract=f,t.parse=g,t.stringify=(e,t)=>{if(!e)return"";u((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);let r=r=>t.skipNull&&a(e[r])||t.skipEmptyString&&""===e[r],i=function(e){switch(e.arrayFormat){case"index":return t=>(r,i)=>{let n=r.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,[l(t,e),"[",n,"]"].join("")]:[...r,[l(t,e),"[",l(n,e),"]=",l(i,e)].join("")]};case"bracket":return t=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,[l(t,e),"[]"].join("")]:[...r,[l(t,e),"[]=",l(i,e)].join("")];case"colon-list-separator":return t=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,[l(t,e),":list="].join("")]:[...r,[l(t,e),":list=",l(i,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(i,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?i:(n=null===n?"":n,0===i.length)?[[l(r,e),t,l(n,e)].join("")]:[[i,l(n,e)].join(e.arrayFormatSeparator)]}default:return t=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,l(t,e)]:[...r,[l(t,e),"=",l(i,e)].join("")]}}(t),n={};for(let t of Object.keys(e))r(t)||(n[t]=e[t]);let s=Object.keys(n);return!1!==t.sort&&s.sort(t.sort),s.map(r=>{let n=e[r];return void 0===n?"":null===n?l(r,t):Array.isArray(n)?0===n.length&&"bracket-separator"===t.arrayFormat?l(r,t)+"[]":n.reduce(i(r),[]).join("&"):l(r,t)+"="+l(n,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[r,i]=s(e,"#");return Object.assign({url:r.split("?")[0]||"",query:g(f(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:h(i,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0,[c]:!0},r);let i=d(e.url).split("?")[0]||"",n=t.extract(e.url),s=Object.assign(t.parse(n,{sort:!1}),e.query),o=t.stringify(s,r);o&&(o=`?${o}`);let a=function(e){let t="",r=e.indexOf("#");return -1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(a=`#${r[c]?l(e.fragmentIdentifier,r):e.fragmentIdentifier}`),`${i}${o}${a}`},t.pick=(e,r,i)=>{i=Object.assign({parseFragmentIdentifier:!0,[c]:!1},i);let{url:n,query:s,fragmentIdentifier:a}=t.parseUrl(e,i);return t.stringifyUrl({url:n,query:o(s,r),fragmentIdentifier:a},i)},t.exclude=(e,r,i)=>{let n=Array.isArray(r)?e=>!r.includes(e):(e,t)=>!r(e,t);return t.pick(e,n,i)}},96237:function(e){"use strict";function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,r,i){var n=i&&i.stringify||t;if("object"==typeof e&&null!==e){var s=r.length+1;if(1===s)return e;var o=Array(s);o[0]=n(e);for(var a=1;a<s;a++)o[a]=n(r[a]);return o.join(" ")}if("string"!=typeof e)return e;var c=r.length;if(0===c)return e;for(var u="",l=0,h=-1,d=e&&e.length||0,f=0;f<d;){if(37===e.charCodeAt(f)&&f+1<d){switch(h=h>-1?h:0,e.charCodeAt(f+1)){case 100:case 102:if(l>=c||null==r[l])break;h<f&&(u+=e.slice(h,f)),u+=Number(r[l]),h=f+2,f++;break;case 105:if(l>=c||null==r[l])break;h<f&&(u+=e.slice(h,f)),u+=Math.floor(Number(r[l])),h=f+2,f++;break;case 79:case 111:case 106:if(l>=c||void 0===r[l])break;h<f&&(u+=e.slice(h,f));var p=typeof r[l];if("string"===p){u+="'"+r[l]+"'",h=f+2,f++;break}if("function"===p){u+=r[l].name||"<anonymous>",h=f+2,f++;break}u+=n(r[l]),h=f+2,f++;break;case 115:if(l>=c)break;h<f&&(u+=e.slice(h,f)),u+=String(r[l]),h=f+2,f++;break;case 37:h<f&&(u+=e.slice(h,f)),u+="%",h=f+2,f++,l--}++l}++f}return -1===h?e:(h<d&&(u+=e.slice(h)),u)}},19710:function(e){"use strict";var t={};function r(e,r,i){i||(i=Error);var n=function(e){function t(t,i,n){return e.call(this,"string"==typeof r?r:r(t,i,n))||this}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e,t}(i);n.prototype.name=i.name,n.prototype.code=e,t[e]=n}function i(e,t){if(!Array.isArray(e))return"of ".concat(t," ").concat(String(e));var r=e.length;return(e=e.map(function(e){return String(e)}),r>2)?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}r("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(e,t,r){if("string"==typeof t&&(n="not ",t.substr(0,n.length)===n)?(c="must not be",t=t.replace(/^not /,"")):c="must be",s=" argument",(void 0===o||o>e.length)&&(o=e.length),e.substring(o-s.length,o)===s)u="The ".concat(e," ").concat(c," ").concat(i(t,"type"));else{var n,s,o,a,c,u,l=("number"!=typeof a&&(a=0),a+1>e.length||-1===e.indexOf(".",a))?"argument":"property";u='The "'.concat(e,'" ').concat(l," ").concat(c," ").concat(i(t,"type"))}return u+". Received type ".concat(typeof r)},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},71343:function(e,t,r){"use strict";var i=r(28070),n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var s=r(3770),o=r(1421);r(5393)(l,s);for(var a=n(o.prototype),c=0;c<a.length;c++){var u=a[c];l.prototype[u]||(l.prototype[u]=o.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);s.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||i.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},53691:function(e,t,r){"use strict";e.exports=n;var i=r(24025);function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}r(5393)(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},3770:function(e,t,r){"use strict";var i,n,s,o,a,c=r(28070);e.exports=C,C.ReadableState=I,r(19998).EventEmitter;var u=function(e,t){return e.listeners(t).length},l=r(79742),h=r(90687).Buffer,d=(void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},f=r(82880);n=f&&f.debuglog?f.debuglog("stream"):function(){};var p=r(58259),g=r(81777),y=r(69520).getHighWaterMark,v=r(19710).q,m=v.ERR_INVALID_ARG_TYPE,_=v.ERR_STREAM_PUSH_AFTER_EOF,b=v.ERR_METHOD_NOT_IMPLEMENTED,w=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(5393)(C,l);var E=g.errorOrDestroy,S=["error","close","destroy","pause","resume"];function I(e,t,n){i=i||r(71343),e=e||{},"boolean"!=typeof n&&(n=t instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=y(this,e,"readableHighWaterMark",n),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s||(s=r(57112).s),this.decoder=new s(e.encoding),this.encoding=e.encoding)}function C(e){if(i=i||r(71343),!(this instanceof C))return new C(e);var t=this instanceof i;this._readableState=new I(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function D(e,t,r,i,s){n("readableAddChunk",t);var o,a,c,u,l,f=e._readableState;if(null===t)f.reading=!1,function(e,t){if(n("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?A(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,O(e)))}}(e,f);else{if(s||(o=f,a=t,h.isBuffer(a)||a instanceof d||"string"==typeof a||void 0===a||o.objectMode||(c=new m("chunk",["string","Buffer","Uint8Array"],a)),l=c),l)E(e,l);else if(f.objectMode||t&&t.length>0){if("string"==typeof t||f.objectMode||Object.getPrototypeOf(t)===h.prototype||(u=t,t=h.from(u)),i)f.endEmitted?E(e,new w):P(e,f,t,!0);else if(f.ended)E(e,new _);else{if(f.destroyed)return!1;f.reading=!1,f.decoder&&!r?(t=f.decoder.write(t),f.objectMode||0!==t.length?P(e,f,t,!1):x(e,f)):P(e,f,t,!1)}}else i||(f.reading=!1,x(e,f))}return!f.ended&&(f.length<f.highWaterMark||0===f.length)}function P(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&A(e)),x(e,t)}function k(e,t){if(e<=0||0===t.length&&t.ended)return 0;if(t.objectMode)return 1;if(e!=e)return t.flowing&&t.length?t.buffer.head.data.length:t.length;if(e>t.highWaterMark){var r;t.highWaterMark=((r=e)>=1073741824?r=1073741824:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r)}return e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)}function A(e){var t=e._readableState;n("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(n("emitReadable",t.flowing),t.emittedReadable=!0,c.nextTick(O,e))}function O(e){var t=e._readableState;n("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function x(e,t){t.readingMore||(t.readingMore=!0,c.nextTick(R,e,t))}function R(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(n("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function N(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function T(e){n("readable nexttick read 0"),e.read(0)}function M(e,t){n("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(n("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){var r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function U(e){var t=e._readableState;n("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,c.nextTick(q,t,e))}function q(e,t){if(n("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function z(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return -1}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=g.destroy,C.prototype._undestroy=g.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=h.from(e,t),t=""),r=!0),D(this,e,t,!1,r)},C.prototype.unshift=function(e){return D(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(e){s||(s=r(57112).s);var t=new s(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,n="";null!==i;)n+=t.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this},C.prototype.read=function(e){n("read",e),e=parseInt(e,10);var t,r=this._readableState,i=e;if(0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return n("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?U(this):A(this),null;if(0===(e=k(e,r))&&r.ended)return 0===r.length&&U(this),null;var s=r.needReadable;return n("need readable",s),(0===r.length||r.length-e<r.highWaterMark)&&n("length less than watermark",s=!0),r.ended||r.reading?n("reading or ended",s=!1):s&&(n("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=k(i,r))),null===(t=e>0?j(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),i!==e&&r.ended&&U(this)),null!==t&&this.emit("data",t),t},C.prototype._read=function(e){E(this,new b("_read()"))},C.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,n("pipe count=%d opts=%j",i.pipesCount,t);var s=t&&!1===t.end||e===c.stdout||e===c.stderr?g:o;function o(){n("onend"),e.end()}i.endEmitted?c.nextTick(s):r.once("end",s),e.on("unpipe",function t(s,c){n("onunpipe"),s===r&&c&&!1===c.hasUnpiped&&(c.hasUnpiped=!0,n("cleanup"),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("drain",a),e.removeListener("error",d),e.removeListener("unpipe",t),r.removeListener("end",o),r.removeListener("end",g),r.removeListener("data",h),l=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&a())});var a=function(){var e=r._readableState;n("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&u(r,"data")&&(e.flowing=!0,L(r))};e.on("drain",a);var l=!1;function h(t){n("ondata");var s=e.write(t);n("dest.write",s),!1===s&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==z(i.pipes,e))&&!l&&(n("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function d(t){n("onerror",t),g(),e.removeListener("error",d),0===u(e,"error")&&E(e,t)}function f(){e.removeListener("finish",p),g()}function p(){n("onfinish"),e.removeListener("close",f),g()}function g(){n("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",f),e.once("finish",p),e.emit("pipe",r),i.flowing||(n("pipe resume"),r.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=z(t.pipes,e);return -1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},C.prototype.on=function(e,t){var r=l.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"!==e||i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,n("on readable",i.length,i.reading),i.length?A(this):i.reading||c.nextTick(T,this)),r},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(e,t){var r=l.prototype.removeListener.call(this,e,t);return"readable"===e&&c.nextTick(N,this),r},C.prototype.removeAllListeners=function(e){var t=l.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&c.nextTick(N,this),t},C.prototype.resume=function(){var e=this._readableState;return e.flowing||(n("resume"),e.flowing=!e.readableListening,e.resumeScheduled||(e.resumeScheduled=!0,c.nextTick(M,this,e))),e.paused=!1,this},C.prototype.pause=function(){return n("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(n("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var s in e.on("end",function(){if(n("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(s){n("wrapped data"),r.decoder&&(s=r.decoder.write(s)),(!r.objectMode||null!=s)&&(r.objectMode||s&&s.length)&&(t.push(s)||(i=!0,e.pause()))}),e)void 0===this[s]&&"function"==typeof e[s]&&(this[s]=function(t){return function(){return e[t].apply(e,arguments)}}(s));for(var o=0;o<S.length;o++)e.on(S[o],this.emit.bind(this,S[o]));return this._read=function(t){n("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return void 0===o&&(o=r(19200)),o(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),C._fromList=j,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(e,t){return void 0===a&&(a=r(64840)),a(C,e,t)})},24025:function(e,t,r){"use strict";e.exports=l;var i=r(19710).q,n=i.ERR_METHOD_NOT_IMPLEMENTED,s=i.ERR_MULTIPLE_CALLBACK,o=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=i.ERR_TRANSFORM_WITH_LENGTH_0,c=r(71343);function u(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(null===i)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(t,r){d(e,t,r)})}function d(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}r(5393)(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new n("_transform()"))},l.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,function(e){t(e)})}},1421:function(e,t,r){"use strict";var i,n,s=r(28070);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){(function(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(void 0),i=i.next}t.corkedRequestsFree.next=e})(t,e)}}e.exports=C,C.WritableState=I;var a={deprecate:r(97989)},c=r(79742),u=r(90687).Buffer,l=(void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},h=r(81777),d=r(69520).getHighWaterMark,f=r(19710).q,p=f.ERR_INVALID_ARG_TYPE,g=f.ERR_METHOD_NOT_IMPLEMENTED,y=f.ERR_MULTIPLE_CALLBACK,v=f.ERR_STREAM_CANNOT_PIPE,m=f.ERR_STREAM_DESTROYED,_=f.ERR_STREAM_NULL_VALUES,b=f.ERR_STREAM_WRITE_AFTER_END,w=f.ERR_UNKNOWN_ENCODING,E=h.errorOrDestroy;function S(){}function I(e,t,n){i=i||r(71343),e=e||{},"boolean"!=typeof n&&(n=t instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){(function(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if("function"!=typeof n)throw new y;if(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t)--r.pendingcb,i?(s.nextTick(n,t),s.nextTick(x,e,r),e._writableState.errorEmitted=!0,E(e,t)):(n(t),e._writableState.errorEmitted=!0,E(e,t),x(e,r));else{var o=A(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||k(e,r),i?s.nextTick(P,e,r,o,n):P(e,r,o,n)}})(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function C(e){var t=this instanceof(i=i||r(71343));if(!t&&!n.call(C,this))return new C(e);this._writableState=new I(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),c.call(this)}function D(e,t,r,i,n,s,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new m("write")):r?e._writev(n,t.onwrite):e._write(n,s,t.onwrite),t.sync=!1}function P(e,t,r,i){r||0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain")),t.pendingcb--,i(),x(e,t)}function k(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=Array(t.bufferedRequestCount),n=t.corkedRequestsFree;n.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,D(e,t,!0,t.length,i,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,l=r.callback,h=t.objectMode?1:c.length;if(D(e,t,!1,h,c,u,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function A(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function O(e,t){e._final(function(r){t.pendingcb--,r&&E(e,r),t.prefinished=!0,e.emit("prefinish"),x(e,t)})}function x(e,t){var r=A(t);if(r&&(t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,s.nextTick(O,e,t))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}r(5393)(C,c),I.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(I.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(n=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!n.call(this,e)||this===C&&e&&e._writableState instanceof I}})):n=function(e){return e instanceof this},C.prototype.pipe=function(){E(this,new v)},C.prototype.write=function(e,t,r){var i,n,o,a,c,h,d,f=this._writableState,g=!1,y=!f.objectMode&&(i=e,u.isBuffer(i)||i instanceof l);return y&&!u.isBuffer(e)&&(n=e,e=u.from(n)),("function"==typeof t&&(r=t,t=null),y?t="buffer":t||(t=f.defaultEncoding),"function"!=typeof r&&(r=S),f.ending)?(o=r,E(this,a=new b),s.nextTick(o,a)):(y||(c=e,h=r,null===c?d=new _:"string"==typeof c||f.objectMode||(d=new p("chunk",["string","Buffer"],c)),!d||(E(this,d),s.nextTick(h,d),0)))&&(f.pendingcb++,g=function(e,t,r,i,n,s){if(!r){var o,a,c=(o=i,a=n,t.objectMode||!1===t.decodeStrings||"string"!=typeof o||(o=u.from(o,a)),o);i!==c&&(r=!0,n="buffer",i=c)}var l=t.objectMode?1:i.length;t.length+=l;var h=t.length<t.highWaterMark;if(h||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:s,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else D(e,t,!1,l,i,n,s);return h}(this,f,y,e,t,r)),g},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var e=this._writableState;!e.corked||(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||k(this,e))},C.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(e,t,r){r(new g("_write()"))},C.prototype._writev=null,C.prototype.end=function(e,t,r){var i,n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||(i=r,n.ending=!0,x(this,n),i&&(n.finished?s.nextTick(i):this.once("finish",i)),n.ended=!0,this.writable=!1),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),C.prototype.destroy=h.destroy,C.prototype._undestroy=h.undestroy,C.prototype._destroy=function(e,t){t(e)}},19200:function(e,t,r){"use strict";var i,n=r(28070);function s(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r(66208),a=Symbol("lastResolve"),c=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),h=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function p(e,t){return{value:e,done:t}}function g(e){var t=e[a];if(null!==t){var r=e[f].read();null!==r&&(e[h]=null,e[a]=null,e[c]=null,t(p(r,!1)))}}function y(e){n.nextTick(g,e)}var v=Object.getPrototypeOf(function(){}),m=Object.setPrototypeOf((s(i={get stream(){return this[f]},next:function(){var e,t,r=this,i=this[u];if(null!==i)return Promise.reject(i);if(this[l])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise(function(e,t){n.nextTick(function(){r[u]?t(r[u]):e(p(void 0,!0))})});var s=this[h];if(s)t=new Promise((e=this,function(t,r){s.then(function(){if(e[l]){t(p(void 0,!0));return}e[d](t,r)},r)}));else{var o=this[f].read();if(null!==o)return Promise.resolve(p(o,!1));t=new Promise(this[d])}return this[h]=t,t}},Symbol.asyncIterator,function(){return this}),s(i,"return",function(){var e=this;return new Promise(function(t,r){e[f].destroy(null,function(e){if(e){r(e);return}t(p(void 0,!0))})})}),i),v);e.exports=function(e){var t,r=Object.create(m,(s(t={},f,{value:e,writable:!0}),s(t,a,{value:null,writable:!0}),s(t,c,{value:null,writable:!0}),s(t,u,{value:null,writable:!0}),s(t,l,{value:e._readableState.endEmitted,writable:!0}),s(t,d,{value:function(e,t){var i=r[f].read();i?(r[h]=null,r[a]=null,r[c]=null,e(p(i,!1))):(r[a]=e,r[c]=t)},writable:!0}),t));return r[h]=null,o(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[c];null!==t&&(r[h]=null,r[a]=null,r[c]=null,t(e)),r[u]=e;return}var i=r[a];null!==i&&(r[h]=null,r[a]=null,r[c]=null,i(p(void 0,!0))),r[l]=!0}),e.on("readable",y.bind(null,r)),r}},58259:function(e,t,r){"use strict";function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var i,n;i=t,n=r[t],(i=s(i))in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var o=r(90687).Buffer,a=r(87942).inspect,c=a&&a.custom||"inspect";e.exports=function(){var e;function t(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.head=null,this.tail=null,this.length=0}return e=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t,r,i=o.allocUnsafe(e>>>0),n=this.head,s=0;n;)t=n.data,r=s,o.prototype.copy.call(t,i,r),s+=n.data.length,n=n.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,i=t.data;for(e-=i.length;t=t.next;){var n=t.data,s=e>n.length?n.length:e;if(s===n.length?i+=n:i+=n.slice(0,e),0==(e-=s)){s===n.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=n.slice(s));break}++r}return this.length-=r,i}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),r=this.head,i=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var n=r.data,s=e>n.length?n.length:e;if(n.copy(t,t.length-e,0,s),0==(e-=s)){s===n.length?(++i,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=n.slice(s));break}++i}return this.length-=i,t}},{key:c,value:function(e,t){return a(this,n(n({},t),{},{depth:0,customInspect:!1}))}}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,s(i.key),i)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}()},81777:function(e,t,r){"use strict";var i=r(28070);function n(e,t){o(e,t),s(e)}function s(e){(!e._writableState||e._writableState.emitClose)&&(!e._readableState||e._readableState.emitClose)&&e.emit("close")}function o(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(o,this,e)):i.nextTick(o,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?r._writableState?r._writableState.errorEmitted?i.nextTick(s,r):(r._writableState.errorEmitted=!0,i.nextTick(n,r,e)):i.nextTick(n,r,e):t?(i.nextTick(s,r),t(e)):i.nextTick(s,r)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,i=e._writableState;r&&r.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}},66208:function(e,t,r){"use strict";var i=r(19710).q.ERR_STREAM_PREMATURE_CLOSE;function n(){}e.exports=function e(t,r,s){if("function"==typeof r)return e(t,null,r);r||(r={}),o=s||n,a=!1,s=function(){if(!a){a=!0;for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.apply(this,t)}};var o,a,c=r.readable||!1!==r.readable&&t.readable,u=r.writable||!1!==r.writable&&t.writable,l=function(){t.writable||d()},h=t._writableState&&t._writableState.finished,d=function(){u=!1,h=!0,c||s.call(t)},f=t._readableState&&t._readableState.endEmitted,p=function(){c=!1,f=!0,u||s.call(t)},g=function(e){s.call(t,e)},y=function(){var e;return c&&!f?(t._readableState&&t._readableState.ended||(e=new i),s.call(t,e)):u&&!h?(t._writableState&&t._writableState.ended||(e=new i),s.call(t,e)):void 0},v=function(){t.req.on("finish",d)};return t.setHeader&&"function"==typeof t.abort?(t.on("complete",d),t.on("abort",y),t.req?v():t.on("request",v)):u&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",p),t.on("finish",d),!1!==r.error&&t.on("error",g),t.on("close",y),function(){t.removeListener("complete",d),t.removeListener("abort",y),t.removeListener("request",v),t.req&&t.req.removeListener("finish",d),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",d),t.removeListener("end",p),t.removeListener("error",g),t.removeListener("close",y)}}},64840:function(e){e.exports=function(){throw Error("Readable.from is not available in the browser")}},10059:function(e,t,r){"use strict";var i,n=r(19710).q,s=n.ERR_MISSING_ARGS,o=n.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(e){e()}function u(e,t){return e.pipe(t)}e.exports=function(){for(var e,t,n=arguments.length,l=Array(n),h=0;h<n;h++)l[h]=arguments[h];var d=(e=l).length&&"function"==typeof e[e.length-1]?e.pop():a;if(Array.isArray(l[0])&&(l=l[0]),l.length<2)throw new s("streams");var f=l.map(function(e,n){var s,a,u,h,p,g,y=n<l.length-1;return s=n>0,u=a=function(e){t||(t=e),e&&f.forEach(c),y||(f.forEach(c),d(t))},h=!1,a=function(){h||(h=!0,u.apply(void 0,arguments))},p=!1,e.on("close",function(){p=!0}),void 0===i&&(i=r(66208)),i(e,{readable:y,writable:s},function(e){if(e)return a(e);p=!0,a()}),g=!1,function(t){if(!p&&!g){if(g=!0,e.setHeader&&"function"==typeof e.abort)return e.abort();if("function"==typeof e.destroy)return e.destroy();a(t||new o("pipe"))}}});return l.reduce(u)}},69520:function(e,t,r){"use strict";var i=r(19710).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,n){var s=null!=t.highWaterMark?t.highWaterMark:n?t[r]:null;if(null!=s){if(!(isFinite(s)&&Math.floor(s)===s)||s<0)throw new i(n?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}},79742:function(e,t,r){e.exports=r(19998).EventEmitter},6182:function(e,t,r){(t=e.exports=r(3770)).Stream=t,t.Readable=t,t.Writable=r(1421),t.Duplex=r(71343),t.Transform=r(24025),t.PassThrough=r(53691),t.finished=r(66208),t.pipeline=r(10059)},27376:function(e,t,r){var i=r(36639).Buffer;function n(e,t){this._block=i.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}n.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=i.from(e,t));for(var r=this._block,n=this._blockSize,s=e.length,o=this._len,a=0;a<s;){for(var c=o%n,u=Math.min(s-a,n-c),l=0;l<u;l++)r[c+l]=e[a+l];o+=u,a+=u,o%n==0&&this._update(r)}return this._len+=s,this},n.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var i=(4294967295&r)>>>0;this._block.writeUInt32BE((r-i)/4294967296,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var n=this._hash();return e?n.toString(e):n},n.prototype._update=function(){throw Error("_update must be implemented by subclass")},e.exports=n},20708:function(e,t,r){var i=e.exports=function(e){var t=i[e=e.toLowerCase()];if(!t)throw Error(e+" is not supported (we accept pull requests)");return new t};i.sha=r(86647),i.sha1=r(92026),i.sha224=r(2636),i.sha256=r(44240),i.sha384=r(70926),i.sha512=r(56019)},86647:function(e,t,r){var i=r(5393),n=r(27376),s=r(36639).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=Array(80);function c(){this.init(),this._w=a,n.call(this,64,56)}i(c,n),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(e){for(var t=this._w,r=0|this._a,i=0|this._b,n=0|this._c,s=0|this._d,a=0|this._e,c=0;c<16;++c)t[c]=e.readInt32BE(4*c);for(;c<80;++c)t[c]=t[c-3]^t[c-8]^t[c-14]^t[c-16];for(var u=0;u<80;++u){var l,h,d,f,p,g=~~(u/20),y=((l=r)<<5|l>>>27)+(h=i,d=n,f=s,0===g?h&d|~h&f:2===g?h&d|h&f|d&f:h^d^f)+a+t[u]+o[g]|0;a=s,s=n,n=(p=i)<<30|p>>>2,i=r,r=y}this._a=r+this._a|0,this._b=i+this._b|0,this._c=n+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0},c.prototype._hash=function(){var e=s.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=c},92026:function(e,t,r){var i=r(5393),n=r(27376),s=r(36639).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=Array(80);function c(){this.init(),this._w=a,n.call(this,64,56)}i(c,n),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(e){for(var t=this._w,r=0|this._a,i=0|this._b,n=0|this._c,s=0|this._d,a=0|this._e,c=0;c<16;++c)t[c]=e.readInt32BE(4*c);for(;c<80;++c)t[c]=(l=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|l>>>31;for(var u=0;u<80;++u){var l,h,d,f,p,g,y=~~(u/20),v=((h=r)<<5|h>>>27)+(d=i,f=n,p=s,0===y?d&f|~d&p:2===y?d&f|d&p|f&p:d^f^p)+a+t[u]+o[y]|0;a=s,s=n,n=(g=i)<<30|g>>>2,i=r,r=v}this._a=r+this._a|0,this._b=i+this._b|0,this._c=n+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0},c.prototype._hash=function(){var e=s.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=c},2636:function(e,t,r){var i=r(5393),n=r(44240),s=r(27376),o=r(36639).Buffer,a=Array(64);function c(){this.init(),this._w=a,s.call(this,64,56)}i(c,n),c.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},c.prototype._hash=function(){var e=o.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=c},44240:function(e,t,r){var i=r(5393),n=r(27376),s=r(36639).Buffer,o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=Array(64);function c(){this.init(),this._w=a,n.call(this,64,56)}i(c,n),c.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},c.prototype._update=function(e){for(var t=this._w,r=0|this._a,i=0|this._b,n=0|this._c,s=0|this._d,a=0|this._e,c=0|this._f,u=0|this._g,l=0|this._h,h=0;h<16;++h)t[h]=e.readInt32BE(4*h);for(;h<64;++h)t[h]=(((f=t[h-2])>>>17|f<<15)^(f>>>19|f<<13)^f>>>10)+t[h-7]+(((p=t[h-15])>>>7|p<<25)^(p>>>18|p<<14)^p>>>3)+t[h-16]|0;for(var d=0;d<64;++d){var f,p,g,y,v,m,_,b,w,E=l+(((g=a)>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(y=a,v=c,(m=u)^y&(v^m))+o[d]+t[d]|0,S=(((_=r)>>>2|_<<30)^(_>>>13|_<<19)^(_>>>22|_<<10))+((b=r)&(w=i)|n&(b|w))|0;l=u,u=c,c=a,a=s+E|0,s=n,n=i,i=r,r=E+S|0}this._a=r+this._a|0,this._b=i+this._b|0,this._c=n+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0,this._f=c+this._f|0,this._g=u+this._g|0,this._h=l+this._h|0},c.prototype._hash=function(){var e=s.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=c},70926:function(e,t,r){var i=r(5393),n=r(56019),s=r(27376),o=r(36639).Buffer,a=Array(160);function c(){this.init(),this._w=a,s.call(this,128,112)}i(c,n),c.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},c.prototype._hash=function(){var e=o.allocUnsafe(48);function t(t,r,i){e.writeInt32BE(t,i),e.writeInt32BE(r,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=c},56019:function(e,t,r){var i=r(5393),n=r(27376),s=r(36639).Buffer,o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=Array(160);function c(){this.init(),this._w=a,n.call(this,128,112)}function u(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function l(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function h(e,t){return e>>>0<t>>>0?1:0}i(c,n),c.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},c.prototype._update=function(e){for(var t=this._w,r=0|this._ah,i=0|this._bh,n=0|this._ch,s=0|this._dh,a=0|this._eh,c=0|this._fh,d=0|this._gh,f=0|this._hh,p=0|this._al,g=0|this._bl,y=0|this._cl,v=0|this._dl,m=0|this._el,_=0|this._fl,b=0|this._gl,w=0|this._hl,E=0;E<32;E+=2)t[E]=e.readInt32BE(4*E),t[E+1]=e.readInt32BE(4*E+4);for(;E<160;E+=2){var S,I,C,D,P,k,A,O,x=t[E-30],R=t[E-30+1],N=((S=x)>>>1|(I=R)<<31)^(S>>>8|I<<24)^S>>>7,T=((C=R)>>>1|(D=x)<<31)^(C>>>8|D<<24)^(C>>>7|D<<25);x=t[E-4],R=t[E-4+1];var M=((P=x)>>>19|(k=R)<<13)^(k>>>29|P<<3)^P>>>6,L=((A=R)>>>19|(O=x)<<13)^(O>>>29|A<<3)^(A>>>6|O<<26),j=t[E-14],U=t[E-14+1],q=t[E-32],z=t[E-32+1],H=T+U|0,B=N+j+h(H,T)|0;B=(B=B+M+h(H=H+L|0,L)|0)+q+h(H=H+z|0,z)|0,t[E]=B,t[E+1]=H}for(var W=0;W<160;W+=2){B=t[W],H=t[W+1];var F,$,K,V,G,Y,Z,J,Q,X,ee=(F=r)&($=i)|n&(F|$),et=(K=p)&(V=g)|y&(K|V),er=u(r,p),ei=u(p,r),en=l(a,m),es=l(m,a),eo=o[W],ea=o[W+1],ec=(G=a,Y=c,(Z=d)^G&(Y^Z)),eu=(J=m,Q=_,(X=b)^J&(Q^X)),el=w+es|0,eh=f+en+h(el,w)|0;eh=(eh=(eh=eh+ec+h(el=el+eu|0,eu)|0)+eo+h(el=el+ea|0,ea)|0)+B+h(el=el+H|0,H)|0;var ed=ei+et|0,ef=er+ee+h(ed,ei)|0;f=d,w=b,d=c,b=_,c=a,_=m,a=s+eh+h(m=v+el|0,v)|0,s=n,v=y,n=i,y=g,i=r,g=p,r=eh+ef+h(p=el+ed|0,el)|0}this._al=this._al+p|0,this._bl=this._bl+g|0,this._cl=this._cl+y|0,this._dl=this._dl+v|0,this._el=this._el+m|0,this._fl=this._fl+_|0,this._gl=this._gl+b|0,this._hl=this._hl+w|0,this._ah=this._ah+r+h(this._al,p)|0,this._bh=this._bh+i+h(this._bl,g)|0,this._ch=this._ch+n+h(this._cl,y)|0,this._dh=this._dh+s+h(this._dl,v)|0,this._eh=this._eh+a+h(this._el,m)|0,this._fh=this._fh+c+h(this._fl,_)|0,this._gh=this._gh+d+h(this._gl,b)|0,this._hh=this._hh+f+h(this._hl,w)|0},c.prototype._hash=function(){var e=s.allocUnsafe(64);function t(t,r,i){e.writeInt32BE(t,i),e.writeInt32BE(r,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=c},32994:function(e){"use strict";e.exports=(e,t)=>{if(!("string"==typeof e&&"string"==typeof t))throw TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];let r=e.indexOf(t);return -1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},82628:function(e){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)},57112:function(e,t,r){"use strict";var i=r(36639).Buffer,n=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===n||!n(e)))throw Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=h,t=3;break;default:this.write=d,this.end=f;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,"�"}}(this,e,0);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function c(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.s=s,s.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},s.prototype.text=function(e,t){var r=function(e,t,r){var i=t.length-1;if(i<r)return 0;var n=o(t[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<r||-2===n?0:(n=o(t[i]))>=0?(n>0&&(e.lastNeed=n-2),n):--i<r||-2===n?0:(n=o(t[i]))>=0?(n>0&&(2===n?n=0:e.lastNeed=n-3),n):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},75700:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return s},__asyncDelegator:function(){return b},__asyncGenerator:function(){return _},__asyncValues:function(){return w},__await:function(){return m},__awaiter:function(){return l},__classPrivateFieldGet:function(){return C},__classPrivateFieldSet:function(){return D},__createBinding:function(){return d},__decorate:function(){return a},__exportStar:function(){return f},__extends:function(){return n},__generator:function(){return h},__importDefault:function(){return I},__importStar:function(){return S},__makeTemplateObject:function(){return E},__metadata:function(){return u},__param:function(){return c},__read:function(){return g},__rest:function(){return o},__spread:function(){return y},__spreadArrays:function(){return v},__values:function(){return p}});var i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function n(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function o(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function a(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,i){t(r,i,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((i=i.apply(e,t||[])).next())})}function h(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}function f(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function v(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function _(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){n[e]&&(i[e]=function(t){return new Promise(function(r,i){s.push([e,t,r,i])>1||a(e,t)})})}function a(e,t){try{var r;(r=n[e](t)).value instanceof m?Promise.resolve(r.value.v).then(c,u):l(s[0][2],r)}catch(e){l(s[0][3],e)}}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function b(e){var t,r;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,n){t[i]=e[i]?function(t){return(r=!r)?{value:m(e[i](t)),done:"return"===i}:n?n(t):t}:n}}function w(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,n){(function(e,t,r,i){Promise.resolve(i).then(function(t){e({value:t,done:r})},t)})(i,n,(t=e[r](t)).done,t.value)})}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function D(e,t,r){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},5113:function(e,t,r){"use strict";var i=r(50180),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=i.useState,o=i.useEffect,a=i.useLayoutEffect,c=i.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!n(e,r)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),i=s({inst:{value:r,getSnapshot:t}}),n=i[0].inst,l=i[1];return a(function(){n.value=r,n.getSnapshot=t,u(n)&&l({inst:n})},[e,r,t]),o(function(){return u(n)&&l({inst:n}),e(function(){u(n)&&l({inst:n})})},[e]),c(r),r};t.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:l},98657:function(e,t,r){"use strict";var i=r(50180),n=r(77418),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useSyncExternalStore,a=i.useRef,c=i.useEffect,u=i.useMemo,l=i.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,i,n){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;var f=o(e,(h=u(function(){function e(e){if(!c){if(c=!0,o=e,e=i(e),void 0!==n&&d.hasValue){var t=d.value;if(n(t,e))return a=t}return a=e}if(t=a,s(o,e))return t;var r=i(e);return void 0!==n&&n(t,r)?t:(o=e,a=r)}var o,a,c=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,r,i,n]))[0],h[1]);return c(function(){d.hasValue=!0,d.value=f},[f]),l(f),f}},77418:function(e,t,r){"use strict";e.exports=r(5113)},2096:function(e,t,r){"use strict";e.exports=r(98657)},97989:function(e,t,r){e.exports=function(e,t){if(i("noDeprecation"))return e;var r=!1;return function(){if(!r){if(i("throwDeprecation"))throw Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}};function i(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}},62052:function(e){"use strict";e.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},9390:function(e,t,r){"use strict";let i=r(96237);e.exports=s;let n=function(){function e(e){return void 0!==e&&e}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{};function s(e){var t,r;(e=e||{}).browser=e.browser||{};let i=e.browser.transmit;if(i&&"function"!=typeof i.send)throw Error("pino: transmit option must have a send function");let l=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let h=e.serializers||{},g=Array.isArray(t=e.browser.serialize)?t.filter(function(e){return"!stdSerializers.err"!==e}):!0===t&&Object.keys(h),y=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(y=!1),"function"==typeof l&&(l.error=l.fatal=l.warn=l.info=l.debug=l.trace=l),!1===e.enabled&&(e.level="silent");let v=e.level||"info",m=Object.create(l);m.log||(m.log=d),Object.defineProperty(m,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(m,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,o(_,m,"error","log"),o(_,m,"fatal","error"),o(_,m,"warn","error"),o(_,m,"info","log"),o(_,m,"debug","log"),o(_,m,"trace","log")}});let _={transmit:i,serialize:g,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:"function"==typeof(r=e).timestamp?r.timestamp:!1===r.timestamp?f:p};return m.levels=s.levels,m.level=v,m.setMaxListeners=m.getMaxListeners=m.emit=m.addListener=m.on=m.prependListener=m.once=m.prependOnceListener=m.removeListener=m.removeAllListeners=m.listeners=m.listenerCount=m.eventNames=m.write=m.flush=d,m.serializers=h,m._serialize=g,m._stdErrSerialize=y,m.child=function(t,r){if(!t)throw Error("missing bindings for child Pino");r=r||{},g&&t.serializers&&(r.serializers=t.serializers);let n=r.serializers;if(g&&n){var s=Object.assign({},h,n),o=!0===e.browser.serialize?Object.keys(s):g;delete t.serializers,a([t],o,s,this._stdErrSerialize)}function l(e){this._childLevel=(0|e._childLevel)+1,this.error=c(e,t,"error"),this.fatal=c(e,t,"fatal"),this.warn=c(e,t,"warn"),this.info=c(e,t,"info"),this.debug=c(e,t,"debug"),this.trace=c(e,t,"trace"),s&&(this.serializers=s,this._serialize=o),i&&(this._logEvent=u([].concat(e._logEvent.bindings,t)))}return l.prototype=this,new l(this)},i&&(m._logEvent=u()),m}function o(e,t,r,o){let c=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?d:c[r]?c[r]:n[r]||n[o]||d,function(e,t,r){if(e.transmit||t[r]!==d){var o;t[r]=(o=t[r],function(){let c=e.timestamp(),l=Array(arguments.length),h=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var d=0;d<l.length;d++)l[d]=arguments[d];if(e.serialize&&!e.asObject&&a(l,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?o.call(h,function(e,t,r,n){e._serialize&&a(r,e._serialize,e.serializers,e._stdErrSerialize);let o=r.slice(),c=o[0],u={};n&&(u.time=n),u.level=s.levels.values[t];let l=(0|e._childLevel)+1;if(l<1&&(l=1),null!==c&&"object"==typeof c){for(;l--&&"object"==typeof o[0];)Object.assign(u,o.shift());c=o.length?i(o.shift(),o):void 0}else"string"==typeof c&&(c=i(o.shift(),o));return void 0!==c&&(u.msg=c),u}(this,r,l,c)):o.apply(h,l),e.transmit){let i=e.transmit.level||t.level,n=s.levels.values[i],o=s.levels.values[r];if(o<n)return;(function(e,t,r){let i=t.send,n=t.ts,s=t.methodLevel,o=t.methodValue,c=t.val,l=e._logEvent.bindings;a(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=r.filter(function(e){return -1===l.indexOf(e)}),e._logEvent.level.label=s,e._logEvent.level.value=o,i(s,e._logEvent,c),e._logEvent=u(l)})(this,{ts:c,methodLevel:r,methodValue:o,transmitLevel:i,transmitValue:s.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},l)}})}}(e,t,r)}function a(e,t,r,i){for(let n in e)if(i&&e[n]instanceof Error)e[n]=s.stdSerializers.err(e[n]);else if("object"==typeof e[n]&&!Array.isArray(e[n]))for(let i in e[n])t&&t.indexOf(i)>-1&&i in r&&(e[n][i]=r[i](e[n][i]))}function c(e,t,r){return function(){let i=Array(1+arguments.length);i[0]=t;for(var n=1;n<i.length;n++)i[n]=arguments[n-1];return e[r].apply(this,i)}}function u(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function l(){return{}}function h(e){return e}function d(){}function f(){return!1}function p(){return Date.now()}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers={mapHttpRequest:l,mapHttpResponse:l,wrapRequestSerializer:h,wrapResponseSerializer:h,wrapErrorSerializer:h,req:l,res:l,err:function(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}},s.stdTimeFunctions=Object.assign({},{nullTime:f,epochTime:p,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})},46337:function(e,t,r){"use strict";let i,n;r.d(t,{Eh:function(){return cM},UP:function(){return em.UP}});var s,o,a={};r.r(a),r.d(a,{identity:function(){return eQ}});var c={};r.r(c),r.d(c,{base2:function(){return eX}});var u={};r.r(u),r.d(u,{base8:function(){return e0}});var l={};r.r(l),r.d(l,{base10:function(){return e1}});var h={};r.r(h),r.d(h,{base16:function(){return e3},base16upper:function(){return e2}});var d={};r.r(d),r.d(d,{base32:function(){return e5},base32hex:function(){return e9},base32hexpad:function(){return te},base32hexpadupper:function(){return tt},base32hexupper:function(){return e7},base32pad:function(){return e8},base32padupper:function(){return e4},base32upper:function(){return e6},base32z:function(){return tr}});var f={};r.r(f),r.d(f,{base36:function(){return ti},base36upper:function(){return tn}});var p={};r.r(p),r.d(p,{base58btc:function(){return ts},base58flickr:function(){return to}});var g={};r.r(g),r.d(g,{base64:function(){return ta},base64pad:function(){return tc},base64url:function(){return tu},base64urlpad:function(){return tl}});var y={};r.r(y),r.d(y,{base256emoji:function(){return tp}});var v={};r.r(v),r.d(v,{sha256:function(){return tP},sha512:function(){return tk}});var m={};r.r(m),r.d(m,{identity:function(){return tA}});var _={};r.r(_),r.d(_,{code:function(){return tx},decode:function(){return tN},encode:function(){return tR},name:function(){return tO}});var b={};r.r(b),r.d(b,{code:function(){return tj},decode:function(){return tq},encode:function(){return tU},name:function(){return tL}});var w=r(90687);"undefined"!=typeof window&&(window.global=globalThis,Object.assign(window,{Buffer:w.Buffer}));var E=r(8539);function S(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((i=i.apply(e,t||[])).next())})}function I(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)}"function"==typeof SuppressedError&&SuppressedError;var C=r(86414),D=r(38280),P=r(28614),k=r(90687).Buffer;let A=e=>k.from(e).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),O=()=>{let e=new Uint8Array(32);return crypto.getRandomValues(e),e.buffer};var x=r(6624);let R={AUTHENTICATOR_TRANSPORT_BLE:x.lfg.Ble,AUTHENTICATOR_TRANSPORT_HYBRID:x.lfg.Hybrid,AUTHENTICATOR_TRANSPORT_INTERNAL:x.lfg.Internal,AUTHENTICATOR_TRANSPORT_NFC:x.lfg.Nfc,AUTHENTICATOR_TRANSPORT_USB:x.lfg.Usb},N=e=>e.map(e=>R[e]);var T=r(44836);let M=["Turnkey error 16: expired api key","Turnkey error 16: could not find public key"],L=["The operation either timed out or was not allowed","The request is not allowed by the user agent or the platform in the current context, possibly because the user denied permission.","Turnkey error 5: webauthn authenticator not found in organization or parent organization","The user cancelled the request"];class j extends T.Y{error(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];let[n]=r;(null==n?void 0:n.message)&&L.some(e=>n.message.includes(e))?this.warn(e,...r):(T.Y.events.emit("error",e),this.log(T.i.ERROR,e,...r))}constructor(e,t){super(e,t)}}let U=new j("Dynamic embedded wallets",T.i.INFO);var q=r(75078),z=r(85738),H=r(51657),B=r(27610);let W=()=>({createWebauthnStamper:e=>new H.S(e),getWebAuthnAttestation:B.lW});class F{static get implementation(){return I(s,s,"f",o)?I(s,s,"f",o):W()}static set implementation(e){!function(e,t,r,i,n){if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");n?n.value=r:t.set(e,r)}(s,s,e,"f",o)}static get getWebAuthnAttestation(){return s.implementation.getWebAuthnAttestation}static get createWebauthnStamper(){return s.implementation.createWebauthnStamper}}s=F,o={value:void 0};let $="https://api.turnkey.com";class K{get publicKey(){return this.__publicKey}get client(){return this.__client}get recoveryType(){return this.__recoveryType}get recoveryUserId(){return this.__turnkeyRecoveryUserId||""}set recoveryUserId(e){this.__turnkeyRecoveryUserId=e}clear(){var e;null===(e=this.__iframeStamper)||void 0===e||e.clear(),this.__recoveryType=void 0,this.__iframeStamper=void 0,this.__publicKey=void 0,this.__client=void 0,this.__turnkeyRecoveryUserId=void 0,this.__createdAt=void 0}initRecovery(e,t,r,i){return S(this,void 0,void 0,function*(){return this.__recoveryType&&this.clear(),this.__sessionExpiration=i,this.__recoveryType=e,this.__iframeStamper=new q.rr({iframeContainer:t,iframeElementId:r,iframeUrl:"passkey"===e?"https://recovery.turnkey.com":"https://auth.turnkey.com"}),yield this.__iframeStamper.init(),this.__publicKey=this.__iframeStamper.publicKey(),this.__publicKey})}verifyRecoveryCode(e,t){return S(this,void 0,void 0,function*(){if(!this.__iframeStamper)throw new P.kW("Cannot proceed with your request");try{if(yield this.__iframeStamper.injectCredentialBundle(e),this.__client=new z.TF({baseUrl:$},this.__iframeStamper),!t||!this.__turnkeyRecoveryUserId)throw new P.kW("Cannot proceed with your request");if(!(yield this.isValidCode(t)))throw new P.kW("The code is invalid or expired.")}catch(e){if(U.error("Error while verifying recovery code",e),e instanceof P.kW)throw e;throw new P.kW("The code is invalid or expired.")}})}completeRecovery(e){return S(this,arguments,void 0,function*(e){let{attestation:t,challenge:r,turnkeySubOrganizationId:i}=e;if(!this.__client||!this.__turnkeyRecoveryUserId)throw new P.kW("Cannot proceed with your request");try{return this.__client.recoverUser({organizationId:i,parameters:{authenticator:{attestation:t,authenticatorName:"Passkey",challenge:r},userId:this.__turnkeyRecoveryUserId},timestampMs:String(Date.now()),type:"ACTIVITY_TYPE_RECOVER_USER"})}catch(e){throw U.error("[TK] Error while completing recovery process",e),e}})}addPasskeyAuthenticator(e){return S(this,arguments,void 0,function*(e){let{attestation:t,challenge:r,turnkeySubOrganizationId:i}=e;if(!this.__client||!this.__turnkeyRecoveryUserId)throw new P.kW("Cannot proceed with your request");try{return this.__client.createAuthenticators({organizationId:i,parameters:{authenticators:[{attestation:t,authenticatorName:"Passkey",challenge:r}],userId:this.__turnkeyRecoveryUserId},timestampMs:String(Date.now()),type:"ACTIVITY_TYPE_CREATE_AUTHENTICATORS_V2"})}catch(e){throw U.error("[TK] Error while creating new authenticator",e),e}})}addEmailRecovery(e){return S(this,arguments,void 0,function*(e){let{organizationId:t,email:r,turnkeyUserId:i}=e,n=(0,P.KT)();n||(n=P.mi.getHostname());let s=F.createWebauthnStamper({rpId:n}),o=new z.TF({baseUrl:$},s);try{return{signedRequest:yield o.stampUpdateUser({organizationId:t,parameters:{userEmail:r,userId:i,userTagIds:[]},timestampMs:String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_USER"}),userId:i}}catch(e){throw U.error("Error while adding email recovery",e),e}})}constructor(){this.isSessionActive=()=>!!this.__createdAt&&"email"===this.__recoveryType&&(!this.isExpired(this.__createdAt,this.__sessionExpiration||1800)||(this.clear(),!1)),this.isValidCode=e=>S(this,void 0,void 0,function*(){var t,r,i,n;if(!e||!this.__turnkeyRecoveryUserId)throw new P.kW("Cannot proceed with your request");let s=yield null===(t=this.__client)||void 0===t?void 0:t.getUser({organizationId:e,userId:this.__turnkeyRecoveryUserId}),o={email:"CREDENTIAL_TYPE_API_KEY_P256",passkey:"CREDENTIAL_TYPE_RECOVER_USER_KEY_P256"},a=null===(n=null===(i=null===(r=null==s?void 0:s.user)||void 0===r?void 0:r.apiKeys)||void 0===i?void 0:i.filter(e=>e.credential.type===o[this.__recoveryType]))||void 0===n?void 0:n.pop();return!(!a||this.isExpired(parseInt(a.createdAt.seconds,10),900))&&(this.__createdAt=parseInt(a.createdAt.seconds,10),!0)}),this.isExpired=(e,t)=>{let r=new Date(1e3*(e+t));return new Date>=r}}}let V=new K,G="https://api.turnkey.com";class Y{get publicKey(){return this.__publicKey}clear(){var e;null===(e=this.__iframeStamper)||void 0===e||e.clear(),this.__iframeStamper=void 0,this.__publicKey=void 0,this.__turnkeyClient=void 0}initExport(e,t){return S(this,void 0,void 0,function*(){if(this.__iframeStamper=new q.rr({iframeContainer:e,iframeElementId:t,iframeUrl:"https://export.turnkey.com"}),yield this.__iframeStamper.init(),this.__publicKey=this.__iframeStamper.publicKey(),V.isSessionActive())this.__turnkeyClient=V.client;else{let e=(0,P.KT)();e||(e=P.mi.getHostname());let t=F.createWebauthnStamper({rpId:e}),r=null==Y?void 0:Y.apiKeyStamper;this.__turnkeyClient=new z.TF({baseUrl:G},null!=r?r:t)}return this.__publicKey})}verifyExportWallet(e){return S(this,arguments,void 0,function*(e){let{exportBundle:t,organizationId:r}=e;if(!this.__iframeStamper)throw new P.kW("Cannot proceed with your request");try{return yield this.__iframeStamper.injectWalletExportBundle(t,r)}catch(e){throw U.error("Error while verifying export wallet",e),e}})}verifyExportPrivateKey(e){return S(this,arguments,void 0,function*(e){let{exportBundle:t,organizationId:r,chain:i}=e;if(!this.__iframeStamper)throw new P.kW("Cannot proceed with your request");let n="solana"===i||"SOL"===i?q.PX.Solana:q.PX.Hexadecimal;try{return yield this.__iframeStamper.injectKeyExportBundle(t,r,n)}catch(e){throw U.error("Error while verifying export private key",e),e}})}exportPrivateKey(e){return S(this,arguments,void 0,function*(e){let{privateKeyId:t,organizationId:r}=e,i=null==Y?void 0:Y.apiKeyStamper;if(i&&(this.__turnkeyClient=new z.TF({baseUrl:G},i)),!this.__iframeStamper||!this.__publicKey||!this.__turnkeyClient||!t)throw new P.kW("Cannot proceed with your request");try{return(yield this.__turnkeyClient.exportPrivateKey({organizationId:r,parameters:{privateKeyId:t,targetPublicKey:this.__publicKey},timestampMs:String(Date.now()),type:"ACTIVITY_TYPE_EXPORT_PRIVATE_KEY"})).activity}catch(e){throw U.error("[TK] Error while completing export private key process",e),e}})}exportWallet(e){return S(this,arguments,void 0,function*(e){let{walletId:t,organizationId:r,address:i}=e,n=null==Y?void 0:Y.apiKeyStamper;if(n&&(this.__turnkeyClient=new z.TF({baseUrl:G},n)),!this.__iframeStamper||!this.__publicKey||!this.__turnkeyClient||!t)throw new P.kW("Cannot proceed with your request");try{if(i)return(yield this.__turnkeyClient.exportWalletAccount({organizationId:r,parameters:{address:i,targetPublicKey:this.__publicKey},timestampMs:String(Date.now()),type:"ACTIVITY_TYPE_EXPORT_WALLET_ACCOUNT"})).activity;return(yield this.__turnkeyClient.exportWallet({organizationId:r,parameters:{targetPublicKey:this.__publicKey,walletId:t},timestampMs:String(Date.now()),type:"ACTIVITY_TYPE_EXPORT_WALLET"})).activity}catch(e){throw U.error("[TK] Error while completing export wallet process",e),e}})}}class Z extends D.VY{getWebAuthnAttestation(){return S(this,void 0,void 0,function*(){let e;let t=O(),r=O(),{email:i,passkeyIdentifier:n}=this;if(!i&&!n)throw Error("Email or passkeyIdentifier must be set to register a webauthn credential.");let s=i||"".concat(this.appName," - ").concat(n),o={publicKey:{authenticatorSelection:{authenticatorAttachment:void 0,requireResidentKey:!1,residentKey:"preferred",userVerification:"discouraged"},challenge:t,pubKeyCredParams:[{alg:-7,type:"public-key"}],rp:{id:(0,P.KT)(),name:this.appName},user:{displayName:s,id:r,name:i||"".concat(this.appName," - ").concat(n)}}};try{e=yield F.getWebAuthnAttestation(o)}catch(t){U.warn("Unable to register webauthn credential on the current page's TLD ".concat((0,P.KT)(),". Falling back to using hostname. ").concat(P.mi.getHostname()),t),o.publicKey.rp.id=P.mi.getHostname(),e=yield F.getWebAuthnAttestation(o)}return{attestation:{attestationObject:e.attestationObject,clientDataJson:e.clientDataJson,credentialId:e.credentialId,transports:N(e.transports)},challenge:A(t),displayName:s}})}getAuthenticatorHandler(){return this.__authenticatorMethodHandler}getExportHandler(){return this.__exportHandler}get email(){return this._email}setEmail(e){this._email=e}get phone(){return this._phone}setPhone(e){this._phone=e}get passkeyIdentifier(){return this._passkeyIdentifier}setPasskeyIdentifier(e){this._passkeyIdentifier=e}clearEmail(){this._email=null}getAddress(){return S(this,void 0,void 0,function*(){var e;return null===(e=this.verifiedCredential)||void 0===e?void 0:e.address})}getConnectedAccounts(){return S(this,void 0,void 0,function*(){return(this.verifiedCredentials||[]).map(e=>null==e?void 0:e.address).filter(e=>"string"==typeof e)})}get turnkeyAddress(){var e;let{address:t}=null!==(e=this.verifiedCredential)&&void 0!==e?e:{};return t}get walletProperties(){let{walletProperties:e}=this.verifiedCredential||{};return e}set verifiedCredentials(e){this._verifiedCredentials=e}get verifiedCredentials(){return this._verifiedCredentials}set verifiedCredential(e){this._verifiedCredential=e}get verifiedCredential(){return this._verifiedCredential}setSessionKeyFetcher(e){this.createOrRestoreSessionFetcherFunction=e}setSessionKeyRemoveFunction(e){this.removeSessionKeysFunction=e}createOrRestoreSession(){return S(this,arguments,void 0,function*(){let{ignoreRestore:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isSessionKeyCompatible()||Z.isLoadingSession)return;if(!this.createOrRestoreSessionFetcherFunction)throw new P.kW("Cannot register session key to init provider");let{sessionKeys:t}=Z;if((null==t?void 0:t.publicKey)&&!(new Date>=new Date(t.expirationDate)))return t.publicKey;try{Z.isLoadingSession=!0;let t=yield this.createOrRestoreSessionFetcherFunction({ignoreRestore:e});return Z.sessionKeys=t,Z.apiKeyStamper=new C.z9({apiPrivateKey:t.privateKey,apiPublicKey:t.publicKey}),Y.apiKeyStamper=Z.apiKeyStamper,U.metaData.set("sessionApiPublicKey",t.publicKey),t.publicKey}catch(e){throw new P.kW("Failed to create or restore session")}finally{Z.isLoadingSession=!1}})}isSessionKeyCompatible(){var e;let t=null===(e=this.verifiedCredential)||void 0===e?void 0:e.walletProperties;return!!(null==t?void 0:t.isSessionKeyCompatible)}isSessionActive(){return S(this,void 0,void 0,function*(){return!!((yield this.getAddress())&&Z.sessionKeys&&Z.apiKeyStamper)})}get sessionKeys(){return Z.sessionKeys}setLoggerMetadata(){var e,t,r;U.metaData.set("turnkeySubOrganizationId",null===(t=null===(e=this._verifiedCredential)||void 0===e?void 0:e.walletProperties)||void 0===t?void 0:t.turnkeySubOrganizationId),U.metaData.set("walletId",null===(r=this._verifiedCredential)||void 0===r?void 0:r.id);let i="Unknown";this.isSessionKeyCompatible()?i="SessionKeys":"passkey"===this.__authenticatorMethodHandler.recoveryType?i="Passkey":"email"===this.__authenticatorMethodHandler.recoveryType&&(i="EmailAuth"),U.metaData.set("authMethod",i)}constructor(e,t){if(super(t),this.requiresNonDynamicEmailOtp=!1,this.isEmbeddedWallet=!0,this.removeSessionKeys=()=>S(this,void 0,void 0,function*(){Z.sessionKeys=void 0,Z.apiKeyStamper=void 0,Y.apiKeyStamper=void 0}),!t.appName)throw Error("appName not set");this.name=e.name,this.overrideKey=e.key,this.appName=t.appName,this.__authenticatorMethodHandler=V,this.__exportHandler=new Y}}Z.isLoadingSession=!1;let J={Turnkey:{key:"turnkey",name:"Turnkey"},TurnkeyHD:{key:"turnkeyhd",name:"Turnkey HD"}},Q=(e,t)=>null==e?void 0:e.reduce((r,i)=>{var n;if((null===(n=i.walletName)||void 0===n?void 0:n.startsWith("turnkey"))&&t===i.chain){let t=e.find(e=>e.signerRefId===i.id),n=null==t?void 0:t.id,s=null==t?void 0:t.address;r.push(Object.assign(Object.assign({},i),{smartWalletRefAddress:s,smartWalletRefId:n}))}return r},[]);function X(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((i=i.apply(e,t||[])).next())})}(0,E.J)("@dynamic-labs/embedded-wallet","4.0.0-alpha.7"),"function"==typeof SuppressedError&&SuppressedError;var ee=r(86199),et=r(38568),er=r(91969),ei=r(49127),en=r(43978),es=r(52067);async function eo(e){let{client:t,organizationId:r,signWith:i}=e,{ethereumAddress:n}=e;if(!i)throw new z.eM({message:"Missing signWith parameter"});if((0,ee.U)(i))n=i;else if(!n){let e=await t.getPrivateKey({privateKeyId:i,organizationId:r});if("string"!=typeof(n=e.privateKey.addresses.find(e=>"ADDRESS_FORMAT_ETHEREUM"===e.format)?.address)||!n)throw new z.eM({message:`Unable to find Ethereum address for key ${i} under organization ${r}`})}return(0,es.A)({address:n,signMessage:function({message:e}){return ea(t,e,r,i)},signTransaction:function(e,n){return ec(t,e,n?.serializer?n.serializer:et.D,r,i)},signTypedData:function(e){return eu(t,e,r,i)}})}async function ea(e,t,r,i){let n=(0,er.r)(t),s=await ed(e,n,r,i);return`${s}`}async function ec(e,t,r,i,n){let s=r(t).replace(/^0x/,"");return await el(e,s,i,n)}async function eu(e,t,r,i){let n=(0,ei.Jv)(t);return await ed(e,n,r,i)}async function el(e,t,r,i){let n;try{n=await eh(e,t,r,i)}catch(e){if(e instanceof z.eM)throw e;throw new z.eM({message:`Failed to sign transaction: ${e.message}`,cause:e})}return`0x${n}`}async function eh(e,t,r,i){if(e instanceof z.TF){let{activity:n}=await e.signTransaction({type:"ACTIVITY_TYPE_SIGN_TRANSACTION_V2",organizationId:r,parameters:{signWith:i,type:"TRANSACTION_TYPE_ETHEREUM",unsignedTransaction:t},timestampMs:String(Date.now())}),{id:s,status:o,type:a}=n;if("ACTIVITY_STATUS_COMPLETED"!==n.status)throw new z.eM({message:`Invalid activity status: ${n.status}`,activityId:s,activityStatus:o,activityType:a});return ep(n?.result?.signTransactionResult?.signedTransaction)}{let r=await e.signTransaction({signWith:i,type:"TRANSACTION_TYPE_ETHEREUM",unsignedTransaction:t});return ep(r?.signedTransaction)}}async function ed(e,t,r,i){let n;try{n=await ef(e,t,r,i)}catch(e){if(e instanceof z.eM)throw e;throw new z.eM({message:`Failed to sign: ${e.message}`,cause:e})}return n}async function ef(e,t,r,i){let n;if(e instanceof z.TF){let{activity:s}=await e.signRawPayload({type:"ACTIVITY_TYPE_SIGN_RAW_PAYLOAD_V2",organizationId:r,parameters:{signWith:i,payload:t,encoding:"PAYLOAD_ENCODING_HEXADECIMAL",hashFunction:"HASH_FUNCTION_NO_OP"},timestampMs:String(Date.now())}),{id:o,status:a,type:c}=s;if("ACTIVITY_STATUS_COMPLETED"!==a)throw new z.eM({message:`Invalid activity status: ${s.status}`,activityId:o,activityStatus:a,activityType:c});n=ep(s?.result?.signRawPayloadResult)}else n=await e.signRawPayload({signWith:i,payload:t,encoding:"PAYLOAD_ENCODING_HEXADECIMAL",hashFunction:"HASH_FUNCTION_NO_OP"});return ep((0,en.V)({r:`0x${n.r}`,s:`0x${n.s}`,v:"00"===n.v?27n:28n}))}function ep(e){if(null==e)throw Error(`Got unexpected ${JSON.stringify(e)}`);return e}var eg=r(9839),ey=r(38335),ev=r(5366),em=r(33476);class e_ extends Z{getLastUsedChainId(){var e;return this.lastUsedChainId?this.lastUsedChainId:(null===(e=this.evmNetworks)||void 0===e?void 0:e.length)?this.evmNetworks[0].chainId:void 0}getNetwork(){return X(this,void 0,void 0,function*(){var e;return null===(e=yield this.getSigner())||void 0===e?void 0:e.getChainId()})}supportsNetworkSwitching(){return!0}switchNetwork(e){return X(this,arguments,void 0,function*(e){let{networkChainId:t}=e;this.lastUsedChainId=t,this._selectedChainId=t,yield this.refreshTurnkeyAccount(),this.emit("chainChange",{chain:t.toString()})})}setVerifiedCredentials(e){let t=Q(e,"eip155"),[r]=t;JSON.stringify(this.verifiedCredentials)!==JSON.stringify(t)&&(this.verifiedCredential=r,this.verifiedCredentials=t,this.refreshTurnkeyAccount())}validateActiveWallet(e){return X(this,void 0,void 0,function*(){var t,r;let i=(null===(t=this.verifiedCredential)||void 0===t?void 0:t.address)||"";if(!(0,D.Wr)(i,e,this.connectedChain)){let t=null===(r=this.verifiedCredentials)||void 0===r?void 0:r.find(t=>(null==t?void 0:t.address)===e);if(!t)throw new P.kW("Account not found");this.verifiedCredential=t,this.refreshTurnkeyAccount()}})}getRpcUrl(){let e=this._selectedChainId;return(0,D.GO)({chainId:e,networks:this.evmNetworks})}getBalance(e){return X(this,void 0,void 0,function*(){let t=this.getRpcUrl();if(!t)return;let r=(0,eg.v)({transport:(0,ey.d)(t)}),i=yield r.getBalance({address:e});return(0,ev.d)(i)})}signMessage(e){return X(this,void 0,void 0,function*(){let t=yield this.getSigner();if(!t)throw Error("Signer not found");return t.signMessage({message:e})})}getPublicClient(){return X(this,void 0,void 0,function*(){var e,t;if(0===this.evmNetworks.length)return;let r=null!==(e=yield this.getNetwork())&&void 0!==e?e:1,i={cosmos:[],evm:this.evmNetworks,solana:[],starknet:void 0};if(!this.chainRpcProviders)return;let n=this.chainRpcProviders.getProviders(i);return null===(t=this.chainRpcProviders.getEvmProviderByChainId(n,r))||void 0===t?void 0:t.provider})}getSigner(){return X(this,void 0,void 0,function*(){return yield this.getTurnkeyAccount(),this.getWalletClient()})}getTurnkeyClient(){var e;let t=(0,P.KT)();t||(t=P.mi.getHostname());let r=F.createWebauthnStamper({rpId:t}),i=null==Z?void 0:Z.apiKeyStamper;return this.__turnkeyClient=null!==(e=this.getAuthenticatorHandler().client)&&void 0!==e?e:new z.TF({baseUrl:"https://api.turnkey.com"},null!=i?i:r),this.__turnkeyClient}getAccount(){return X(this,void 0,void 0,function*(){var e,t,r;return this.isSessionKeyCompatible()&&(null===(e=this.__turnkeyClient)||void 0===e?void 0:e.stamper)instanceof C.z9||("passkey"===this.getAuthenticatorHandler().recoveryType&&(null===(t=this.__turnkeyClient)||void 0===t?void 0:t.stamper)instanceof q.rr||"email"===this.getAuthenticatorHandler().recoveryType&&(null===(r=this.__turnkeyClient)||void 0===r?void 0:r.stamper)instanceof H.S||this.__turnkeyClient!==this.getAuthenticatorHandler().client)&&(yield this.refreshTurnkeyAccount()),this._turnkeyAccount})}getWalletClient(){let e=this.networkRpcUrl,t=this._turnkeyAccount,r=this.currentEvmNetwork;if(t&&e&&r)return(0,em.No)({account:this.getAccount.bind(this),address:this.turnkeyAddress,chain:(0,em.uy)(r),transport:(0,ey.d)(e),walletConnector:this,walletUiUtils:this.walletUiUtils})}get currentChainId(){var e,t,r;return null!==(e=this._selectedChainId)&&void 0!==e?e:null===(r=null===(t=this.evmNetworks)||void 0===t?void 0:t[0])||void 0===r?void 0:r.chainId}get lastUsedChainId(){let e=localStorage.getItem(e_.lastUsedChainIdStorageKey);if(e)try{let t=parseInt(e);if(isNaN(t))return;if(!this.evmNetworks.some(e=>e.chainId===t)){let e=this.evmNetworks[0].chainId;return this.lastUsedChainId=e,this.lastUsedChainId}return t}catch(e){U.error(e);return}}set lastUsedChainId(e){void 0===e?localStorage.removeItem(e_.lastUsedChainIdStorageKey):localStorage.setItem(e_.lastUsedChainIdStorageKey,e.toString())}get networkRpcUrl(){let e=this.currentChainId;if(this.evmNetworks.find(t=>t.chainId===e))return(0,D.GO)({chainId:e,networks:this.evmNetworks})}get currentEvmNetwork(){let e=this.currentChainId;return this.evmNetworks.find(t=>t.chainId===e)}internalSignTransaction(e){return X(this,arguments,void 0,function*(e){let{transaction:t,args:r,address:i,turnkeySubOrganizationId:n}=e;return this.doRetryableTurnkeyAction({action:e=>e.signTransaction(t,r),activityType:"SignTransaction",address:i,turnkeySubOrganizationId:n})})}internalSignTypedData(e){return X(this,arguments,void 0,function*(e){let{typedData:t,address:r,turnkeySubOrganizationId:i}=e;return this.doRetryableTurnkeyAction({action:e=>e.signTypedData(t),activityType:"SignTypedData",address:r,turnkeySubOrganizationId:i})})}internalSignMessage(e){return X(this,arguments,void 0,function*(e){let{message:t,address:r,turnkeySubOrganizationId:i}=e;return this.doRetryableTurnkeyAction({action:e=>e.signMessage({message:t}),activityType:"SignMessage",address:r,turnkeySubOrganizationId:i})})}doRetryableTurnkeyAction(e){return X(this,arguments,void 0,function*(e){let{action:t,activityType:r,address:i,turnkeySubOrganizationId:n}=e;yield this.createOrRestoreSession();let s=yield this.createTurnkeyAccount({address:i,turnkeySubOrganizationId:n});try{return yield t(s)}catch(e){if(M.some(t=>e.message.includes(t)))return yield this.removeSessionKeys(),yield this.createOrRestoreSession({ignoreRestore:!0}),t(s=yield this.createTurnkeyAccount({address:i,turnkeySubOrganizationId:n}));throw U.error("[TK] failed to perform ".concat(r," activity"),e),e}})}createTurnkeyAccount(e){return X(this,arguments,void 0,function*(e){let{address:t,turnkeySubOrganizationId:r}=e;return eo({client:this.getTurnkeyClient(),ethereumAddress:t,organizationId:r,signWith:t})})}refreshTurnkeyAccount(){return X(this,void 0,void 0,function*(){return this._turnkeyAccount=void 0,this.getTurnkeyAccount()})}getTurnkeyAccount(){return X(this,void 0,void 0,function*(){var e,t;if(this._turnkeyAccount)return this._turnkeyAccount;let{turnkeySubOrganizationId:r}=null!==(e=this.walletProperties)&&void 0!==e?e:{},{address:i}=null!==(t=this.verifiedCredential)&&void 0!==t?t:{};if(r&&i)return this._turnkeyAccount=(0,es.A)({address:i,signMessage:e=>X(this,[e],void 0,function*(e){let{message:t}=e;return this.internalSignMessage({address:i,message:t,turnkeySubOrganizationId:r})}),signTransaction:(e,t)=>X(this,void 0,void 0,function*(){return this.internalSignTransaction({address:i,args:t,transaction:e,turnkeySubOrganizationId:r})}),signTypedData:e=>X(this,void 0,void 0,function*(){return this.internalSignTypedData({address:i,turnkeySubOrganizationId:r,typedData:e})})}),this.setLoggerMetadata(),this._turnkeyAccount})}createUiTransaction(e){return X(this,void 0,void 0,function*(){yield this.validateActiveWallet(e);let t=this.getWalletClient(),r=yield this.getPublicClient();if(!r||!t)throw new P.kW("No public client available");return(0,em.mu)({from:e,publicClient:r,walletClient:t})})}constructor(e,t){var r;super(e,t),this.walletFallback={brand:{alt:"Turnkey Wallet",spriteId:"turnkey"},name:"Turnkey HD"},this.ChainWallet=em.hp,this.connectedChain="EVM",this.supportedChains=["ETH","EVM"],this.verifiedCredentialChain="eip155",this.stampCreateWalletAccountRequest=e=>X(this,[e],void 0,function*(e){let{request:t}=e;return yield this.createOrRestoreSession(),this.getTurnkeyClient().stampCreateWalletAccounts(t)}),this.evmNetworks=(0,P.fu)(t.evmNetworks),this.walletUiUtils=t.walletUiUtils,this._turnkeyAccount=void 0,this._selectedChainId=this.getLastUsedChainId(),this.chainRpcProviders=t.chainRpcProviders,null===(r=this.chainRpcProviders)||void 0===r||r.registerEvmProviders(),this.__turnkeyClient=this.getTurnkeyClient()}}e_.lastUsedChainIdStorageKey="turnkey-last-used-chain-id";let eb=e=>{var t;return(null===(t=e.apiProviders)||void 0===t?void 0:t.turnkey)?[e_.bind(null,J.TurnkeyHD),e_.bind(null,J.Turnkey)]:[]};function ew(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((i=i.apply(e,t||[])).next())})}(0,E.J)("@dynamic-labs/embedded-wallet-evm","4.0.0-alpha.7"),"function"==typeof SuppressedError&&SuppressedError;var eE=r(3408),eS=r(69266),eI=r(79770),eC=r(939);class eD{getInstalledProvider(){let e=this.getEip6963Config();if(e){let t=this.eip6963ProviderLookup(e.rdns);if(t)return t}let t=this.getInjectedConfig();if(t&&t.extensionLocators&&t.extensionLocators.length)return this.installedProviderLookup(t.extensionLocators)}getEip6963Config(){if(this.wallet&&this.wallet.eip6963Config)return this.wallet.eip6963Config}getInjectedConfig(){if(!this.wallet||!this.wallet.injectedConfig)return;let{injectedConfig:e}=this.wallet;return e.find(e=>"evm"===e.chain)}installedProviders(){let e=this.getInjectedConfig();if(!e)return[];let t=[];if(e.windowLocations)for(let r of e.windowLocations){let e=(0,P.vj)(r);e&&e.length&&t.push(...e)}return window.ethereum&&(window.ethereum.providers&&window.ethereum.providers.length?window.ethereum.providers.forEach(e=>t.push(e)):t.push(window.ethereum)),t}installedProviderLookup(e){let t=this.installedProviders();return(0,D.VN)(t,e)}eip6963ProviderLookup(e){var t;let{providers:r}=P.ln.get();return null===(t=r.find(t=>{var r;return(null===(r=null==t?void 0:t.info)||void 0===r?void 0:r.rdns)===e}))||void 0===t?void 0:t.provider}isInstalledHelper(){return void 0!==this.findProvider()}findProvider(){return this.connector.findProvider()}findWalletClient(e){let t=this.findProvider();if(t)return(0,eS.K)({account:this.connector.getActiveAccount(),chain:e?em.zk[e]:this.connector.getActiveChain(),transport:(0,eI.P)(t)})}getAddress(){return ew(this,void 0,void 0,function*(){let e=this.findWalletClient();return e?this.getAddressWithProvider(e):Promise.resolve(void 0)})}getAddressWithProvider(e){return ew(this,void 0,void 0,function*(){try{let[t]=yield e.requestAddresses(),r=(0,eC.K)(t);return this.connector.setActiveAccount(r),r}catch(e){return D.kg.error(e),Promise.reject(e)}})}signMessage(e){return ew(this,void 0,void 0,function*(){let t=yield this.getAddress();if(!t)return Promise.resolve(void 0);let r=this.findWalletClient();return r?yield r.signMessage({account:t,message:e}):Promise.resolve(void 0)})}_setupEventListeners(e){let t=this.findProvider();if(t&&"on"in t){let{handleAccountChange:r,handleChainChange:i,handleDisconnect:n}=(0,D.nb)(e);return t.on("accountsChanged",r),t.on("chainChanged",i),t.on("disconnect",n),{tearDownEventListeners:()=>{let e=this.findProvider();e&&(r&&e.removeListener("accountsChanged",r),i&&e.removeListener("chainChanged",i),n&&e.removeListener("disconnect",n))}}}return t?"on"in t||D.kg.warn("Provider does not support event listeners",{connector:e,provider:t}):D.kg.warn("Provider not found",{connector:e}),{tearDownEventListeners:()=>{}}}constructor(e,t){this.wallet=e,this.connector=t}}var eP=r(19998),ek=r.n(eP),eA=r(49581),eO=r(90727),ex=r(27708),eR=r(49012),eN=r(41086);function eT(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function eM(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?eT(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function eL(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let r=eM(t),i=0;for(let t of e)r.set(t,i),i+=t.length;return eT(r)}var ej=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===c;)i++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<n)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw Error("Non-zero carry");n=h,t++}if(" "!==e[t]){for(var f=s-n;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(i+(s-f)),g=i;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*l+1>>>0,u=new Uint8Array(o);n!==s;){for(var h=t[n],d=0,f=o-1;(0!==h||d<i)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw Error("Non-zero carry");i=d,n++}for(var p=o-i;p!==o&&0===u[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw Error(`Non-${t} character`)}}};new Uint8Array(0);let eU=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},eq=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},ez=e=>new TextEncoder().encode(e),eH=e=>new TextDecoder().decode(e);class eB{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class eW{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return e$(this,e)}}class eF{constructor(e){this.decoders=e}or(e){return e$(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let e$=(e,t)=>new eF({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class eK{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new eB(e,t,r),this.decoder=new eW(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let eV=({name:e,prefix:t,encode:r,decode:i})=>new eK(e,t,r,i),eG=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=ej(r,t);return eV({prefix:e,name:t,encode:i,decode:e=>eq(n(e))})},eY=(e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,c=0,u=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);c=c<<r|s,(a+=r)>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw SyntaxError("Unexpected end of data");return o},eZ=(e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},eJ=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>eV({prefix:t,name:e,encode:e=>eZ(e,i,r),decode:t=>eY(t,i,r,e)}),eQ=eV({prefix:"\0",name:"identity",encode:e=>eH(e),decode:e=>ez(e)}),eX=eJ({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),e0=eJ({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),e1=eG({prefix:"9",name:"base10",alphabet:"0123456789"}),e3=eJ({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),e2=eJ({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),e5=eJ({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),e6=eJ({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),e8=eJ({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),e4=eJ({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),e9=eJ({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),e7=eJ({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),te=eJ({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),tt=eJ({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),tr=eJ({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),ti=eG({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tn=eG({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ts=eG({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),to=eG({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ta=eJ({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),tc=eJ({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),tu=eJ({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),tl=eJ({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),th=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),td=th.reduce((e,t,r)=>(e[r]=t,e),[]),tf=th.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),tp=eV({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=td[t],"")},decode:function(e){let t=[];for(let r of e){let e=tf[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var tg=function e(t,r,i){r=r||[];for(var n=i=i||0;t>=2147483648;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-n+1,r},ty=function e(t,r){var i,n=0,r=r||0,s=0,o=r,a=t.length;do{if(o>=a)throw e.bytes=0,RangeError("Could not decode varint");i=t[o++],n+=s<28?(127&i)<<s:(127&i)*Math.pow(2,s),s+=7}while(i>=128);return e.bytes=o-r,n};let tv=(e,t=0)=>[ty(e,t),ty.bytes],tm=(e,t,r=0)=>(tg(e,t,r),t),t_=e=>e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10,tb=(e,t)=>{let r=t.byteLength,i=t_(e),n=i+t_(r),s=new Uint8Array(n+r);return tm(e,s,0),tm(r,s,i),s.set(t,n),new tS(e,r,t,s)},tw=e=>{let t=eq(e),[r,i]=tv(t),[n,s]=tv(t.subarray(i)),o=t.subarray(i+s);if(o.byteLength!==n)throw Error("Incorrect length");return new tS(r,n,o,t)},tE=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&eU(e.bytes,t.bytes);class tS{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}let tI=({name:e,code:t,encode:r})=>new tC(e,t,r);class tC{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?tb(this.code,t):t.then(e=>tb(this.code,e))}throw Error("Unknown type, must be binary type")}}let tD=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),tP=tI({name:"sha2-256",code:18,encode:tD("SHA-256")}),tk=tI({name:"sha2-512",code:19,encode:tD("SHA-512")}),tA={code:0,name:"identity",encode:eq,digest:e=>tb(0,eq(e))},tO="raw",tx=85,tR=e=>eq(e),tN=e=>eq(e),tT=new TextEncoder,tM=new TextDecoder,tL="json",tj=512,tU=e=>tT.encode(JSON.stringify(e)),tq=e=>JSON.parse(tM.decode(e));class tz{constructor(e,t,r,i){this.code=t,this.version=e,this.multihash=r,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:tY,byteLength:tY,code:tG,version:tG,multihash:tG,bytes:tG,_baseCache:tY,asCID:tY})}toV0(){if(0===this.version)return this;{let{code:e,multihash:t}=this;if(e!==tF)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==t$)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return tz.createV0(t)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=tb(e,t);return tz.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&tE(this.multihash,e.multihash)}toString(e){let{bytes:t,version:r,_baseCache:i}=this;return 0===r?tB(t,i,e||ts.encoder):tW(t,i,e||e5.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return tZ(/^0\.0/,tJ),!!(e&&(e[tV]||e.asCID===e))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof tz)return e;if(null!=e&&e.asCID===e){let{version:t,code:r,multihash:i,bytes:n}=e;return new tz(t,r,i,n||tK(t,r,i.bytes))}if(null==e||!0!==e[tV])return null;{let{version:t,multihash:r,code:i}=e,n=tw(r);return tz.create(t,i,n)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");switch(e){case 0:if(t===tF)return new tz(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${tF}) block encoding`);case 1:{let i=tK(e,t,r.bytes);return new tz(e,t,r,i)}default:throw Error("Invalid version")}}static createV0(e){return tz.create(0,tF,e)}static createV1(e,t){return tz.create(1,e,t)}static decode(e){let[t,r]=tz.decodeFirst(e);if(r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=tz.inspectBytes(e),r=t.size-t.multihashSize,i=eq(e.subarray(r,r+t.multihashSize));if(i.byteLength!==t.multihashSize)throw Error("Incorrect length");let n=i.subarray(t.multihashSize-t.digestSize),s=new tS(t.multihashCode,t.digestSize,n,i);return[0===t.version?tz.createV0(s):tz.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,i]=tv(e.subarray(t));return t+=i,r},i=r(),n=tF;if(18===i?(i=0,t=0):1===i&&(n=r()),0!==i&&1!==i)throw RangeError(`Invalid CID version ${i}`);let s=t,o=r(),a=r(),c=t+a;return{version:i,codec:n,multihashCode:o,digestSize:a,multihashSize:c-s,size:c}}static parse(e,t){let[r,i]=tH(e,t),n=tz.decode(i);return n._baseCache.set(r,e),n}}let tH=(e,t)=>{switch(e[0]){case"Q":return[ts.prefix,(t||ts).decode(`${ts.prefix}${e}`)];case ts.prefix:return[ts.prefix,(t||ts).decode(e)];case e5.prefix:return[e5.prefix,(t||e5).decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},tB=(e,t,r)=>{let{prefix:i}=r;if(i!==ts.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let n=t.get(i);if(null!=n)return n;{let n=r.encode(e).slice(1);return t.set(i,n),n}},tW=(e,t,r)=>{let{prefix:i}=r,n=t.get(i);if(null!=n)return n;{let n=r.encode(e);return t.set(i,n),n}},tF=112,t$=18,tK=(e,t,r)=>{let i=t_(e),n=i+t_(t),s=new Uint8Array(n+r.byteLength);return tm(e,s,0),tm(t,s,i),s.set(r,n),s},tV=Symbol.for("@ipld/js-cid/CID"),tG={writable:!1,configurable:!1,enumerable:!0},tY={writable:!1,enumerable:!1,configurable:!1},tZ=(e,t)=>{if(e.test("0.0.0-dev"))console.warn(t);else throw Error(t)},tJ=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,tQ={...a,...c,...u,...l,...h,...d,...f,...p,...g,...y};function tX(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({...v,...m});let t0=tX("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),t1=tX("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=eM((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),t3={utf8:t0,"utf-8":t0,hex:tQ.base16,latin1:t1,ascii:t1,binary:t1,...tQ};function t2(e,t="utf8"){let r=t3[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?eT(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function t5(e,t="utf8"){let r=t3[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}var t6=r(28070),t8=function(e,t,r){if(r||2==arguments.length)for(var i,n=0,s=t.length;n<s;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},t4=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},t9=function(e){this.version=e,this.type="node",this.name="node",this.os=t6.platform},t7=function(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"},re=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},rt=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},rr=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ri=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],rn=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]],rs=r(72261),ro=r(48668),ra=r(13555),rc=r(22995);let ru={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var rl=r(28070);function rh(e,t){return e.includes(":")?[e]:t.chains||[]}let rd="base10",rf="base16",rp="base64pad",rg="utf8";function ry(){return t5((0,ex.randomBytes)(32),rf)}function rv(e){return t5((0,eR.vp)(t2(e,rg)),rf)}function rm(e){return Number(t5(e,rd))}function r_(e){let t=t2(e,rp),r=t.slice(0,1);if(1===rm(r)){let e=t.slice(1,33),i=t.slice(33,45);return{type:r,sealed:t.slice(45),iv:i,senderPublicKey:e}}let i=t.slice(1,13);return{type:r,sealed:t.slice(13),iv:i}}function rb(e){let t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function rw(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}var rE=Object.defineProperty,rS=Object.getOwnPropertySymbols,rI=Object.prototype.hasOwnProperty,rC=Object.prototype.propertyIsEnumerable,rD=(e,t,r)=>t in e?rE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rP=(e,t)=>{for(var r in t||(t={}))rI.call(t,r)&&rD(e,r,t[r]);if(rS)for(var r of rS(t))rC.call(t,r)&&rD(e,r,t[r]);return e};let rk={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function rA(){return"u">typeof rl&&"u">typeof rl.versions&&"u">typeof rl.versions.node}function rO(){return!(0,ro.getDocument)()&&!!(0,ro.getNavigator)()&&"ReactNative"===navigator.product}function rx(){return!rA()&&!!(0,ro.getNavigator)()&&!!(0,ro.getDocument)()}function rR(){return rO()?rk.reactNative:rA()?rk.node:rx()?rk.browser:rk.unknown}function rN(e,t){return e.filter(e=>t.includes(e)).length===e.length}function rT(e){return Object.fromEntries(e.entries())}function rM(e){return new Map(Object.entries(e))}function rL(e=rs.FIVE_MINUTES,t){let r,i,n;let s=(0,rs.toMiliseconds)(e||rs.FIVE_MINUTES);return{resolve:e=>{n&&r&&(clearTimeout(n),r(e))},reject:e=>{n&&i&&(clearTimeout(n),i(e))},done:()=>new Promise((e,o)=>{n=setTimeout(()=>{o(Error(t))},s),r=e,i=o})}}function rj(e,t,r){return new Promise(async(i,n)=>{let s=setTimeout(()=>n(Error(r)),t);try{let t=await e;i(t)}catch(e){n(e)}clearTimeout(s)})}function rU(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw Error(`Unknown expirer target type: ${e}`)}function rq(e){let[t,r]=e.split(":"),i={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)i.topic=r;else if("id"===t&&Number.isInteger(Number(r)))i.id=Number(r);else throw Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return i}function rz(e,t){return(0,rs.fromMiliseconds)((t||Date.now())+(0,rs.toMiliseconds)(e))}function rH(e){return Date.now()>=(0,rs.toMiliseconds)(e)}function rB(e,t){return`${e}${t?`:${t}`:""}`}function rW(e=[],t=[]){return[...new Set([...e,...t])]}async function rF({id:e,topic:t,wcDeepLink:i}){try{if(!i)return;let n="string"==typeof i?JSON.parse(i):i,s=n?.href;if("string"!=typeof s)return;s.endsWith("/")&&(s=s.slice(0,-1));let o=`${s}/wc?requestId=${e}&sessionTopic=${t}`,a=rR();a===rk.browser?o.startsWith("https://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,"_self","noreferrer noopener"):a===rk.reactNative&&"u">typeof(null==r.g?void 0:r.g.Linking)&&await r.g.Linking.openURL(o)}catch(e){console.error(e)}}async function r$(e,t){try{return await e.getItem(t)||(rx()?localStorage.getItem(t):void 0)}catch(e){console.error(e)}}function rK(e){return e?.relay||{protocol:"irn"}}function rV(e){let t=ru[e];if(typeof t>"u")throw Error(`Relay Protocol not supported: ${e}`);return t}var rG=Object.defineProperty,rY=Object.defineProperties,rZ=Object.getOwnPropertyDescriptors,rJ=Object.getOwnPropertySymbols,rQ=Object.prototype.hasOwnProperty,rX=Object.prototype.propertyIsEnumerable,r0=(e,t,r)=>t in e?rG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,r1=(e,t)=>{for(var r in t||(t={}))rQ.call(t,r)&&r0(e,r,t[r]);if(rJ)for(var r of rJ(t))rX.call(t,r)&&r0(e,r,t[r]);return e},r3=(e,t)=>rY(e,rZ(t));function r2(e){var t;let r=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),i=-1!==e.indexOf("?")?e.indexOf("?"):void 0,n=e.substring(0,r),s=e.substring(r+1,i).split("@"),o="u">typeof i?e.substring(i):"",a=rc.parse(o);return{protocol:n,topic:(t=s[0]).startsWith("//")?t.substring(2):t,version:parseInt(s[1],10),symKey:a.symKey,relay:function(e,t="-"){let r={},i="relay"+t;return Object.keys(e).forEach(t=>{if(t.startsWith(i)){let n=t.replace(i,""),s=e[t];r[n]=s}}),r}(a),expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function r5(e){let t=[];return e.forEach(e=>{let[r,i]=e.split(":");t.push(`${r}:${i}`)}),t}function r6(e){return e.includes(":")}function r8(e){return r6(e)?e.split(":")[0]:e}Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;let r4={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},r9={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function r7(e,t){let{message:r,code:i}=r9[e];return{message:t?`${r} ${t}`:r,code:i}}function ie(e,t){let{message:r,code:i}=r4[e];return{message:t?`${r} ${t}`:r,code:i}}function it(e,t){return!!Array.isArray(e)&&(!("u">typeof t)||!e.length||e.every(t))}function ir(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function ii(e){return typeof e>"u"}function is(e,t){return!!(t&&ii(e))||"string"==typeof e&&!!e.trim().length}function io(e,t){return!!(t&&ii(e))||"number"==typeof e&&!isNaN(e)}function ia(e){return!!(is(e,!1)&&e.includes(":"))&&2===e.split(":").length}function ic(e){let t=!0;return it(e)?e.length&&(t=e.every(e=>is(e,!1))):t=!1,t}function iu(e,t){let r=null;return Object.values(e).forEach(e=>{var i;let n;if(r)return;let s=(i=`${t}, namespace`,n=null,ic(e?.methods)?ic(e?.events)||(n=ie("UNSUPPORTED_EVENTS",`${i}, events should be an array of strings or empty array for no events`)):n=ie("UNSUPPORTED_METHODS",`${i}, methods should be an array of strings or empty array for no methods`),n);s&&(r=s)}),r}function il(e,t){let r=null;if(e&&ir(e)){let i;let n=iu(e,t);n&&(r=n);let s=(i=null,Object.values(e).forEach(e=>{var r,n;let s;if(i)return;let o=(r=e?.accounts,n=`${t} namespace`,s=null,it(r)?r.forEach(e=>{s||function(e){if(is(e,!1)&&e.includes(":")){let t=e.split(":");if(3===t.length){let e=t[0]+":"+t[1];return!!t[2]&&ia(e)}}return!1}(e)||(s=ie("UNSUPPORTED_ACCOUNTS",`${n}, account ${e} should be a string and conform to "namespace:chainId:address" format`))}):s=ie("UNSUPPORTED_ACCOUNTS",`${n}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),s);o&&(i=o)}),i);s&&(r=s)}else r=r7("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function ih(e){return is(e.protocol,!0)}function id(e){return"u">typeof e}function ip(e,t){return!(!ia(t)||!(function(e){let t=[];return Object.values(e).forEach(e=>{t.push(...r5(e.accounts))}),t})(e).includes(t))}function ig(e,t,r){let i=null,n=function(e){let t={};return Object.keys(e).forEach(r=>{var i;r.includes(":")?t[r]=e[r]:null==(i=e[r].chains)||i.forEach(i=>{t[i]={methods:e[r].methods,events:e[r].events}})}),t}(e),s=function(e){let t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{let i=r5(e[r].accounts);i?.forEach(i=>{t[i]={accounts:e[r].accounts.filter(e=>e.includes(`${i}:`)),methods:e[r].methods,events:e[r].events}})}}),t}(t),o=Object.keys(n),a=Object.keys(s),c=iy(Object.keys(e)),u=iy(Object.keys(t)),l=c.filter(e=>!u.includes(e));return l.length&&(i=r7("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(t).toString()}`)),rN(o,a)||(i=r7("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(t).forEach(e=>{if(!e.includes(":")||i)return;let n=r5(t[e].accounts);n.includes(e)||(i=r7("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}
        Required: ${e}
        Approved: ${n.toString()}`))}),o.forEach(e=>{i||(rN(n[e].methods,s[e].methods)?rN(n[e].events,s[e].events)||(i=r7("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):i=r7("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))}),i}function iy(e){return[...new Set(e.map(e=>e.includes(":")?e.split(":")[0]:e))]}function iv(){let e=rR();return new Promise(t=>{switch(e){case rk.browser:t(rx()&&navigator?.onLine);break;case rk.reactNative:t(im());break;case rk.node:default:t(!0)}})}async function im(){if(rO()&&"u">typeof r.g&&null!=r.g&&r.g.NetInfo){let e=await (null==r.g?void 0:r.g.NetInfo.fetch());return e?.isConnected}return!0}let i_={};class ib{static get(e){return i_[e]}static set(e,t){i_[e]=t}static delete(e){delete i_[e]}}let iw=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,iE=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,iS=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function iI(e,t){if("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`);return}return t}function iC(e,t={}){if("string"!=typeof e)return e;let r=e.trim();if('"'===e[0]&&e.endsWith('"')&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){let e=r.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;if("undefined"===e)return;if("null"===e)return null;if("nan"===e)return Number.NaN;if("infinity"===e)return Number.POSITIVE_INFINITY;if("-infinity"===e)return Number.NEGATIVE_INFINITY}if(!iS.test(e)){if(t.strict)throw SyntaxError("[destr] Invalid JSON");return e}try{if(iw.test(e)||iE.test(e)){if(t.strict)throw Error("[destr] Possible prototype pollution");return JSON.parse(e,iI)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}var iD=r(90687).Buffer;function iP(e,...t){try{var r;return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}}function ik(e){if(function(e){let t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){let t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return ik(e.toJSON());throw Error("[unstorage] Cannot stringify value!")}function iA(){if(void 0===iD)throw TypeError("[unstorage] Buffer is not supported!")}let iO="base64:";function ix(e){return e?e.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function iR(e){return(e=ix(e))?e+":":""}let iN=()=>{let e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function iT(e,t,r){return e.watch?e.watch((e,i)=>t(e,r+i)):()=>{}}async function iM(e){"function"==typeof e.dispose&&await iP(e.dispose)}function iL(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function ij(e,t){let r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);let i=iL(r);return(e,r)=>i.then(i=>r(i.transaction(t,e).objectStore(t)))}function iU(){return i||(i=ij("keyval-store","keyval")),i}function iq(e,t=iU()){return t("readonly",t=>iL(t.get(e)))}let iz=e=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString()+"n":t),iH=e=>JSON.parse(e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3'),(e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t);function iB(e){if("string"!=typeof e)throw Error(`Cannot safe json parse value of type ${typeof e}`);try{return iH(e)}catch(t){return e}}function iW(e){return"string"==typeof e?e:iz(e)||""}var iF=(e={})=>{let t;let r=e.base&&e.base.length>0?`${e.base}:`:"",i=e=>r+e;return e.dbName&&e.storeName&&(t=ij(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof await iq(i(e),t)>"u"),getItem:async e=>await iq(i(e),t)??null,setItem:(e,r)=>(function(e,t,r=iU()){return r("readwrite",r=>(r.put(t,e),iL(r.transaction)))})(i(e),r,t),removeItem:e=>(function(e,t=iU()){return t("readwrite",t=>(t.delete(e),iL(t.transaction)))})(i(e),t),getKeys:()=>(function(e=iU()){return e("readonly",e=>{var t;if(e.getAllKeys)return iL(e.getAllKeys());let r=[];return(t=e=>r.push(e.key),e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},iL(e.transaction)).then(()=>r)})})(t),clear:()=>(function(e=iU()){return e("readwrite",e=>(e.clear(),iL(e.transaction)))})(t)}};class i${constructor(){this.indexedDb=function(e={}){let t={mounts:{"":e.driver||iN()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(let r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},i=(e,r)=>t.mountpoints.filter(t=>t.startsWith(e)||r&&e.startsWith(t)).map(r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]})),n=(e,r)=>{if(t.watching)for(let i of(r=ix(r),t.watchListeners))i(e,r)},s=async()=>{if(!t.watching)for(let e in t.watching=!0,t.mounts)t.unwatch[e]=await iT(t.mounts[e],n,e)},o=async()=>{if(t.watching){for(let e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},a=(e,t,i)=>{let n=new Map,s=e=>{let t=n.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},n.set(e.base,t)),t};for(let i of e){let e="string"==typeof i,n=ix(e?i:i.key),o=e?void 0:i.value,a=e||!i.options?t:{...t,...i.options},c=r(n);s(c).items.push({key:n,value:o,relativeKey:c.relativeKey,options:a})}return Promise.all([...n.values()].map(e=>i(e))).then(e=>e.flat())},c={hasItem(e,t={}){let{relativeKey:i,driver:n}=r(e=ix(e));return iP(n.hasItem,i,t)},getItem(e,t={}){let{relativeKey:i,driver:n}=r(e=ix(e));return iP(n.getItem,i,t).then(e=>iC(e))},getItems:(e,t)=>a(e,t,e=>e.driver.getItems?iP(e.driver.getItems,e.items.map(e=>({key:e.relativeKey,options:e.options})),t).then(t=>t.map(t=>({key:function(...e){return ix(e.join(":"))}(e.base,t.key),value:iC(t.value)}))):Promise.all(e.items.map(t=>iP(e.driver.getItem,t.relativeKey,t.options).then(e=>({key:t.key,value:iC(e)}))))),getItemRaw(e,t={}){let{relativeKey:i,driver:n}=r(e=ix(e));return n.getItemRaw?iP(n.getItemRaw,i,t):iP(n.getItem,i,t).then(e=>"string"==typeof e&&e.startsWith(iO)?(iA(),iD.from(e.slice(iO.length),"base64")):e)},async setItem(e,t,i={}){if(void 0===t)return c.removeItem(e);let{relativeKey:s,driver:o}=r(e=ix(e));o.setItem&&(await iP(o.setItem,s,ik(t),i),o.watch||n("update",e))},async setItems(e,t){await a(e,t,async e=>{if(e.driver.setItems)return iP(e.driver.setItems,e.items.map(e=>({key:e.relativeKey,value:ik(e.value),options:e.options})),t);e.driver.setItem&&await Promise.all(e.items.map(t=>iP(e.driver.setItem,t.relativeKey,ik(t.value),t.options)))})},async setItemRaw(e,t,i={}){if(void 0===t)return c.removeItem(e,i);let{relativeKey:s,driver:o}=r(e=ix(e));if(o.setItemRaw)await iP(o.setItemRaw,s,t,i);else{if(!o.setItem)return;await iP(o.setItem,s,"string"==typeof t?t:(iA(),iO+iD.from(t).toString("base64")),i)}o.watch||n("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t});let{relativeKey:i,driver:s}=r(e=ix(e));s.removeItem&&(await iP(s.removeItem,i,t),(t.removeMeta||t.removeMata)&&await iP(s.removeItem,i+"$",t),s.watch||n("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t});let{relativeKey:i,driver:n}=r(e=ix(e)),s=Object.create(null);if(n.getMeta&&Object.assign(s,await iP(n.getMeta,i,t)),!t.nativeOnly){let e=await iP(n.getItem,i+"$",t).then(e=>iC(e));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){let r=i(e=iR(e),!0),n=[],s=[];for(let e of r){for(let r of(await iP(e.driver.getKeys,e.relativeBase,t))){let t=e.mountpoint+ix(r);n.some(e=>t.startsWith(e))||s.push(t)}n=[e.mountpoint,...n.filter(t=>!t.startsWith(e.mountpoint))]}return e?s.filter(t=>t.startsWith(e)&&"$"!==t[t.length-1]):s.filter(e=>"$"!==e[e.length-1])},async clear(e,t={}){e=iR(e),await Promise.all(i(e,!1).map(async e=>e.driver.clear?iP(e.driver.clear,e.relativeBase,t):e.driver.removeItem?Promise.all((await e.driver.getKeys(e.relativeBase||"",t)).map(r=>e.driver.removeItem(r,t))):void 0))},async dispose(){await Promise.all(Object.values(t.mounts).map(e=>iM(e)))},watch:async e=>(await s(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter(t=>t!==e),0===t.watchListeners.length&&await o()}),async unwatch(){t.watchListeners=[],await o()},mount(e,r){if((e=iR(e))&&t.mounts[e])throw Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort((e,t)=>t.length-e.length)),t.mounts[e]=r,t.watching&&Promise.resolve(iT(r,n,e)).then(r=>{t.unwatch[e]=r}).catch(console.error),c},async unmount(e,r=!0){(e=iR(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e](),delete t.unwatch[e]),r&&await iM(t.mounts[e]),t.mountpoints=t.mountpoints.filter(t=>t!==e),delete t.mounts[e])},getMount(e=""){let t=r(e=ix(e)+":");return{driver:t.driver,base:t.base}},getMounts:(e="",t={})=>i(e=ix(e),t.parents).map(e=>({driver:e.driver,base:e.mountpoint})),keys:(e,t={})=>c.getKeys(e,t),get:(e,t={})=>c.getItem(e,t),set:(e,t,r={})=>c.setItem(e,t,r),has:(e,t={})=>c.hasItem(e,t),del:(e,t={})=>c.removeItem(e,t),remove:(e,t={})=>c.removeItem(e,t)};return c}({driver:iF({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){let t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,iW(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var iK="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof r.g?r.g:"u">typeof self?self:{},iV={exports:{}};function iG(e){var t;return[e[0],iB(null!=(t=e[1])?t:"")]}!function(){function e(){}e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){let e=this;Object.keys(e).forEach(function(t){e[t]=void 0,delete e[t]})},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),"u">typeof iK&&iK.localStorage?iV.exports=iK.localStorage:"u">typeof window&&window.localStorage?iV.exports=window.localStorage:iV.exports=new e}();class iY{constructor(){this.localStorage=iV.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(iG)}async getItem(e){let t=this.localStorage.getItem(e);if(null!==t)return iB(t)}async setItem(e,t){this.localStorage.setItem(e,iW(t))}async removeItem(e){this.localStorage.removeItem(e)}}let iZ=async(e,t,r)=>{let i="wc_storage_version",n=await t.getItem(i);if(n&&n>=1){r(t);return}let s=await e.getKeys();if(!s.length){r(t);return}let o=[];for(;s.length;){let r=s.shift();if(!r)continue;let i=r.toLowerCase();if(i.includes("wc@")||i.includes("walletconnect")||i.includes("wc_")||i.includes("wallet_connect")){let i=await e.getItem(r);await t.setItem(r,i),o.push(r)}}await t.setItem(i,1),r(t),iJ(e,o)},iJ=async(e,t)=>{t.length&&t.forEach(async t=>{await e.removeItem(t)})};class iQ{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};let e=new iY;this.storage=e;try{let t=new i$;iZ(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{let t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}}var iX=r(28258),i0=r(9390),i1=r.n(i0);let i3={level:"info"},i2="custom_context";var i5=Object.defineProperty,i6=Object.defineProperties,i8=Object.getOwnPropertyDescriptors,i4=Object.getOwnPropertySymbols,i9=Object.prototype.hasOwnProperty,i7=Object.prototype.propertyIsEnumerable,ne=(e,t,r)=>t in e?i5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,nt=(e,t)=>{for(var r in t||(t={}))i9.call(t,r)&&ne(e,r,t[r]);if(i4)for(var r of i4(t))i7.call(t,r)&&ne(e,r,t[r]);return e},nr=(e,t)=>i6(e,i8(t));function ni(e){return nr(nt({},e),{level:e?.level||i3.level})}function nn(e,t=i2){return typeof e.bindings>"u"?function(e,t=i2){return e[t]||""}(e,t):e.bindings().context||""}function ns(e,t,r=i2){let i=function(e,t,r=i2){let i=nn(e,r);return i.trim()?`${i}/${t}`:t}(e,t,r);return function(e,t,r=i2){return e[r]=t,e}(e.child({context:i}),i,r)}var no=r(20772);class na extends no.q{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class nc extends no.q{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class nu{constructor(e,t){this.logger=e,this.core=t}}class nl extends no.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class nh extends no.q{constructor(e){super()}}class nd{constructor(e,t,r,i){this.core=e,this.logger=t,this.name=r}}class nf extends no.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class np extends no.q{constructor(e,t){super(),this.core=e,this.logger=t}}class ng{constructor(e,t){this.projectId=e,this.logger=t}}class ny{constructor(e,t){this.projectId=e,this.logger=t}}class nv{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class nm{constructor(e){this.client=e}}var n_=r(67679);let nb="base64url",nw="base58btc";function nE(e){return t5(t2(iW(e),"utf8"),nb)}function nS(e){return["did","key","z"+t5(eL([t2("K36",nw),e]),nw)].join(":")}function nI(e=(0,ex.randomBytes)(32)){return n_._w(e)}async function nC(e,t,r,i,n=(0,rs.fromMiliseconds)(Date.now())){var s,o;let a={alg:"EdDSA",typ:"JWT"},c={iss:nS(i.publicKey),sub:e,aud:t,iat:n,exp:n+r},u=t2([nE((s={header:a,payload:c}).header),nE(s.payload)].join("."),"utf8");return[nE((o={header:a,payload:c,signature:n_.Xx(i.secretKey,u)}).header),nE(o.payload),t5(o.signature,nb)].join(".")}r(58430);let nD="INTERNAL_ERROR",nP="SERVER_ERROR",nk=[-32700,-32600,-32601,-32602,-32603],nA={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[nD]:{code:-32603,message:"Internal error"},[nP]:{code:-32e3,message:"Server error"}};function nO(e){return Object.keys(nA).includes(e)?nA[e]:nA[nP]}function nx(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?Error(`Unavailable ${r} RPC url at ${t}`):e}var nR=r(49857);function nN(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function nT(e=6){return BigInt(nN(e))}function nM(e,t,r){return{id:r||nN(),jsonrpc:"2.0",method:e,params:t}}function nL(e,t){return{id:e,jsonrpc:"2.0",result:t}}function nj(e,t,r){var i,n,s;return{id:e,jsonrpc:"2.0",error:void 0===(i=t)?nO(nD):("string"==typeof i&&(i=Object.assign(Object.assign({},nO(nP)),{message:i})),void 0!==r&&(i.data=r),n=i.code,nk.includes(n)&&(s=i.code,i=Object.values(nA).find(e=>e.code===s)||nA[nP]),i)}}class nU{}class nq extends nU{constructor(){super()}}class nz extends nq{constructor(e){super()}}function nH(e,t){let r=function(e){let t=e.match(RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==r&&new RegExp(t).test(r)}function nB(e){return nH(e,"^https?:")}function nW(e){return nH(e,"^wss?:")}function nF(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function n$(e){return nF(e)&&"method"in e}function nK(e){return nF(e)&&(nV(e)||nG(e))}function nV(e){return"result"in e}function nG(e){return"error"in e}class nY extends nz{constructor(e){super(e),this.events=new eP.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(nM(e.method,e.params||[],e.id||nT().toString()),t)}async requestStrict(e,t){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(e){i(e)}this.events.on(`${e.id}`,e=>{nG(e)?i(e.error):r(e.result)});try{await this.connection.send(e,t)}catch(e){i(e)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),nK(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}let nZ=()=>"u">typeof WebSocket||"u">typeof r.g&&"u">typeof r.g.WebSocket||"u">typeof window&&"u">typeof window.WebSocket||"u">typeof self&&"u">typeof self.WebSocket,nJ=e=>e.split("?")[0],nQ="u">typeof WebSocket?WebSocket:"u">typeof r.g&&"u">typeof r.g.WebSocket?r.g.WebSocket:"u">typeof window&&"u">typeof window.WebSocket?window.WebSocket:"u">typeof self&&"u">typeof self.WebSocket?self.WebSocket:r(62052);class nX{constructor(e){if(this.url=e,this.events=new eP.EventEmitter,this.registering=!1,!nW(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return"u">typeof this.socket}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(Error("Connection already closed"));return}this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(iW(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!nW(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(Error("WebSocket connection is missing or invalid"));e(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{let i=new URLSearchParams(e).get("origin"),n=(0,nR.isReactNative)()?{headers:{origin:i}}:{rejectUnauthorized:!RegExp("wss?://localhost(:d{2,5})?").test(e)},s=new nQ(e,[],n);nZ()?s.onerror=e=>{r(this.emitError(e.error))}:s.on("error",e=>{r(this.emitError(e))}),s.onopen=()=>{this.onOpen(s),t(s)}})}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?iB(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let r=this.parseError(t),i=nj(e,r.message||r.toString());this.events.emit("payload",i)}parseError(e,t=this.url){return nx(e,nJ(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){let t=this.parseError(Error(e?.message||`WebSocket connection failed for host: ${nJ(this.url)}`));return this.events.emit("register_error",t),t}}var n0=r(8855),n1=r.n(n0),n3=r(57136),n2=r.n(n3),n5=r(28070),n6=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===c;)i++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<n)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw Error("Non-zero carry");n=h,t++}if(" "!==e[t]){for(var f=s-n;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(i+(s-f)),g=i;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*l+1>>>0,u=new Uint8Array(o);n!==s;){for(var h=t[n],d=0,f=o-1;(0!==h||d<i)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw Error("Non-zero carry");i=d,n++}for(var p=o-i;p!==o&&0===u[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw Error(`Non-${t} character`)}}};let n8=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},n4=e=>new TextEncoder().encode(e),n9=e=>new TextDecoder().decode(e);class n7{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class se{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return sr(this,e)}}class st{constructor(e){this.decoders=e}or(e){return sr(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let sr=(e,t)=>new st({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class si{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new n7(e,t,r),this.decoder=new se(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let sn=({name:e,prefix:t,encode:r,decode:i})=>new si(e,t,r,i),ss=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=n6(r,t);return sn({prefix:e,name:t,encode:i,decode:e=>n8(n(e))})},so=(e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,c=0,u=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);c=c<<r|s,(a+=r)>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw SyntaxError("Unexpected end of data");return o},sa=(e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},sc=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>sn({prefix:t,name:e,encode:e=>sa(e,i,r),decode:t=>so(t,i,r,e)});var su=Object.freeze({__proto__:null,identity:sn({prefix:"\0",name:"identity",encode:e=>n9(e),decode:e=>n4(e)})}),sl=Object.freeze({__proto__:null,base2:sc({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),sh=Object.freeze({__proto__:null,base8:sc({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),sd=Object.freeze({__proto__:null,base10:ss({prefix:"9",name:"base10",alphabet:"0123456789"})}),sf=Object.freeze({__proto__:null,base16:sc({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:sc({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});let sp=sc({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),sg=sc({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sy=sc({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sv=sc({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),sm=sc({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),s_=sc({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});var sb=Object.freeze({__proto__:null,base32:sp,base32upper:sg,base32pad:sy,base32padupper:sv,base32hex:sm,base32hexupper:s_,base32hexpad:sc({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:sc({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:sc({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),sw=Object.freeze({__proto__:null,base36:ss({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:ss({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),sE=Object.freeze({__proto__:null,base58btc:ss({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:ss({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});let sS=sc({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});var sI=Object.freeze({__proto__:null,base64:sS,base64pad:sc({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:sc({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:sc({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});let sC=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),sD=sC.reduce((e,t,r)=>(e[r]=t,e),[]),sP=sC.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);var sk=Object.freeze({__proto__:null,base256emoji:sn({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=sD[t],"")},decode:function(e){let t=[];for(let r of e){let e=sP[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}})});function sA(e,t){var r,i=0,t=t||0,n=0,s=t,o=e.length;do{if(s>=o)throw sA.bytes=0,RangeError("Could not decode varint");r=e[s++],i+=n<28?(127&r)<<n:(127&r)*Math.pow(2,n),n+=7}while(r>=128);return sA.bytes=s-t,i}var sO=function e(t,r,i){r=r||[],i=i||0;for(var n=i;t>=2147483648;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-n+1,r};let sx=(e,t,r=0)=>(sO(e,t,r),t),sR=e=>e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10,sN=(e,t)=>{let r=t.byteLength,i=sR(e),n=i+sR(r),s=new Uint8Array(n+r);return sx(e,s,0),sx(r,s,i),s.set(t,n),new sT(e,r,t,s)};class sT{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}let sM=({name:e,code:t,encode:r})=>new sL(e,t,r);class sL{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?sN(this.code,t):t.then(e=>sN(this.code,e))}throw Error("Unknown type, must be binary type")}}let sj=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var sU=Object.freeze({__proto__:null,sha256:sM({name:"sha2-256",code:18,encode:sj("SHA-256")}),sha512:sM({name:"sha2-512",code:19,encode:sj("SHA-512")})}),sq=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:n8,digest:e=>sN(0,n8(e))}});new TextEncoder,new TextDecoder;let sz={...su,...sl,...sh,...sd,...sf,...sb,...sw,...sE,...sI,...sk};function sH(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function sB(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({...sU,...sq});let sW=sB("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),sF=sB("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?sH(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),s$={utf8:sW,"utf-8":sW,hex:sz.base16,latin1:sF,ascii:sF,binary:sF,...sz},sK="core",sV=`wc@2:${sK}:`,sG={logger:"error"},sY={database:":memory:"},sZ="client_ed25519_seed",sJ=rs.ONE_DAY,sQ=rs.SIX_HOURS,sX="wss://relay.walletconnect.com",s0="wss://relay.walletconnect.org",s1={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},s3={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},s2=rs.ONE_SECOND,s5={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},s6=1e3*rs.FIVE_SECONDS,s8={wc_pairingDelete:{req:{ttl:rs.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:rs.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:rs.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:rs.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:rs.ONE_DAY,prompt:!1,tag:0},res:{ttl:rs.ONE_DAY,prompt:!1,tag:0}}},s4={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},s9={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},s7={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},oe="verify-api",ot="https://verify.walletconnect.com",or="https://verify.walletconnect.org",oi=[ot,or];class on{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=sV,this.init=async()=>{if(!this.initialized){let e=await this.getKeyChain();"u">typeof e&&(this.keychain=e),this.initialized=!0}},this.has=e=>(this.isInitialized(),this.keychain.has(e)),this.set=async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()},this.get=e=>{this.isInitialized();let t=this.keychain.get(e);if(typeof t>"u"){let{message:t}=r7("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t},this.del=async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()},this.core=e,this.logger=ns(t,this.name)}get context(){return nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,rT(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?rM(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=r7("NOT_INITIALIZED",this.name);throw Error(e)}}}class os{constructor(e,t,r){this.core=e,this.logger=t,this.name="crypto",this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=e=>(this.isInitialized(),this.keychain.has(e)),this.getClientId=async()=>(this.isInitialized(),nS(nI(await this.getClientSeed()).publicKey)),this.generateKeyPair=()=>{this.isInitialized();let e=function(){let e=eN.Au();return{privateKey:t5(e.secretKey,rf),publicKey:t5(e.publicKey,rf)}}();return this.setPrivateKey(e.publicKey,e.privateKey)},this.signJWT=async e=>{this.isInitialized();let t=nI(await this.getClientSeed()),r=ry();return await nC(r,e,sJ,t)},this.generateSharedKey=(e,t,r)=>{this.isInitialized();let i=function(e,t){let r=eN.gi(t2(e,rf),t2(t,rf),!0);return t5(new eO.t(eR.mE,r).expand(32),rf)}(this.getPrivateKey(e),t);return this.setSymKey(i,r)},this.setSymKey=async(e,t)=>{this.isInitialized();let r=t||t5((0,eR.vp)(t2(e,rf)),rf);return await this.keychain.set(r,e),r},this.deleteKeyPair=async e=>{this.isInitialized(),await this.keychain.del(e)},this.deleteSymKey=async e=>{this.isInitialized(),await this.keychain.del(e)},this.encode=async(e,t,r)=>{this.isInitialized();let i=rb(r),n=iW(t);if(rw(i)){let t=i.senderPublicKey,r=i.receiverPublicKey;e=await this.generateSharedKey(t,r)}let s=this.getSymKey(e),{type:o,senderPublicKey:a}=i;return function(e){var t;let r=(t="u">typeof e.type?e.type:0,t2(`${t}`,rd));if(1===rm(r)&&typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");let i="u">typeof e.senderPublicKey?t2(e.senderPublicKey,rf):void 0,n="u">typeof e.iv?t2(e.iv,rf):(0,ex.randomBytes)(12);return function(e){if(1===rm(e.type)){if(typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");return t5(eL([e.type,e.senderPublicKey,e.iv,e.sealed]),rp)}return t5(eL([e.type,e.iv,e.sealed]),rp)}({type:r,sealed:new eA.OK(t2(e.symKey,rf)).seal(n,t2(e.message,rg)),iv:n,senderPublicKey:i})}({type:o,symKey:s,message:n,senderPublicKey:a})},this.decode=async(e,t,r)=>{this.isInitialized();let i=function(e,t){let r=r_(e);return rb({type:rm(r.type),senderPublicKey:"u">typeof r.senderPublicKey?t5(r.senderPublicKey,rf):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(rw(i)){let t=i.receiverPublicKey,r=i.senderPublicKey;e=await this.generateSharedKey(t,r)}try{let r=this.getSymKey(e),i=function(e){let t=new eA.OK(t2(e.symKey,rf)),{sealed:r,iv:i}=r_(e.encoded),n=t.open(i,r);if(null===n)throw Error("Failed to decrypt");return t5(n,rg)}({symKey:r,encoded:t});return iB(i)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}},this.getPayloadType=e=>rm(r_(e).type),this.getPayloadSenderPublicKey=e=>{let t=r_(e);return t.senderPublicKey?t5(t.senderPublicKey,rf):void 0},this.core=e,this.logger=ns(t,this.name),this.keychain=r||new on(this.core,this.logger)}get context(){return nn(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(sZ)}catch{e=ry(),await this.keychain.set(sZ,e)}return function(e,t="utf8"){let r=s$[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?sH(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=r7("NOT_INITIALIZED",this.name);throw Error(e)}}}class oo extends nu{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=sV,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let e=await this.getRelayerMessages();"u">typeof e&&(this.messages=e),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}},this.set=async(e,t)=>{this.isInitialized();let r=rv(t),i=this.messages.get(e);return typeof i>"u"&&(i={}),"u">typeof i[r]||(i[r]=t,this.messages.set(e,i),await this.persist()),r},this.get=e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t},this.has=(e,t)=>(this.isInitialized(),"u">typeof this.get(e)[rv(t)]),this.del=async e=>{this.isInitialized(),this.messages.delete(e),await this.persist()},this.logger=ns(e,this.name),this.core=t}get context(){return nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,rT(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?rM(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:e}=r7("NOT_INITIALIZED",this.name);throw Error(e)}}}class oa extends nl{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new eP.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,rs.toMiliseconds)(2*rs.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(e,t,r)=>{var i;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});try{let n=r?.ttl||sQ,s=rK(r),o=r?.prompt||!1,a=r?.tag||0,c=r?.id||nT().toString(),u={topic:e,message:t,opts:{ttl:n,relay:s,prompt:o,tag:a,id:c}},l=setTimeout(()=>this.queue.set(c,u),this.publishTimeout);try{await await rj(this.rpcPublish(e,t,n,s,o,a,c),this.publishTimeout,`Failed to publish payload, please try again. id:${c} tag:${a}`),this.removeRequestFromQueue(c),this.relayer.events.emit(s1.publish,u)}catch(e){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,null!=(i=r?.internal)&&i.throwOnFailedPublish)throw this.removeRequestFromQueue(c),e;return}finally{clearTimeout(l)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(e),e}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.relayer=e,this.logger=ns(t,this.name),this.registerEventListeners()}get context(){return nn(this.logger)}rpcPublish(e,t,r,i,n,s,o){var a,c,u,l;let h={method:rV(i.protocol).publish,params:{topic:e,message:t,ttl:r,prompt:n,tag:s},id:o};return ii(null==(a=h.params)?void 0:a.prompt)&&(null==(c=h.params)||delete c.prompt),ii(null==(u=h.params)?void 0:u.tag)&&(null==(l=h.params)||delete l.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:h}),this.relayer.request(h)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{let{topic:t,message:r,opts:i}=e;await this.publish(t,r,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(iX.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(s1.connection_stalled);return}this.checkQueue()}),this.relayer.on(s1.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class oc{constructor(){this.map=new Map,this.set=(e,t)=>{let r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let r=this.get(e);if(!this.exists(e,t))return;let i=r.filter(e=>e!==t);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var ou=Object.defineProperty,ol=Object.defineProperties,oh=Object.getOwnPropertyDescriptors,od=Object.getOwnPropertySymbols,of=Object.prototype.hasOwnProperty,op=Object.prototype.propertyIsEnumerable,og=(e,t,r)=>t in e?ou(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oy=(e,t)=>{for(var r in t||(t={}))of.call(t,r)&&og(e,r,t[r]);if(od)for(var r of od(t))op.call(t,r)&&og(e,r,t[r]);return e},ov=(e,t)=>ol(e,oh(t));class om extends nf{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new oc,this.events=new eP.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=sV,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(e,t)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{let r=rK(t),i={topic:e,relay:r};this.pending.set(e,i);let n=await this.rpcSubscribe(e,r);return this.onSubscribe(n,i),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}}),n}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}},this.unsubscribe=async(e,t)=>{await this.restartToComplete(),this.isInitialized(),"u">typeof t?.id?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)},this.isSubscribed=async e=>{if(this.topics.includes(e))return!0;let t=`${this.pendingSubscriptionWatchLabel}_${e}`;return await new Promise((r,i)=>{let n=new rs.Watch;n.start(t);let s=setInterval(()=>{!this.pending.has(e)&&this.topics.includes(e)&&(clearInterval(s),n.stop(t),r(!0)),n.elapsed(t)>=s6&&(clearInterval(s),n.stop(t),i(Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=ns(t,this.name),this.clientId=""}get context(){return nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){let r=this.topicMap.get(e);await Promise.all(r.map(async r=>await this.unsubscribeById(e,r,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{let i=rK(r);await this.rpcUnsubscribe(e,t,i);let n=ie("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t){let r={method:rV(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await rj(this.relayer.request(r),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(s1.connection_stalled)}return rv(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;let t={method:rV(e[0].relay.protocol).batchSubscribe,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{return await await rj(this.relayer.request(t),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(s1.connection_stalled)}}rpcUnsubscribe(e,t,r){let i={method:rV(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,ov(oy({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(e=>{this.setSubscription(e.id,oy({},e)),this.pending.delete(e.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,oy({},t)),this.topicMap.set(t.topic,e),this.events.emit(s5.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let t=this.subscriptions.get(e);if(!t){let{message:t}=r7("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});let r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(s5.deleted,ov(oy({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(s5.sync)}async reset(){if(this.cached.length){let e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){let e=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(e)}}this.events.emit(s5.resubscribed)}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:e}=r7("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;let t=await this.rpcBatchSubscribe(e);it(t)&&this.onBatchSubscribe(t.map((t,r)=>ov(oy({},e[r]),{id:t})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;let e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(iX.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(s1.connect,async()=>{await this.onConnect()}),this.relayer.on(s1.disconnect,()=>{this.onDisconnect()}),this.events.on(s5.created,async e=>{let t=s5.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(s5.deleted,async e=>{let t=s5.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=r7("NOT_INITIALIZED",this.name);throw Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{let t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var o_=Object.defineProperty,ob=Object.getOwnPropertySymbols,ow=Object.prototype.hasOwnProperty,oE=Object.prototype.propertyIsEnumerable,oS=(e,t,r)=>t in e?o_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oI=(e,t)=>{for(var r in t||(t={}))ow.call(t,r)&&oS(e,r,t[r]);if(ob)for(var r of ob(t))oE.call(t,r)&&oS(e,r,t[r]);return e};class oC extends nh{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new eP.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.request=async e=>{this.logger.debug("Publishing Request Payload");let t=e.id;try{await this.toEstablishConnection();let r=this.provider.request(e);return this.requestsInFlight.set(t,{promise:r,request:e}),await r}catch(e){throw this.logger.debug("Failed to Publish Request"),this.logger.error(e),e}finally{this.requestsInFlight.delete(t)}},this.onPayloadHandler=e=>{this.onProviderPayload(e)},this.onConnectHandler=()=>{this.events.emit(s1.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=e=>{this.logger.error(e),this.events.emit(s1.error,e),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(s3.payload,this.onPayloadHandler),this.provider.on(s3.connect,this.onConnectHandler),this.provider.on(s3.disconnect,this.onDisconnectHandler),this.provider.on(s3.error,this.onProviderErrorHandler)},this.core=e.core,this.logger="u">typeof e.logger&&"string"!=typeof e.logger?ns(e.logger,this.name):i1()(ni({level:e.logger||"error"})),this.messages=new oo(this.logger,e.core),this.subscriber=new om(this,this.logger),this.publisher=new oa(this,this.logger),this.relayUrl=e?.relayUrl||sX,this.projectId=e.projectId,this.bundleId=function(){var e;try{return rO()&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Application)?null==(e=r.g.Application)?void 0:e.applicationId:void 0}catch{return}}(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${s0}...`),await this.restartTransport(s0)}this.initialized=!0,setTimeout(async()=>{0===this.subscriber.topics.length&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},1e4)}get context(){return nn(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var r;let i;this.isInitialized();let n=(null==(r=this.subscriber.topicMap.get(e))?void 0:r[0])||"";if(n)return n;let s=t=>{t.topic===e&&(this.subscriber.off(s5.created,s),i())};return await Promise.all([new Promise(e=>{i=e,this.subscriber.on(s5.created,s)}),new Promise(async r=>{n=await this.subscriber.subscribe(e,t),r()})]),n}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.requestsInFlight.size>0&&(this.logger.debug("Waiting for all in-flight requests to finish before closing transport..."),this.requestsInFlight.forEach(async e=>{await e.promise})),this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await rj(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(e=>{if(!this.initialized)return e();this.subscriber.once(s5.resubscribed,()=>{e()})}),new Promise(async(e,t)=>{try{await rj(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(e){t(e);return}e()})])}catch(e){if(this.logger.error(e),!this.isConnectionStalled(e.message))throw e;this.provider.events.emit(s3.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await iv())throw Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new nY(new nX(function({protocol:e,version:t,relayUrl:i,sdkVersion:n,auth:s,projectId:o,useOnCloseEvent:a,bundleId:c}){var u,l;let h;let d=i.split("?"),f=function(e,t,i){let n=function(){if(rR()===rk.reactNative&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)){let{OS:e,Version:t}=r.g.Platform;return[e,t].join("-")}let e="undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new rt:"undefined"!=typeof navigator?function(e){var t=""!==e&&ri.reduce(function(t,r){var i=r[0],n=r[1];if(t)return t;var s=n.exec(e);return!!s&&[i,s]},!1);if(!t)return null;var r=t[0],i=t[1];if("searchbot"===r)return new re;var n=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);n?n.length<3&&(n=t8(t8([],n,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-n.length),!0)):n=[];var s=n.join("."),o=function(e){for(var t=0,r=rn.length;t<r;t++){var i=rn[t],n=i[0];if(i[1].exec(e))return n}return null}(e),a=rr.exec(e);return a&&a[1]?new t7(r,s,o,a[1]):new t4(r,s,o)}(navigator.userAgent):void 0!==t6&&t6.version?new t9(t6.version.slice(1)):null;if(null===e)return"unknown";let t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[t,e.name,e.version].join("-"):[t,e.version].join("-")}(),s=function(){var e;let t=rR();return t===rk.browser?[t,(null==(e=(0,ro.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),["js",i].join("-"),n,s].join("/")}(e,t,n),p=(u=d[1]||"",l={auth:s,ua:f,projectId:o,useOnCloseEvent:a||void 0,origin:c||void 0},h=rP(rP({},h=rc.parse(u)),l),u=rc.stringify(h));return d[0]+"?"+p}({sdkVersion:"2.11.2",protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){let{topic:t,message:r}=e;await this.messages.set(t,r)}async shouldIgnoreMessageEvent(e){let{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.debug(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;let i=this.messages.has(t,r);return i&&this.logger.debug(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),n$(e)){if(!e.method.endsWith("_subscription"))return;let t=e.params,{topic:r,message:i,publishedAt:n}=t.data,s={topic:r,message:i,publishedAt:n};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(oI({type:"event",event:t.id},s)),this.events.emit(t.id,s),await this.acknowledgePayload(e),await this.onMessageEvent(s)}else nK(e)&&this.events.emit(s1.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(s1.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){let t=nL(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(s3.payload,this.onPayloadHandler),this.provider.off(s3.connect,this.onConnectHandler),this.provider.off(s3.disconnect,this.onDisconnectHandler),this.provider.off(s3.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(s1.connection_stalled,()=>{this.restartTransport().catch(e=>this.logger.error(e))});let e=await iv();!function(e){switch(rR()){case rk.browser:!rO()&&rx()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)));break;case rk.reactNative:rO()&&"u">typeof r.g&&null!=r.g&&r.g.NetInfo&&r.g?.NetInfo.addEventListener(t=>e(t?.isConnected));case rk.node:}}(async t=>{this.initialized&&e!==t&&(e=t,t?await this.restartTransport().catch(e=>this.logger.error(e)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(e=>this.logger.error(e))))})}onProviderDisconnect(){this.events.emit(s1.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},(0,rs.toMiliseconds)(s2)))}isInitialized(){if(!this.initialized){let{message:e}=r7("NOT_INITIALIZED",this.name);throw Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{let t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var oD=Object.defineProperty,oP=Object.getOwnPropertySymbols,ok=Object.prototype.hasOwnProperty,oA=Object.prototype.propertyIsEnumerable,oO=(e,t,r)=>t in e?oD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ox=(e,t)=>{for(var r in t||(t={}))ok.call(t,r)&&oO(e,r,t[r]);if(oP)for(var r of oP(t))oA.call(t,r)&&oO(e,r,t[r]);return e};class oR extends nd{constructor(e,t,r,i=sV,n){super(e,t,r,i),this.core=e,this.logger=t,this.name=r,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=sV,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>{var t;this.getKey&&null!==e&&!ii(e)?this.map.set(this.getKey(e),e):(null==(t=e?.proposer)?void 0:t.publicKey)?this.map.set(e.id,e):e?.topic&&this.map.set(e.topic,e)}),this.cached=[],this.initialized=!0)},this.set=async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())},this.get=e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)),this.getAll=e=>(this.isInitialized(),e?this.values.filter(t=>Object.keys(e).every(r=>n1()(t[r],e[r]))):this.values),this.update=async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});let r=ox(ox({},this.getData(e)),t);this.map.set(e,r),await this.persist()},this.delete=async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),await this.persist())},this.logger=ns(t,this.name),this.storagePrefix=i,this.getKey=n}get context(){return nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let t=this.map.get(e);if(!t){let{message:t}=r7("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:e}=r7("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=r7("NOT_INITIALIZED",this.name);throw Error(e)}}}class oN{constructor(e,t){this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(ek()),this.initialized=!1,this.storagePrefix=sV,this.ignoredPayloadTypes=[1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]},this.create=async()=>{var e;this.isInitialized();let t=ry(),r=await this.core.crypto.setSymKey(t),i=rz(rs.FIVE_MINUTES),n={protocol:"irn"},s=(e={protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:n,expiryTimestamp:i},`${e.protocol}:${e.topic}@${e.version}?`+rc.stringify(r3(r1({symKey:e.symKey},function(e,t="-"){let r={};return Object.keys(e).forEach(i=>{e[i]&&(r["relay"+t+i]=e[i])}),r}(e.relay)),{expiryTimestamp:e.expiryTimestamp})));return await this.pairings.set(r,{topic:r,expiry:i,relay:n,active:!1}),await this.core.relayer.subscribe(r),this.core.expirer.set(r,i),{topic:r,uri:s}},this.pair=async e=>{this.isInitialized(),this.isValidPair(e);let{topic:t,symKey:r,relay:i,expiryTimestamp:n}=r2(e.uri);if(this.pairings.keys.includes(t)&&this.pairings.get(t).active)throw Error(`Pairing already exists: ${t}. Please try again with a new connection URI.`);let s=n||rz(rs.FIVE_MINUTES),o={topic:t,relay:i,expiry:s,active:!1};return await this.pairings.set(t,o),this.core.expirer.set(t,s),e.activatePairing&&await this.activate({topic:t}),this.events.emit(s4.create,o),this.core.crypto.keychain.has(t)||(await this.core.crypto.setSymKey(r,t),await this.core.relayer.subscribe(t,{relay:i})),o},this.activate=async({topic:e})=>{this.isInitialized();let t=rz(rs.THIRTY_DAYS);await this.pairings.update(e,{active:!0,expiry:t}),this.core.expirer.set(e,t)},this.ping=async e=>{this.isInitialized(),await this.isValidPing(e);let{topic:t}=e;if(this.pairings.keys.includes(t)){let e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:i,reject:n}=rL();this.events.once(rB("pairing_ping",e),({error:e})=>{e?n(e):i()}),await r()}},this.updateExpiry=async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})},this.updateMetadata=async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async e=>{this.isInitialized(),await this.isValidDisconnect(e);let{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",ie("USER_DISCONNECTED")),await this.deletePairing(t))},this.sendRequest=async(e,t,r)=>{let i=nM(t,r),n=await this.core.crypto.encode(e,i),s=s8[t].req;return this.core.history.set(e,i),this.core.relayer.publish(e,n,s),i.id},this.sendResult=async(e,t,r)=>{let i=nL(e,r),n=await this.core.crypto.encode(t,i),s=s8[(await this.core.history.get(t,e)).request.method].res;await this.core.relayer.publish(t,n,s),await this.core.history.resolve(i)},this.sendError=async(e,t,r)=>{let i=nj(e,r),n=await this.core.crypto.encode(t,i),s=await this.core.history.get(t,e),o=s8[s.request.method]?s8[s.request.method].res:s8.unregistered_method.res;await this.core.relayer.publish(t,n,o),await this.core.history.resolve(i)},this.deletePairing=async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,ie("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])},this.cleanup=async()=>{let e=this.pairings.getAll().filter(e=>rH(e.expiry));await Promise.all(e.map(e=>this.deletePairing(e.topic)))},this.onRelayEventRequest=e=>{let{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return this.onPairingPingRequest(t,r);case"wc_pairingDelete":return this.onPairingDeleteRequest(t,r);default:return this.onUnknownRpcMethodRequest(t,r)}},this.onRelayEventResponse=async e=>{let{topic:t,payload:r}=e,i=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===i?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(i)},this.onPairingPingRequest=async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit(s4.ping,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}},this.onPairingPingResponse=(e,t)=>{let{id:r}=t;setTimeout(()=>{nV(t)?this.events.emit(rB("pairing_ping",r),{}):nG(t)&&this.events.emit(rB("pairing_ping",r),{error:t.error})},500)},this.onPairingDeleteRequest=async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(s4.delete,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}},this.onUnknownRpcMethodRequest=async(e,t)=>{let{id:r,method:i}=t;try{if(this.registeredMethods.includes(i))return;let t=ie("WC_METHOD_UNSUPPORTED",i);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}},this.onUnknownRpcMethodResponse=e=>{this.registeredMethods.includes(e)||this.logger.error(ie("WC_METHOD_UNSUPPORTED",e))},this.isValidPair=e=>{var t;if(!id(e)){let{message:t}=r7("MISSING_OR_INVALID",`pair() params: ${e}`);throw Error(t)}if(!function(e){if(is(e,!1))try{return"u">typeof new URL(e)}catch{}return!1}(e.uri)){let{message:t}=r7("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw Error(t)}let r=r2(e.uri);if(!(null!=(t=r?.relay)&&t.protocol)){let{message:e}=r7("MISSING_OR_INVALID","pair() uri#relay-protocol");throw Error(e)}if(!(null!=r&&r.symKey)){let{message:e}=r7("MISSING_OR_INVALID","pair() uri#symKey");throw Error(e)}if(null!=r&&r.expiryTimestamp&&(0,rs.toMiliseconds)(r?.expiryTimestamp)<Date.now()){let{message:e}=r7("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw Error(e)}},this.isValidPing=async e=>{if(!id(e)){let{message:t}=r7("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidDisconnect=async e=>{if(!id(e)){let{message:t}=r7("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidPairingTopic=async e=>{if(!is(e,!1)){let{message:t}=r7("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.pairings.keys.includes(e)){let{message:t}=r7("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(rH(this.pairings.get(e).expiry)){await this.deletePairing(e);let{message:t}=r7("EXPIRED",`pairing topic: ${e}`);throw Error(t)}},this.core=e,this.logger=ns(t,this.name),this.pairings=new oR(this.core,this.logger,this.name,this.storagePrefix)}get context(){return nn(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=r7("NOT_INITIALIZED",this.name);throw Error(e)}}registerRelayerEvents(){this.core.relayer.on(s1.message,async e=>{let{topic:t,message:r}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))return;let i=await this.core.crypto.decode(t,r);try{n$(i)?(this.core.history.set(t,i),this.onRelayEventRequest({topic:t,payload:i})):nK(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:t,payload:i}),this.core.history.delete(t,i.id))}catch(e){this.logger.error(e)}})}registerExpirerEvents(){this.core.expirer.on(s7.expired,async e=>{let{topic:t}=rq(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(s4.expire,{topic:t}))})}}class oT extends nc{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new eP.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=sV,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.records.set(e.id,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;let i={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:rz(rs.THIRTY_DAYS)};this.records.set(i.id,i),this.events.emit(s9.created,i)},this.resolve=async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;let t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=nG(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.events.emit(s9.updated,t))},this.get=async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)),this.delete=(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach(r=>{r.topic!==e||"u">typeof t&&r.id!==t||(this.records.delete(r.id),this.events.emit(s9.deleted,r))})},this.exists=async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e),this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=ns(t,this.name)}get context(){return nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(t=>{if("u">typeof t.response)return;let r={topic:t.topic,request:nM(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let t=this.records.get(e);if(!t){let{message:t}=r7("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(s9.sync)}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:e}=r7("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(s9.created,e=>{let t=s9.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(s9.updated,e=>{let t=s9.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(s9.deleted,e=>{let t=s9.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(iX.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{(0,rs.toMiliseconds)(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=r7("NOT_INITIALIZED",this.name);throw Error(e)}}}class oM extends np{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new eP.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=sV,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.expirations.set(e.target,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=e=>{try{let t=this.formatTarget(e);return"u">typeof this.getExpiration(t)}catch{return!1}},this.set=(e,t)=>{this.isInitialized();let r=this.formatTarget(e),i={target:r,expiry:t};this.expirations.set(r,i),this.checkExpiry(r,i),this.events.emit(s7.created,{target:r,expiration:i})},this.get=e=>{this.isInitialized();let t=this.formatTarget(e);return this.getExpiration(t)},this.del=e=>{if(this.isInitialized(),this.has(e)){let t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(s7.deleted,{target:t,expiration:r})}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=ns(t,this.name)}get context(){return nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return rU("topic",e);if("number"==typeof e)return rU("id",e);let{message:t}=r7("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(s7.sync)}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:e}=r7("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){let t=this.expirations.get(e);if(!t){let{message:t}=r7("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),Error(t)}return t}checkExpiry(e,t){let{expiry:r}=t;(0,rs.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(s7.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(iX.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(s7.created,e=>{let t=s7.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(s7.expired,e=>{let t=s7.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(s7.deleted,e=>{let t=s7.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=r7("NOT_INITIALIZED",this.name);throw Error(e)}}}class oL extends ng{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=oe,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async e=>{if(this.verifyDisabled||rO()||!rx())return;let t=this.getVerifyUrl(e?.verifyUrl);this.verifyUrl!==t&&this.removeIframe(),this.verifyUrl=t;try{await this.createIframe()}catch(e){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(e)}if(!this.initialized){this.removeIframe(),this.verifyUrl=or;try{await this.createIframe()}catch(e){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(e),this.verifyDisabled=!0}}},this.register=async e=>{this.initialized?this.sendPost(e.attestationId):(this.addToQueue(e.attestationId),await this.init())},this.resolve=async e=>{let t;if(this.isDevEnv)return"";let r=this.getVerifyUrl(e?.verifyUrl);try{t=await this.fetchAttestation(e.attestationId,r)}catch(i){this.logger.info(`failed to resolve attestation: ${e.attestationId} from url: ${r}`),this.logger.info(i),t=await this.fetchAttestation(e.attestationId,or)}return t},this.fetchAttestation=async(e,t)=>{this.logger.info(`resolving attestation: ${e} from url: ${t}`);let r=this.startAbortTimer(2*rs.ONE_SECOND),i=await fetch(`${t}/attestation/${e}`,{signal:this.abortController.signal});return clearTimeout(r),200===i.status?await i.json():void 0},this.addToQueue=e=>{this.queue.push(e)},this.processQueue=()=>{0!==this.queue.length&&(this.queue.forEach(e=>this.sendPost(e)),this.queue=[])},this.sendPost=e=>{var t;try{if(!this.iframe)return;null==(t=this.iframe.contentWindow)||t.postMessage(e,"*"),this.logger.info(`postMessage sent: ${e} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let e;let t=r=>{"verify_ready"===r.data&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",t),e())};await Promise.race([new Promise(r=>{if(document.getElementById(oe))return r();window.addEventListener("message",t);let i=document.createElement("iframe");i.id=oe,i.src=`${this.verifyUrl}/${this.projectId}`,i.style.display="none",document.body.append(i),this.iframe=i,e=r}),new Promise((e,r)=>setTimeout(()=>{window.removeEventListener("message",t),r("verify iframe load timeout")},(0,rs.toMiliseconds)(rs.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=e=>{let t=e||ot;return oi.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${ot}`),t=ot),t},this.logger=ns(t,this.name),this.verifyUrl=ot,this.abortController=new AbortController,this.isDevEnv=rA()&&n5.env.IS_VITEST}get context(){return nn(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,rs.toMiliseconds)(e))}}class oj extends ny{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context="echo",this.registerDeviceToken=async e=>{let{clientId:t,token:r,notificationType:i,enableEncrypted:n=!1}=e,s=`https://echo.walletconnect.com/${this.projectId}/clients`;await n2()(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:i,token:r,always_raw:n})})},this.logger=ns(t,this.context)}}var oU=Object.defineProperty,oq=Object.getOwnPropertySymbols,oz=Object.prototype.hasOwnProperty,oH=Object.prototype.propertyIsEnumerable,oB=(e,t,r)=>t in e?oU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oW=(e,t)=>{for(var r in t||(t={}))oz.call(t,r)&&oB(e,r,t[r]);if(oq)for(var r of oq(t))oH.call(t,r)&&oB(e,r,t[r]);return e};class oF extends na{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=sK,this.events=new eP.EventEmitter,this.initialized=!1,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||sX,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";let t="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:i1()(ni({level:e?.logger||sG.logger}));this.logger=ns(t,this.name),this.heartbeat=new iX.HeartBeat,this.crypto=new os(this,this.logger,e?.keychain),this.history=new oT(this,this.logger),this.expirer=new oM(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new iQ(oW(oW({},sY),e?.storageOptions)),this.relayer=new oC({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new oN(this,this.logger),this.verify=new oL(this.projectId||"",this.logger),this.echoClient=new oj(this.projectId||"",this.logger)}static async init(e){let t=new oF(e);await t.initialize();let r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return nn(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}let o$="client",oK=`wc@2:${o$}:`,oV={name:o$,logger:"error"},oG="WALLETCONNECT_DEEPLINK_CHOICE",oY="Proposal expired",oZ=rs.SEVEN_DAYS,oJ={wc_sessionPropose:{req:{ttl:rs.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:rs.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:rs.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:rs.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:rs.ONE_DAY,prompt:!1,tag:1104},res:{ttl:rs.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:rs.ONE_DAY,prompt:!1,tag:1106},res:{ttl:rs.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:rs.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:rs.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:rs.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:rs.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:rs.ONE_DAY,prompt:!1,tag:1112},res:{ttl:rs.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:rs.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:rs.THIRTY_SECONDS,prompt:!1,tag:1115}}},oQ={min:rs.FIVE_MINUTES,max:rs.SEVEN_DAYS},oX={idle:"IDLE",active:"ACTIVE"},o0=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var o1=Object.defineProperty,o3=Object.defineProperties,o2=Object.getOwnPropertyDescriptors,o5=Object.getOwnPropertySymbols,o6=Object.prototype.hasOwnProperty,o8=Object.prototype.propertyIsEnumerable,o4=(e,t,r)=>t in e?o1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,o9=(e,t)=>{for(var r in t||(t={}))o6.call(t,r)&&o4(e,r,t[r]);if(o5)for(var r of o5(t))o8.call(t,r)&&o4(e,r,t[r]);return e},o7=(e,t)=>o3(e,o2(t));class ae extends nm{constructor(e){super(e),this.name="engine",this.events=new(ek()),this.initialized=!1,this.ignoredPayloadTypes=[1],this.requestQueue={state:oX.idle,queue:[]},this.sessionRequestQueue={state:oX.idle,queue:[]},this.requestQueueDelay=rs.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(oJ)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,rs.toMiliseconds)(this.requestQueueDelay)))},this.connect=async e=>{await this.isInitialized();let t=o7(o9({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);let{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:s,relays:o}=t,a=r,c,u=!1;if(a&&(u=this.client.core.pairing.pairings.get(a).active),!a||!u){let{topic:e,uri:t}=await this.client.core.pairing.create();a=e,c=t}let l=await this.client.core.crypto.generateKeyPair(),h=oJ.wc_sessionPropose.req.ttl||rs.FIVE_MINUTES,d=rz(h),f=o9({requiredNamespaces:i,optionalNamespaces:n,relays:o??[{protocol:"irn"}],proposer:{publicKey:l,metadata:this.client.metadata},expiryTimestamp:d},s&&{sessionProperties:s}),{reject:p,resolve:g,done:y}=rL(h,oY);if(this.events.once(rB("session_connect"),async({error:e,session:t})=>{if(e)p(e);else if(t){t.self.publicKey=l;let e=o7(o9({},t),{requiredNamespaces:f.requiredNamespaces,optionalNamespaces:f.optionalNamespaces});await this.client.session.set(t.topic,e),await this.setExpiry(t.topic,t.expiry),a&&await this.client.core.pairing.updateMetadata({topic:a,metadata:t.peer.metadata}),g(e)}}),!a){let{message:e}=r7("NO_MATCHING_KEY",`connect() pairing topic: ${a}`);throw Error(e)}let v=await this.sendRequest({topic:a,method:"wc_sessionPropose",params:f,throwOnFailedPublish:!0});return await this.setProposal(v,o9({id:v},f)),{uri:c,approval:y}},this.pair=async e=>(await this.isInitialized(),await this.client.core.pairing.pair(e)),this.approve=async e=>{await this.isInitialized(),await this.isValidApprove(e);let{id:t,relayProtocol:r,namespaces:i,sessionProperties:n}=e,{pairingTopic:s,proposer:o,requiredNamespaces:a,optionalNamespaces:c}=this.client.proposal.get(t);s=s||"";let u=await this.client.core.crypto.generateKeyPair(),l=o.publicKey,h=await this.client.core.crypto.generateSharedKey(u,l);s&&t&&(await this.client.core.pairing.updateMetadata({topic:s,metadata:o.metadata}),await this.sendResult({id:t,topic:s,result:{relay:{protocol:r??"irn"},responderPublicKey:u}}),await this.client.proposal.delete(t,ie("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:s}));let d=o9({relay:{protocol:r??"irn"},namespaces:i,pairingTopic:s,controller:{publicKey:u,metadata:this.client.metadata},expiry:rz(oZ)},n&&{sessionProperties:n});await this.client.core.relayer.subscribe(h);let f=o7(o9({},d),{topic:h,requiredNamespaces:a,optionalNamespaces:c,pairingTopic:s,acknowledged:!1,self:d.controller,peer:{publicKey:o.publicKey,metadata:o.metadata},controller:u});await this.client.session.set(h,f);try{await this.sendRequest({topic:h,method:"wc_sessionSettle",params:d,throwOnFailedPublish:!0})}catch(e){throw this.client.logger.error(e),this.client.session.delete(h,ie("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(h),e}return await this.setExpiry(h,rz(oZ)),{topic:h,acknowledged:()=>new Promise(e=>setTimeout(()=>e(this.client.session.get(h)),500))}},this.reject=async e=>{await this.isInitialized(),await this.isValidReject(e);let{id:t,reason:r}=e,{pairingTopic:i}=this.client.proposal.get(t);i&&(await this.sendError(t,i,r),await this.client.proposal.delete(t,ie("USER_DISCONNECTED")))},this.update=async e=>{await this.isInitialized(),await this.isValidUpdate(e);let{topic:t,namespaces:r}=e,i=await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r}}),{done:n,resolve:s,reject:o}=rL();return this.events.once(rB("session_update",i),({error:e})=>{e?o(e):s()}),await this.client.session.update(t,{namespaces:r}),{acknowledged:n}},this.extend=async e=>{await this.isInitialized(),await this.isValidExtend(e);let{topic:t}=e,r=await this.sendRequest({topic:t,method:"wc_sessionExtend",params:{}}),{done:i,resolve:n,reject:s}=rL();return this.events.once(rB("session_extend",r),({error:e})=>{e?s(e):n()}),await this.setExpiry(t,rz(oZ)),{acknowledged:i}},this.request=async e=>{await this.isInitialized(),await this.isValidRequest(e);let{chainId:t,request:r,topic:i,expiry:n=oJ.wc_sessionRequest.req.ttl}=e,s=nN(),{done:o,resolve:a,reject:c}=rL(n,"Request expired. Please try again.");return this.events.once(rB("session_request",s),({error:e,result:t})=>{e?c(e):a(t)}),await Promise.all([new Promise(async e=>{await this.sendRequest({clientRpcId:s,topic:i,method:"wc_sessionRequest",params:{request:o7(o9({},r),{expiryTimestamp:rz(n)}),chainId:t},expiry:n,throwOnFailedPublish:!0}).catch(e=>c(e)),this.client.events.emit("session_request_sent",{topic:i,request:r,chainId:t,id:s}),e()}),new Promise(async e=>{rF({id:s,topic:i,wcDeepLink:await r$(this.client.core.storage,oG)}),e()}),o()]).then(e=>e[2])},this.respond=async e=>{await this.isInitialized(),await this.isValidRespond(e);let{topic:t,response:r}=e,{id:i}=r;nV(r)?await this.sendResult({id:i,topic:t,result:r.result,throwOnFailedPublish:!0}):nG(r)&&await this.sendError(i,t,r.error),this.cleanupAfterResponse(e)},this.ping=async e=>{await this.isInitialized(),await this.isValidPing(e);let{topic:t}=e;if(this.client.session.keys.includes(t)){let e=await this.sendRequest({topic:t,method:"wc_sessionPing",params:{}}),{done:r,resolve:i,reject:n}=rL();this.events.once(rB("session_ping",e),({error:e})=>{e?n(e):i()}),await r()}else this.client.core.pairing.pairings.keys.includes(t)&&await this.client.core.pairing.ping({topic:t})},this.emit=async e=>{await this.isInitialized(),await this.isValidEmit(e);let{topic:t,event:r,chainId:i}=e;await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:i}})},this.disconnect=async e=>{await this.isInitialized(),await this.isValidDisconnect(e);let{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:ie("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(t))await this.client.core.pairing.disconnect({topic:t});else{let{message:e}=r7("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw Error(e)}},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter(t=>(function(e,t){let{requiredNamespaces:r}=t,i=Object.keys(e.namespaces),n=Object.keys(r),s=!0;return!!rN(n,i)&&(i.forEach(t=>{let{accounts:i,methods:n,events:o}=e.namespaces[t],a=r5(i),c=r[t];rN(rh(t,c),a)&&rN(c.methods,n)&&rN(c.events,o)||(s=!1)}),s)})(t,e))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.cleanupDuplicatePairings=async e=>{if(e.pairingTopic)try{let t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter(r=>{var i,n;return(null==(i=r.peerMetadata)?void 0:i.url)&&(null==(n=r.peerMetadata)?void 0:n.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic});if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map(e=>this.client.core.pairing.disconnect({topic:e.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}},this.deleteSession=async e=>{let{topic:t,expirerHasDeleted:r=!1,emitEvent:i=!0,id:n=0}=e,{self:s}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),await this.client.session.delete(t,ie("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(s.publicKey)&&await this.client.core.crypto.deleteKeyPair(s.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),r||this.client.core.expirer.del(t),this.client.core.storage.removeItem(oG).catch(e=>this.client.logger.warn(e)),this.getPendingSessionRequests().forEach(e=>{e.topic===t&&this.deletePendingSessionRequest(e.id,ie("USER_DISCONNECTED"))}),i&&this.client.events.emit("session_delete",{id:n,topic:t})},this.deleteProposal=async(e,t)=>{await Promise.all([this.client.proposal.delete(e,ie("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)])},this.deletePendingSessionRequest=async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(t=>t.id!==e),r&&(this.sessionRequestQueue.state=oX.idle,this.client.events.emit("session_request_expire",{id:e}))},this.setExpiry=async(e,t)=>{this.client.session.keys.includes(e)&&await this.client.session.update(e,{expiry:t}),this.client.core.expirer.set(e,t)},this.setProposal=async(e,t)=>{await this.client.proposal.set(e,t),this.client.core.expirer.set(e,rz(oJ.wc_sessionPropose.req.ttl))},this.setPendingSessionRequest=async e=>{let{id:t,topic:r,params:i,verifyContext:n}=e,s=i.request.expiryTimestamp||rz(oJ.wc_sessionRequest.req.ttl);await this.client.pendingRequest.set(t,{id:t,topic:r,params:i,verifyContext:n}),s&&this.client.core.expirer.set(t,s)},this.sendRequest=async e=>{let{topic:t,method:r,params:i,expiry:n,relayRpcId:s,clientRpcId:o,throwOnFailedPublish:a}=e,c=nM(r,i,o);if(rx()&&o0.includes(r)){let e=rv(JSON.stringify(c));this.client.core.verify.register({attestationId:e})}let u=await this.client.core.crypto.encode(t,c),l=oJ[r].req;return n&&(l.ttl=n),s&&(l.id=s),this.client.core.history.set(t,c),a?(l.internal=o7(o9({},l.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(t,u,l)):this.client.core.relayer.publish(t,u,l).catch(e=>this.client.logger.error(e)),c.id},this.sendResult=async e=>{let{id:t,topic:r,result:i,throwOnFailedPublish:n}=e,s=nL(t,i),o=await this.client.core.crypto.encode(r,s),a=oJ[(await this.client.core.history.get(r,t)).request.method].res;n?(a.internal=o7(o9({},a.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,o,a)):this.client.core.relayer.publish(r,o,a).catch(e=>this.client.logger.error(e)),await this.client.core.history.resolve(s)},this.sendError=async(e,t,r)=>{let i=nj(e,r),n=await this.client.core.crypto.encode(t,i),s=oJ[(await this.client.core.history.get(t,e)).request.method].res;this.client.core.relayer.publish(t,n,s),await this.client.core.history.resolve(i)},this.cleanup=async()=>{let e=[],t=[];this.client.session.getAll().forEach(t=>{let r=!1;rH(t.expiry)&&(r=!0),this.client.core.crypto.keychain.has(t.topic)||(r=!0),r&&e.push(t.topic)}),this.client.proposal.getAll().forEach(e=>{rH(e.expiryTimestamp)&&t.push(e.id)}),await Promise.all([...e.map(e=>this.deleteSession({topic:e})),...t.map(e=>this.deleteProposal(e))])},this.onRelayEventRequest=async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===oX.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=oX.active;let e=this.requestQueue.queue.shift();if(e)try{this.processRequest(e),await new Promise(e=>setTimeout(e,300))}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=oX.idle},this.processRequest=e=>{let{topic:t,payload:r}=e,i=r.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeRequest(t,r);case"wc_sessionSettle":return this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return this.onSessionExtendRequest(t,r);case"wc_sessionPing":return this.onSessionPingRequest(t,r);case"wc_sessionDelete":return this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return this.onSessionRequest(t,r);case"wc_sessionEvent":return this.onSessionEventRequest(t,r);default:return this.client.logger.info(`Unsupported request method ${i}`)}},this.onRelayEventResponse=async e=>{let{topic:t,payload:r}=e,i=(await this.client.core.history.get(t,r.id)).request.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${i}`)}},this.onRelayEventUnknownPayload=e=>{let{topic:t}=e,{message:r}=r7("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw Error(r)},this.onSessionProposeRequest=async(e,t)=>{let{params:r,id:i}=t;try{this.isValidConnect(o9({},t.params));let n=r.expiryTimestamp||rz(oJ.wc_sessionPropose.req.ttl),s=o9({id:i,pairingTopic:e,expiryTimestamp:n},r);await this.setProposal(i,s);let o=rv(JSON.stringify(t)),a=await this.getVerifyContext(o,s.proposer.metadata);this.client.events.emit("session_proposal",{id:i,params:s,verifyContext:a})}catch(t){await this.sendError(i,e,t),this.client.logger.error(t)}},this.onSessionProposeResponse=async(e,t)=>{let{id:r}=t;if(nV(t)){let{result:i}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i});let n=this.client.proposal.get(r);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:n});let s=n.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:s});let o=i.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:o});let a=await this.client.core.crypto.generateSharedKey(s,o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:a});let c=await this.client.core.relayer.subscribe(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:c}),await this.client.core.pairing.activate({topic:e})}else nG(t)&&(await this.client.proposal.delete(r,ie("USER_DISCONNECTED")),this.events.emit(rB("session_connect"),{error:t.error}))},this.onSessionSettleRequest=async(e,t)=>{let{id:r,params:i}=t;try{this.isValidSessionSettleRequest(i);let{relay:r,controller:n,expiry:s,namespaces:o,sessionProperties:a,pairingTopic:c}=t.params,u=o9({topic:e,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:c,requiredNamespaces:{},optionalNamespaces:{},controller:n.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:n.publicKey,metadata:n.metadata}},a&&{sessionProperties:a});await this.sendResult({id:t.id,topic:e,result:!0}),this.events.emit(rB("session_connect"),{session:u}),this.cleanupDuplicatePairings(u)}catch(t){await this.sendError(r,e,t),this.client.logger.error(t)}},this.onSessionSettleResponse=async(e,t)=>{let{id:r}=t;nV(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(rB("session_approve",r),{})):nG(t)&&(await this.client.session.delete(e,ie("USER_DISCONNECTED")),this.events.emit(rB("session_approve",r),{error:t.error}))},this.onSessionUpdateRequest=async(e,t)=>{let{params:r,id:i}=t;try{let t=`${e}_session_update`,n=ib.get(t);if(n&&this.isRequestOutOfSync(n,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidUpdate(o9({topic:e},r)),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:i,topic:e,result:!0}),this.client.events.emit("session_update",{id:i,topic:e,params:r}),ib.set(t,i)}catch(t){await this.sendError(i,e,t),this.client.logger.error(t)}},this.isRequestOutOfSync=(e,t)=>parseInt(t.toString().slice(0,-3))<=parseInt(e.toString().slice(0,-3)),this.onSessionUpdateResponse=(e,t)=>{let{id:r}=t;nV(t)?this.events.emit(rB("session_update",r),{}):nG(t)&&this.events.emit(rB("session_update",r),{error:t.error})},this.onSessionExtendRequest=async(e,t)=>{let{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,rz(oZ)),await this.sendResult({id:r,topic:e,result:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.client.logger.error(t)}},this.onSessionExtendResponse=(e,t)=>{let{id:r}=t;nV(t)?this.events.emit(rB("session_extend",r),{}):nG(t)&&this.events.emit(rB("session_extend",r),{error:t.error})},this.onSessionPingRequest=async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.client.logger.error(t)}},this.onSessionPingResponse=(e,t)=>{let{id:r}=t;setTimeout(()=>{nV(t)?this.events.emit(rB("session_ping",r),{}):nG(t)&&this.events.emit(rB("session_ping",r),{error:t.error})},500)},this.onSessionDeleteRequest=async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),await Promise.all([new Promise(t=>{this.client.core.relayer.once(s1.publish,async()=>{t(await this.deleteSession({topic:e,id:r}))})}),this.sendResult({id:r,topic:e,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:ie("USER_DISCONNECTED")})])}catch(e){this.client.logger.error(e)}},this.onSessionRequest=async(e,t)=>{let{id:r,params:i}=t;try{this.isValidRequest(o9({topic:e},i));let t=rv(JSON.stringify(nM("wc_sessionRequest",i,r))),n=this.client.session.get(e),s=await this.getVerifyContext(t,n.peer.metadata),o={id:r,topic:e,params:i,verifyContext:s};await this.setPendingSessionRequest(o),this.addSessionRequestToSessionRequestQueue(o),this.processSessionRequestQueue()}catch(t){await this.sendError(r,e,t),this.client.logger.error(t)}},this.onSessionRequestResponse=(e,t)=>{let{id:r}=t;nV(t)?this.events.emit(rB("session_request",r),{result:t.result}):nG(t)&&this.events.emit(rB("session_request",r),{error:t.error})},this.onSessionEventRequest=async(e,t)=>{let{id:r,params:i}=t;try{let t=`${e}_session_event_${i.event.name}`,n=ib.get(t);if(n&&this.isRequestOutOfSync(n,r)){this.client.logger.info(`Discarding out of sync request - ${r}`);return}this.isValidEmit(o9({topic:e},i)),this.client.events.emit("session_event",{id:r,topic:e,params:i}),ib.set(t,r)}catch(t){await this.sendError(r,e,t),this.client.logger.error(t)}},this.addSessionRequestToSessionRequestQueue=e=>{this.sessionRequestQueue.queue.push(e)},this.cleanupAfterResponse=e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=oX.idle,this.processSessionRequestQueue()},(0,rs.toMiliseconds)(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:e,error:t})=>{let r=this.client.core.history.pending;r.length>0&&r.filter(t=>t.topic===e&&"wc_sessionRequest"===t.request.method).forEach(e=>{this.events.emit(rB("session_request",e.request.id),{error:t})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===oX.active){this.client.logger.info("session request queue is already active.");return}let e=this.sessionRequestQueue.queue[0];if(!e){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=oX.active,this.client.events.emit("session_request",e)}catch(e){this.client.logger.error(e)}},this.onPairingCreated=e=>{if(e.active)return;let t=this.client.proposal.getAll().find(t=>t.pairingTopic===e.topic);t&&this.onSessionProposeRequest(e.topic,nM("wc_sessionPropose",{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties},t.id))},this.isValidConnect=async e=>{let t;if(!id(e)){let{message:t}=r7("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw Error(t)}let{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:s,relays:o}=e;if(ii(r)||await this.isValidPairingTopic(r),t=!1,o?o&&it(o)&&o.length&&o.forEach(e=>{t=ih(e)}):t=!0,!t){let{message:e}=r7("MISSING_OR_INVALID",`connect() relays: ${o}`);throw Error(e)}ii(i)||0===ir(i)||this.validateNamespaces(i,"requiredNamespaces"),ii(n)||0===ir(n)||this.validateNamespaces(n,"optionalNamespaces"),ii(s)||this.validateSessionProps(s,"sessionProperties")},this.validateNamespaces=(e,t)=>{let r=function(e,t,r){let i=null;if(e&&ir(e)){let n;let s=iu(e,t);s&&(i=s);let o=(n=null,Object.entries(e).forEach(([e,i])=>{var s,o;let a;if(n)return;let c=(s=rh(e,i),o=`${t} ${r}`,a=null,it(s)&&s.length?s.forEach(e=>{a||ia(e)||(a=ie("UNSUPPORTED_CHAINS",`${o}, chain ${e} should be a string and conform to "namespace:chainId" format`))}):ia(e)||(a=ie("UNSUPPORTED_CHAINS",`${o}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),a);c&&(n=c)}),n);o&&(i=o)}else i=r7("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return i}(e,"connect()",t);if(r)throw Error(r.message)},this.isValidApprove=async e=>{if(!id(e))throw Error(r7("MISSING_OR_INVALID",`approve() params: ${e}`).message);let{id:t,namespaces:r,relayProtocol:i,sessionProperties:n}=e;await this.isValidProposalId(t);let s=this.client.proposal.get(t),o=il(r,"approve()");if(o)throw Error(o.message);let a=ig(s.requiredNamespaces,r,"approve()");if(a)throw Error(a.message);if(!is(i,!0)){let{message:e}=r7("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw Error(e)}ii(n)||this.validateSessionProps(n,"sessionProperties")},this.isValidReject=async e=>{if(!id(e)){let{message:t}=r7("MISSING_OR_INVALID",`reject() params: ${e}`);throw Error(t)}let{id:t,reason:r}=e;if(await this.isValidProposalId(t),!r||"object"!=typeof r||!r.code||!io(r.code,!1)||!r.message||!is(r.message,!1)){let{message:e}=r7("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw Error(e)}},this.isValidSessionSettleRequest=e=>{let t;if(!id(e)){let{message:t}=r7("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw Error(t)}let{relay:r,controller:i,namespaces:n,expiry:s}=e;if(!ih(r)){let{message:e}=r7("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(e)}let o=(t=null,is(i?.publicKey,!1)||(t=r7("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t);if(o)throw Error(o.message);let a=il(n,"onSessionSettleRequest()");if(a)throw Error(a.message);if(rH(s)){let{message:e}=r7("EXPIRED","onSessionSettleRequest()");throw Error(e)}},this.isValidUpdate=async e=>{if(!id(e)){let{message:t}=r7("MISSING_OR_INVALID",`update() params: ${e}`);throw Error(t)}let{topic:t,namespaces:r}=e;await this.isValidSessionTopic(t);let i=this.client.session.get(t),n=il(r,"update()");if(n)throw Error(n.message);let s=ig(i.requiredNamespaces,r,"update()");if(s)throw Error(s.message)},this.isValidExtend=async e=>{if(!id(e)){let{message:t}=r7("MISSING_OR_INVALID",`extend() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionTopic(t)},this.isValidRequest=async e=>{var t;if(!id(e)){let{message:t}=r7("MISSING_OR_INVALID",`request() params: ${e}`);throw Error(t)}let{topic:r,request:i,chainId:n,expiry:s}=e;await this.isValidSessionTopic(r);let{namespaces:o}=this.client.session.get(r);if(!ip(o,n)){let{message:e}=r7("MISSING_OR_INVALID",`request() chainId: ${n}`);throw Error(e)}if(ii(i)||!is(i.method,!1)){let{message:e}=r7("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw Error(e)}if(!(is(t=i.method,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{r5(e.accounts).includes(t)&&r.push(...e.methods)}),r})(o,n).includes(t))){let{message:e}=r7("MISSING_OR_INVALID",`request() method: ${i.method}`);throw Error(e)}if(s&&(!io(s,!1)||!(s<=oQ.max)||!(s>=oQ.min))){let{message:e}=r7("MISSING_OR_INVALID",`request() expiry: ${s}. Expiry must be a number (in seconds) between ${oQ.min} and ${oQ.max}`);throw Error(e)}},this.isValidRespond=async e=>{var t;if(!id(e)){let{message:t}=r7("MISSING_OR_INVALID",`respond() params: ${e}`);throw Error(t)}let{topic:r,response:i}=e;try{await this.isValidSessionTopic(r)}catch(r){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),r}if(ii(i)||ii(i.result)&&ii(i.error)||!io(i.id,!1)||!is(i.jsonrpc,!1)){let{message:e}=r7("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw Error(e)}},this.isValidPing=async e=>{if(!id(e)){let{message:t}=r7("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.isValidEmit=async e=>{var t;if(!id(e)){let{message:t}=r7("MISSING_OR_INVALID",`emit() params: ${e}`);throw Error(t)}let{topic:r,event:i,chainId:n}=e;await this.isValidSessionTopic(r);let{namespaces:s}=this.client.session.get(r);if(!ip(s,n)){let{message:e}=r7("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw Error(e)}if(ii(i)||!is(i.name,!1)){let{message:e}=r7("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(e)}if(!(is(t=i.name,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{r5(e.accounts).includes(t)&&r.push(...e.events)}),r})(s,n).includes(t))){let{message:e}=r7("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(e)}},this.isValidDisconnect=async e=>{if(!id(e)){let{message:t}=r7("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.getVerifyContext=async(e,t)=>{let r={verified:{verifyUrl:t.verifyUrl||ot,validation:"UNKNOWN",origin:t.url||""}};try{let i=await this.client.core.verify.resolve({attestationId:e,verifyUrl:t.verifyUrl});i&&(r.verified.origin=i.origin,r.verified.isScam=i.isScam,r.verified.validation=i.origin===new URL(t.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.info(e)}return this.client.logger.info(`Verify context: ${JSON.stringify(r)}`),r},this.validateSessionProps=(e,t)=>{Object.values(e).forEach(e=>{if(!is(e,!1)){let{message:r}=r7("MISSING_OR_INVALID",`${t} must be in Record<string, string> format. Received: ${JSON.stringify(e)}`);throw Error(r)}})}}async isInitialized(){if(!this.initialized){let{message:e}=r7("NOT_INITIALIZED",this.name);throw Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(s1.message,async e=>{let{topic:t,message:r}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(r)))return;let i=await this.client.core.crypto.decode(t,r);try{n$(i)?(this.client.core.history.set(t,i),this.onRelayEventRequest({topic:t,payload:i})):nK(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:t,payload:i}),this.client.core.history.delete(t,i.id)):this.onRelayEventUnknownPayload({topic:t,payload:i})}catch(e){this.client.logger.error(e)}})}registerExpirerEvents(){this.client.core.expirer.on(s7.expired,async e=>{let{topic:t,id:r}=rq(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,r7("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(s4.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!is(e,!1)){let{message:t}=r7("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:t}=r7("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(rH(this.client.core.pairing.pairings.get(e).expiry)){let{message:t}=r7("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}async isValidSessionTopic(e){if(!is(e,!1)){let{message:t}=r7("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw Error(t)}if(!this.client.session.keys.includes(e)){let{message:t}=r7("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw Error(t)}if(rH(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});let{message:t}=r7("EXPIRED",`session topic: ${e}`);throw Error(t)}if(!this.client.core.crypto.keychain.has(e)){let{message:t}=r7("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(is(e,!1)){let{message:t}=r7("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw Error(t)}else{let{message:t}=r7("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw Error(t)}}async isValidProposalId(e){if("number"!=typeof e){let{message:t}=r7("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw Error(t)}if(!this.client.proposal.keys.includes(e)){let{message:t}=r7("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw Error(t)}if(rH(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);let{message:t}=r7("EXPIRED",`proposal id: ${e}`);throw Error(t)}}}class at extends oR{constructor(e,t){super(e,t,"proposal",oK),this.core=e,this.logger=t}}class ar extends oR{constructor(e,t){super(e,t,"session",oK),this.core=e,this.logger=t}}class ai extends oR{constructor(e,t){super(e,t,"request",oK,e=>e.id),this.core=e,this.logger=t}}class an extends nv{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=oV.name,this.events=new eP.EventEmitter,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.removeAllListeners=e=>this.events.removeAllListeners(e),this.connect=async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}},this.pair=async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}},this.approve=async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}},this.reject=async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}},this.update=async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}},this.extend=async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}},this.request=async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}},this.respond=async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}},this.ping=async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}},this.emit=async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}},this.disconnect=async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}},this.find=e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.name=e?.name||oV.name,this.metadata=e?.metadata||(0,ra.D)()||{name:"",description:"",url:"",icons:[""]};let t="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:i1()(ni({level:e?.logger||oV.logger}));this.core=e?.core||new oF(e),this.logger=ns(t,this.name),this.session=new ar(this.core,this.logger),this.proposal=new at(this.core,this.logger),this.pendingRequest=new ai(this.core,this.logger),this.engine=new ae(this)}static async init(e){let t=new an(e);return await t.initialize(),t}get context(){return nn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var as=r(4772),ao=r.n(as),aa=Object.defineProperty,ac=Object.defineProperties,au=Object.getOwnPropertyDescriptors,al=Object.getOwnPropertySymbols,ah=Object.prototype.hasOwnProperty,ad=Object.prototype.propertyIsEnumerable,af=(e,t,r)=>t in e?aa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ap=(e,t)=>{for(var r in t||(t={}))ah.call(t,r)&&af(e,r,t[r]);if(al)for(var r of al(t))ad.call(t,r)&&af(e,r,t[r]);return e},ag=(e,t)=>ac(e,au(t));let ay={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class av{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new eP.EventEmitter,this.isAvailable=!1,this.registering=!1,!nB(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{let t=iW(e),r=await (await ao()(this.url,ag(ap({},ay),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!nB(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return t(Error("HTTP connection is missing or invalid"));e()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){let t=iW({id:1,jsonrpc:"2.0",method:"test",params:[]});await ao()(e,ag(ap({},ay),{body:t}))}this.onOpen()}catch(t){let e=this.parseError(t);throw this.events.emit("register_error",e),this.onClose(),e}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?iB(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let r=this.parseError(t),i=nj(e,r.message||r.toString());this.events.emit("payload",i)}parseError(e,t=this.url){return nx(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}let am="error",a_="wc@2:universal_provider:",ab="default_chain_changed";var aw="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof r.g?r.g:"u">typeof self?self:{},aE={exports:{}};!function(e,t){(function(){var r,i="Expected a function",n="__lodash_hash_undefined__",s="__lodash_placeholder__",o=1/0,a=0/0,c=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u="[object Arguments]",l="[object Array]",h="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Function]",g="[object GeneratorFunction]",y="[object Map]",v="[object Number]",m="[object Object]",_="[object Promise]",b="[object RegExp]",w="[object Set]",E="[object String]",S="[object Symbol]",I="[object WeakMap]",C="[object ArrayBuffer]",D="[object DataView]",P="[object Float32Array]",k="[object Float64Array]",A="[object Int8Array]",O="[object Int16Array]",x="[object Int32Array]",R="[object Uint8Array]",N="[object Uint8ClampedArray]",T="[object Uint16Array]",M="[object Uint32Array]",L=/\b__p \+= '';/g,j=/\b(__p \+=) '' \+/g,U=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,z=/[&<>"']/g,H=RegExp(q.source),B=RegExp(z.source),W=/<%-([\s\S]+?)%>/g,F=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,V=/^\w*$/,G=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y=/[\\^$.*+?()[\]{}|]/g,Z=RegExp(Y.source),J=/^\s+/,Q=/\s/,X=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ee=/\{\n\/\* \[wrapped with (.+)\] \*/,et=/,? & /,er=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ei=/[()=,{}\[\]\/\s]/,en=/\\(\\)?/g,es=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,eo=/\w*$/,ea=/^[-+]0x[0-9a-f]+$/i,ec=/^0b[01]+$/i,eu=/^\[object .+?Constructor\]$/,el=/^0o[0-7]+$/i,eh=/^(?:0|[1-9]\d*)$/,ed=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ef=/($^)/,ep=/['\n\r\u2028\u2029\\]/g,eg="\ud800-\udfff",ey="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ev="\\u2700-\\u27bf",em="a-z\\xdf-\\xf6\\xf8-\\xff",e_="A-Z\\xc0-\\xd6\\xd8-\\xde",eb="\\ufe0e\\ufe0f",ew="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",eE="['’]",eS="["+ew+"]",eI="["+ey+"]",eC="["+em+"]",eD="[^"+eg+ew+"\\d+"+ev+em+e_+"]",eP="\ud83c[\udffb-\udfff]",ek="[^"+eg+"]",eA="(?:\ud83c[\udde6-\uddff]){2}",eO="[\ud800-\udbff][\udc00-\udfff]",ex="["+e_+"]",eR="\\u200d",eN="(?:"+eC+"|"+eD+")",eT="(?:"+eE+"(?:d|ll|m|re|s|t|ve))?",eM="(?:"+eE+"(?:D|LL|M|RE|S|T|VE))?",eL="(?:"+eI+"|"+eP+")?",ej="["+eb+"]?",eU="(?:"+eR+"(?:"+[ek,eA,eO].join("|")+")"+ej+eL+")*",eq=ej+eL+eU,ez="(?:"+["["+ev+"]",eA,eO].join("|")+")"+eq,eH="(?:"+[ek+eI+"?",eI,eA,eO,"["+eg+"]"].join("|")+")",eB=RegExp(eE,"g"),eW=RegExp(eI,"g"),eF=RegExp(eP+"(?="+eP+")|"+eH+eq,"g"),e$=RegExp([ex+"?"+eC+"+"+eT+"(?="+[eS,ex,"$"].join("|")+")","(?:"+ex+"|"+eD+")+"+eM+"(?="+[eS,ex+eN,"$"].join("|")+")",ex+"?"+eN+"+"+eT,ex+"+"+eM,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",ez].join("|"),"g"),eK=RegExp("["+eR+eg+ey+eb+"]"),eV=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eG=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],eY=-1,eZ={};eZ[P]=eZ[k]=eZ[A]=eZ[O]=eZ[x]=eZ[R]=eZ[N]=eZ[T]=eZ[M]=!0,eZ[u]=eZ[l]=eZ[C]=eZ[h]=eZ[D]=eZ[d]=eZ[f]=eZ[p]=eZ[y]=eZ[v]=eZ[m]=eZ[b]=eZ[w]=eZ[E]=eZ[I]=!1;var eJ={};eJ[u]=eJ[l]=eJ[C]=eJ[D]=eJ[h]=eJ[d]=eJ[P]=eJ[k]=eJ[A]=eJ[O]=eJ[x]=eJ[y]=eJ[v]=eJ[m]=eJ[b]=eJ[w]=eJ[E]=eJ[S]=eJ[R]=eJ[N]=eJ[T]=eJ[M]=!0,eJ[f]=eJ[p]=eJ[I]=!1;var eQ={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},eX=parseFloat,e0=parseInt,e1="object"==typeof aw&&aw&&aw.Object===Object&&aw,e3="object"==typeof self&&self&&self.Object===Object&&self,e2=e1||e3||Function("return this")(),e5=t&&!t.nodeType&&t,e6=e5&&e&&!e.nodeType&&e,e8=e6&&e6.exports===e5,e4=e8&&e1.process,e9=function(){try{return e6&&e6.require&&e6.require("util").types||e4&&e4.binding&&e4.binding("util")}catch{}}(),e7=e9&&e9.isArrayBuffer,te=e9&&e9.isDate,tt=e9&&e9.isMap,tr=e9&&e9.isRegExp,ti=e9&&e9.isSet,tn=e9&&e9.isTypedArray;function ts(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function to(e,t,r,i){for(var n=-1,s=null==e?0:e.length;++n<s;){var o=e[n];t(i,o,r(o),e)}return i}function ta(e,t){for(var r=-1,i=null==e?0:e.length;++r<i&&!1!==t(e[r],r,e););return e}function tc(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(!t(e[r],r,e))return!1;return!0}function tu(e,t){for(var r=-1,i=null==e?0:e.length,n=0,s=[];++r<i;){var o=e[r];t(o,r,e)&&(s[n++]=o)}return s}function tl(e,t){return!!(null==e?0:e.length)&&tb(e,t,0)>-1}function th(e,t,r){for(var i=-1,n=null==e?0:e.length;++i<n;)if(r(t,e[i]))return!0;return!1}function td(e,t){for(var r=-1,i=null==e?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}function tf(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}function tp(e,t,r,i){var n=-1,s=null==e?0:e.length;for(i&&s&&(r=e[++n]);++n<s;)r=t(r,e[n],n,e);return r}function tg(e,t,r,i){var n=null==e?0:e.length;for(i&&n&&(r=e[--n]);n--;)r=t(r,e[n],n,e);return r}function ty(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}var tv=tI("length");function tm(e,t,r){var i;return r(e,function(e,r,n){if(t(e,r,n))return i=r,!1}),i}function t_(e,t,r,i){for(var n=e.length,s=r+(i?1:-1);i?s--:++s<n;)if(t(e[s],s,e))return s;return -1}function tb(e,t,r){return t==t?function(e,t,r){for(var i=r-1,n=e.length;++i<n;)if(e[i]===t)return i;return -1}(e,t,r):t_(e,tE,r)}function tw(e,t,r,i){for(var n=r-1,s=e.length;++n<s;)if(i(e[n],t))return n;return -1}function tE(e){return e!=e}function tS(e,t){var r=null==e?0:e.length;return r?tP(e,t)/r:a}function tI(e){return function(t){return null==t?r:t[e]}}function tC(e){return function(t){return null==e?r:e[t]}}function tD(e,t,r,i,n){return n(e,function(e,n,s){r=i?(i=!1,e):t(r,e,n,s)}),r}function tP(e,t){for(var i,n=-1,s=e.length;++n<s;){var o=t(e[n]);o!==r&&(i=i===r?o:i+o)}return i}function tk(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}function tA(e){return e&&e.slice(0,t$(e)+1).replace(J,"")}function tO(e){return function(t){return e(t)}}function tx(e,t){return td(t,function(t){return e[t]})}function tR(e,t){return e.has(t)}function tN(e,t){for(var r=-1,i=e.length;++r<i&&tb(t,e[r],0)>-1;);return r}function tT(e,t){for(var r=e.length;r--&&tb(t,e[r],0)>-1;);return r}var tM=tC({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),tL=tC({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function tj(e){return"\\"+eQ[e]}function tU(e){return eK.test(e)}function tq(e){var t=-1,r=Array(e.size);return e.forEach(function(e,i){r[++t]=[i,e]}),r}function tz(e,t){return function(r){return e(t(r))}}function tH(e,t){for(var r=-1,i=e.length,n=0,o=[];++r<i;){var a=e[r];(a===t||a===s)&&(e[r]=s,o[n++]=r)}return o}function tB(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function tW(e){return tU(e)?function(e){for(var t=eF.lastIndex=0;eF.test(e);)++t;return t}(e):tv(e)}function tF(e){return tU(e)?e.match(eF)||[]:e.split("")}function t$(e){for(var t=e.length;t--&&Q.test(e.charAt(t)););return t}var tK=tC({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),tV=function e(t){var Q,eg,ey,ev,em=(t=null==t?e2:tV.defaults(e2.Object(),t,tV.pick(e2,eG))).Array,e_=t.Date,eb=t.Error,ew=t.Function,eE=t.Math,eS=t.Object,eI=t.RegExp,eC=t.String,eD=t.TypeError,eP=em.prototype,ek=ew.prototype,eA=eS.prototype,eO=t["__core-js_shared__"],ex=ek.toString,eR=eA.hasOwnProperty,eN=0,eT=(Q=/[^.]+$/.exec(eO&&eO.keys&&eO.keys.IE_PROTO||""))?"Symbol(src)_1."+Q:"",eM=eA.toString,eL=ex.call(eS),ej=e2._,eU=eI("^"+ex.call(eR).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eq=e8?t.Buffer:r,ez=t.Symbol,eH=t.Uint8Array,eF=eq?eq.allocUnsafe:r,eK=tz(eS.getPrototypeOf,eS),eQ=eS.create,e1=eA.propertyIsEnumerable,e3=eP.splice,e5=ez?ez.isConcatSpreadable:r,e6=ez?ez.iterator:r,e4=ez?ez.toStringTag:r,e9=function(){try{var e=np(eS,"defineProperty");return e({},"",{}),e}catch{}}(),tv=t.clearTimeout!==e2.clearTimeout&&t.clearTimeout,tC=e_&&e_.now!==e2.Date.now&&e_.now,tG=t.setTimeout!==e2.setTimeout&&t.setTimeout,tY=eE.ceil,tZ=eE.floor,tJ=eS.getOwnPropertySymbols,tQ=eq?eq.isBuffer:r,tX=t.isFinite,t0=eP.join,t1=tz(eS.keys,eS),t3=eE.max,t2=eE.min,t5=e_.now,t6=t.parseInt,t8=eE.random,t4=eP.reverse,t9=np(t,"DataView"),t7=np(t,"Map"),re=np(t,"Promise"),rt=np(t,"Set"),rr=np(t,"WeakMap"),ri=np(eS,"create"),rn=rr&&new rr,rs={},ro=nq(t9),ra=nq(t7),rc=nq(re),ru=nq(rt),rl=nq(rr),rh=ez?ez.prototype:r,rd=rh?rh.valueOf:r,rf=rh?rh.toString:r;function rp(e){if(sK(e)&&!sM(e)&&!(e instanceof rm)){if(e instanceof rv)return e;if(eR.call(e,"__wrapped__"))return nz(e)}return new rv(e)}var rg=function(){function e(){}return function(t){if(!s$(t))return{};if(eQ)return eQ(t);e.prototype=t;var i=new e;return e.prototype=r,i}}();function ry(){}function rv(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function rm(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function r_(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function rb(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function rw(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function rE(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new rw;++t<r;)this.add(e[t])}function rS(e){var t=this.__data__=new rb(e);this.size=t.size}function rI(e,t){var r=sM(e),i=!r&&sT(e),n=!r&&!i&&sq(e),s=!r&&!i&&!n&&s0(e),o=r||i||n||s,a=o?tk(e.length,eC):[],c=a.length;for(var u in e)(t||eR.call(e,u))&&!(o&&("length"==u||n&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||nw(u,c)))&&a.push(u);return a}function rC(e){var t=e.length;return t?e[il(0,t-1)]:r}function rD(e,t,i){(i===r||sx(e[t],i))&&(i!==r||t in e)||rx(e,t,i)}function rP(e,t,i){var n=e[t];eR.call(e,t)&&sx(n,i)&&(i!==r||t in e)||rx(e,t,i)}function rk(e,t){for(var r=e.length;r--;)if(sx(e[r][0],t))return r;return -1}function rA(e,t,r,i){return rU(e,function(e,n,s){t(i,e,r(e),s)}),i}function rO(e,t){return e&&iW(t,od(t),e)}function rx(e,t,r){"__proto__"==t&&e9?e9(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function rR(e,t){for(var i=-1,n=t.length,s=em(n),o=null==e;++i<n;)s[i]=o?r:oa(e,t[i]);return s}function rN(e,t,i){return e==e&&(i!==r&&(e=e<=i?e:i),t!==r&&(e=e>=t?e:t)),e}function rT(e,t,i,n,s,o){var a,c=1&t,l=2&t,f=4&t;if(i&&(a=s?i(e,n,s,o):i(e)),a!==r)return a;if(!s$(e))return e;var _=sM(e);if(_){if(I=e.length,L=new e.constructor(I),I&&"string"==typeof e[0]&&eR.call(e,"index")&&(L.index=e.index,L.input=e.input),a=L,!c)return iB(e,a)}else{var I,L,j,U,q,z=nv(e),H=z==p||z==g;if(sq(e))return iL(e,c);if(z==m||z==u||H&&!s){if(a=l||H?{}:n_(e),!c)return l?(j=(q=a)&&iW(e,of(e),q),iW(e,ny(e),j)):(U=rO(a,e),iW(e,ng(e),U))}else{if(!eJ[z])return s?e:{};a=function(e,t,r){var i,n,s=e.constructor;switch(t){case C:return ij(e);case h:case d:return new s(+e);case D:return i=r?ij(e.buffer):e.buffer,new e.constructor(i,e.byteOffset,e.byteLength);case P:case k:case A:case O:case x:case R:case N:case T:case M:return iU(e,r);case y:return new s;case v:case E:return new s(e);case b:return(n=new e.constructor(e.source,eo.exec(e))).lastIndex=e.lastIndex,n;case w:return new s;case S:return rd?eS(rd.call(e)):{}}}(e,z,c)}}o||(o=new rS);var B=o.get(e);if(B)return B;o.set(e,a),sJ(e)?e.forEach(function(r){a.add(rT(r,t,i,r,e,o))}):sV(e)&&e.forEach(function(r,n){a.set(n,rT(r,t,i,n,e,o))});var W=f?l?na:no:l?of:od,F=_?r:W(e);return ta(F||e,function(r,n){F&&(r=e[n=r]),rP(a,n,rT(r,t,i,n,e,o))}),a}function rM(e,t,i){var n=i.length;if(null==e)return!n;for(e=eS(e);n--;){var s=i[n],o=t[s],a=e[s];if(a===r&&!(s in e)||!o(a))return!1}return!0}function rL(e,t,n){if("function"!=typeof e)throw new eD(i);return nR(function(){e.apply(r,n)},t)}function rj(e,t,r,i){var n=-1,s=tl,o=!0,a=e.length,c=[],u=t.length;if(!a)return c;r&&(t=td(t,tO(r))),i?(s=th,o=!1):t.length>=200&&(s=tR,o=!1,t=new rE(t));e:for(;++n<a;){var l=e[n],h=null==r?l:r(l);if(l=i||0!==l?l:0,o&&h==h){for(var d=u;d--;)if(t[d]===h)continue e;c.push(l)}else s(t,h,i)||c.push(l)}return c}rp.templateSettings={escape:W,evaluate:F,interpolate:$,variable:"",imports:{_:rp}},rp.prototype=ry.prototype,rp.prototype.constructor=rp,rv.prototype=rg(ry.prototype),rv.prototype.constructor=rv,rm.prototype=rg(ry.prototype),rm.prototype.constructor=rm,r_.prototype.clear=function(){this.__data__=ri?ri(null):{},this.size=0},r_.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},r_.prototype.get=function(e){var t=this.__data__;if(ri){var i=t[e];return i===n?r:i}return eR.call(t,e)?t[e]:r},r_.prototype.has=function(e){var t=this.__data__;return ri?t[e]!==r:eR.call(t,e)},r_.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=ri&&t===r?n:t,this},rb.prototype.clear=function(){this.__data__=[],this.size=0},rb.prototype.delete=function(e){var t=this.__data__,r=rk(t,e);return!(r<0)&&(r==t.length-1?t.pop():e3.call(t,r,1),--this.size,!0)},rb.prototype.get=function(e){var t=this.__data__,i=rk(t,e);return i<0?r:t[i][1]},rb.prototype.has=function(e){return rk(this.__data__,e)>-1},rb.prototype.set=function(e,t){var r=this.__data__,i=rk(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this},rw.prototype.clear=function(){this.size=0,this.__data__={hash:new r_,map:new(t7||rb),string:new r_}},rw.prototype.delete=function(e){var t=nd(this,e).delete(e);return this.size-=t?1:0,t},rw.prototype.get=function(e){return nd(this,e).get(e)},rw.prototype.has=function(e){return nd(this,e).has(e)},rw.prototype.set=function(e,t){var r=nd(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this},rE.prototype.add=rE.prototype.push=function(e){return this.__data__.set(e,n),this},rE.prototype.has=function(e){return this.__data__.has(e)},rS.prototype.clear=function(){this.__data__=new rb,this.size=0},rS.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},rS.prototype.get=function(e){return this.__data__.get(e)},rS.prototype.has=function(e){return this.__data__.has(e)},rS.prototype.set=function(e,t){var r=this.__data__;if(r instanceof rb){var i=r.__data__;if(!t7||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new rw(i)}return r.set(e,t),this.size=r.size,this};var rU=iK(rK),rq=iK(rV,!0);function rz(e,t){var r=!0;return rU(e,function(e,i,n){return r=!!t(e,i,n)}),r}function rH(e,t,i){for(var n=-1,s=e.length;++n<s;){var o=e[n],a=t(o);if(null!=a&&(c===r?a==a&&!sX(a):i(a,c)))var c=a,u=o}return u}function rB(e,t){var r=[];return rU(e,function(e,i,n){t(e,i,n)&&r.push(e)}),r}function rW(e,t,r,i,n){var s=-1,o=e.length;for(r||(r=nb),n||(n=[]);++s<o;){var a=e[s];t>0&&r(a)?t>1?rW(a,t-1,r,i,n):tf(n,a):i||(n[n.length]=a)}return n}var rF=iV(),r$=iV(!0);function rK(e,t){return e&&rF(e,t,od)}function rV(e,t){return e&&r$(e,t,od)}function rG(e,t){return tu(t,function(t){return sB(e[t])})}function rY(e,t){t=iN(t,e);for(var i=0,n=t.length;null!=e&&i<n;)e=e[nU(t[i++])];return i&&i==n?e:r}function rZ(e,t,r){var i=t(e);return sM(e)?i:tf(i,r(e))}function rJ(e){return null==e?e===r?"[object Undefined]":"[object Null]":e4&&e4 in eS(e)?function(e){var t=eR.call(e,e4),i=e[e4];try{e[e4]=r;var n=!0}catch{}var s=eM.call(e);return n&&(t?e[e4]=i:delete e[e4]),s}(e):eM.call(e)}function rQ(e,t){return e>t}function rX(e,t){return null!=e&&eR.call(e,t)}function r0(e,t){return null!=e&&t in eS(e)}function r1(e,t,i){for(var n=i?th:tl,s=e[0].length,o=e.length,a=o,c=em(o),u=1/0,l=[];a--;){var h=e[a];a&&t&&(h=td(h,tO(t))),u=t2(h.length,u),c[a]=!i&&(t||s>=120&&h.length>=120)?new rE(a&&h):r}h=e[0];var d=-1,f=c[0];e:for(;++d<s&&l.length<u;){var p=h[d],g=t?t(p):p;if(p=i||0!==p?p:0,!(f?tR(f,g):n(l,g,i))){for(a=o;--a;){var y=c[a];if(!(y?tR(y,g):n(e[a],g,i)))continue e}f&&f.push(g),l.push(p)}}return l}function r3(e,t,i){t=iN(t,e);var n=null==(e=nA(e,t))?e:e[nU(nJ(t))];return null==n?r:ts(n,e,i)}function r2(e){return sK(e)&&rJ(e)==u}function r5(e,t,i,n,s){return e===t||(null!=e&&null!=t&&(sK(e)||sK(t))?function(e,t,i,n,s,o){var a=sM(e),c=sM(t),p=a?l:nv(e),g=c?l:nv(t);p=p==u?m:p,g=g==u?m:g;var _=p==m,I=g==m,P=p==g;if(P&&sq(e)){if(!sq(t))return!1;a=!0,_=!1}if(P&&!_)return o||(o=new rS),a||s0(e)?nn(e,t,i,n,s,o):function(e,t,r,i,n,s,o){switch(r){case D:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case C:return!(e.byteLength!=t.byteLength||!s(new eH(e),new eH(t)));case h:case d:case v:return sx(+e,+t);case f:return e.name==t.name&&e.message==t.message;case b:case E:return e==t+"";case y:var a=tq;case w:var c=1&i;if(a||(a=tB),e.size!=t.size&&!c)break;var u=o.get(e);if(u)return u==t;i|=2,o.set(e,t);var l=nn(a(e),a(t),i,n,s,o);return o.delete(e),l;case S:if(rd)return rd.call(e)==rd.call(t)}return!1}(e,t,p,i,n,s,o);if(!(1&i)){var k=_&&eR.call(e,"__wrapped__"),A=I&&eR.call(t,"__wrapped__");if(k||A){var O=k?e.value():e,x=A?t.value():t;return o||(o=new rS),s(O,x,i,n,o)}}return!!P&&(o||(o=new rS),function(e,t,i,n,s,o){var a=1&i,c=no(e),u=c.length;if(u!=no(t).length&&!a)return!1;for(var l=u;l--;){var h=c[l];if(!(a?h in t:eR.call(t,h)))return!1}var d=o.get(e),f=o.get(t);if(d&&f)return d==t&&f==e;var p=!0;o.set(e,t),o.set(t,e);for(var g=a;++l<u;){var y=e[h=c[l]],v=t[h];if(n)var m=a?n(v,y,h,t,e,o):n(y,v,h,e,t,o);if(!(m===r?y===v||s(y,v,i,n,o):m)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var _=e.constructor,b=t.constructor;_!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b)&&(p=!1)}return o.delete(e),o.delete(t),p}(e,t,i,n,s,o))}(e,t,i,n,r5,s):e!=e&&t!=t)}function r6(e,t,i,n){var s=i.length,o=s,a=!n;if(null==e)return!o;for(e=eS(e);s--;){var c=i[s];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<o;){var u=(c=i[s])[0],l=e[u],h=c[1];if(a&&c[2]){if(l===r&&!(u in e))return!1}else{var d=new rS;if(n)var f=n(l,h,u,e,t,d);if(!(f===r?r5(h,l,3,n,d):f))return!1}}return!0}function r8(e){return!(!s$(e)||eT&&eT in e)&&(sB(e)?eU:eu).test(nq(e))}function r4(e){return"function"==typeof e?e:null==e?oU:"object"==typeof e?sM(e)?ir(e[0],e[1]):it(e):oV(e)}function r9(e){if(!nD(e))return t1(e);var t=[];for(var r in eS(e))eR.call(e,r)&&"constructor"!=r&&t.push(r);return t}function r7(e,t){return e<t}function ie(e,t){var r=-1,i=sj(e)?em(e.length):[];return rU(e,function(e,n,s){i[++r]=t(e,n,s)}),i}function it(e){var t=nf(e);return 1==t.length&&t[0][2]?nP(t[0][0],t[0][1]):function(r){return r===e||r6(r,e,t)}}function ir(e,t){var i;return nS(e)&&(i=t)==i&&!s$(i)?nP(nU(e),t):function(i){var n=oa(i,e);return n===r&&n===t?oc(i,e):r5(t,n,3)}}function ii(e,t,i,n,s){e!==t&&rF(t,function(o,a){if(s||(s=new rS),s$(o))(function(e,t,i,n,s,o,a){var c=nO(e,i),u=nO(t,i),l=a.get(u);if(l){rD(e,i,l);return}var h=o?o(c,u,i+"",e,t,a):r,d=h===r;if(d){var f=sM(u),p=!f&&sq(u),g=!f&&!p&&s0(u);h=u,f||p||g?sM(c)?h=c:sU(c)?h=iB(c):p?(d=!1,h=iL(u,!0)):g?(d=!1,h=iU(u,!0)):h=[]:sY(u)||sT(u)?(h=c,sT(c)?h=s9(c):(!s$(c)||sB(c))&&(h=n_(u))):d=!1}d&&(a.set(u,h),s(h,u,n,o,a),a.delete(u)),rD(e,i,h)})(e,t,a,i,ii,n,s);else{var c=n?n(nO(e,a),o,a+"",e,t,s):r;c===r&&(c=o),rD(e,a,c)}},of)}function is(e,t){var i=e.length;if(i)return nw(t+=t<0?i:0,i)?e[t]:r}function io(e,t,r){t=t.length?td(t,function(e){return sM(e)?function(t){return rY(t,1===e.length?e[0]:e)}:e}):[oU];var i=-1;return t=td(t,tO(nh())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(ie(e,function(e,r,n){return{criteria:td(t,function(t){return t(e)}),index:++i,value:e}}),function(e,t){return function(e,t,r){for(var i=-1,n=e.criteria,s=t.criteria,o=n.length,a=r.length;++i<o;){var c=iq(n[i],s[i]);if(c){if(i>=a)return c;return c*("desc"==r[i]?-1:1)}}return e.index-t.index}(e,t,r)})}function ia(e,t,r){for(var i=-1,n=t.length,s={};++i<n;){var o=t[i],a=rY(e,o);r(a,o)&&ip(s,iN(o,e),a)}return s}function ic(e,t,r,i){var n=i?tw:tb,s=-1,o=t.length,a=e;for(e===t&&(t=iB(t)),r&&(a=td(e,tO(r)));++s<o;)for(var c=0,u=t[s],l=r?r(u):u;(c=n(a,l,c,i))>-1;)a!==e&&e3.call(a,c,1),e3.call(e,c,1);return e}function iu(e,t){for(var r=e?t.length:0,i=r-1;r--;){var n=t[r];if(r==i||n!==s){var s=n;nw(n)?e3.call(e,n,1):iC(e,n)}}return e}function il(e,t){return e+tZ(t8()*(t-e+1))}function ih(e,t){var r="";if(!e||t<1||t>9007199254740991)return r;do t%2&&(r+=e),(t=tZ(t/2))&&(e+=e);while(t);return r}function id(e,t){return nN(nk(e,t,oU),e+"")}function ip(e,t,i,n){if(!s$(e))return e;t=iN(t,e);for(var s=-1,o=t.length,a=o-1,c=e;null!=c&&++s<o;){var u=nU(t[s]),l=i;if("__proto__"===u||"constructor"===u||"prototype"===u)break;if(s!=a){var h=c[u];(l=n?n(h,u,c):r)===r&&(l=s$(h)?h:nw(t[s+1])?[]:{})}rP(c,u,l),c=c[u]}return e}var ig=rn?function(e,t){return rn.set(e,t),e}:oU,iy=e9?function(e,t){return e9(e,"toString",{configurable:!0,enumerable:!1,value:oM(t),writable:!0})}:oU;function iv(e,t,r){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(r=r>n?n:r)<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var s=em(n);++i<n;)s[i]=e[i+t];return s}function im(e,t){var r;return rU(e,function(e,i,n){return!(r=t(e,i,n))}),!!r}function i_(e,t,r){var i=0,n=null==e?i:e.length;if("number"==typeof t&&t==t&&n<=2147483647){for(;i<n;){var s=i+n>>>1,o=e[s];null!==o&&!sX(o)&&(r?o<=t:o<t)?i=s+1:n=s}return n}return ib(e,t,oU,r)}function ib(e,t,i,n){var s=0,o=null==e?0:e.length;if(0===o)return 0;t=i(t);for(var a=t!=t,c=null===t,u=sX(t),l=t===r;s<o;){var h=tZ((s+o)/2),d=i(e[h]),f=d!==r,p=null===d,g=d==d,y=sX(d);if(a)var v=n||g;else v=l?g&&(n||f):c?g&&f&&(n||!p):u?g&&f&&!p&&(n||!y):!p&&!y&&(n?d<=t:d<t);v?s=h+1:o=h}return t2(o,4294967294)}function iw(e,t){for(var r=-1,i=e.length,n=0,s=[];++r<i;){var o=e[r],a=t?t(o):o;if(!r||!sx(a,c)){var c=a;s[n++]=0===o?0:o}}return s}function iE(e){return"number"==typeof e?e:sX(e)?a:+e}function iS(e){if("string"==typeof e)return e;if(sM(e))return td(e,iS)+"";if(sX(e))return rf?rf.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}function iI(e,t,r){var i=-1,n=tl,s=e.length,o=!0,a=[],c=a;if(r)o=!1,n=th;else if(s>=200){var u=t?null:i9(e);if(u)return tB(u);o=!1,n=tR,c=new rE}else c=t?[]:a;e:for(;++i<s;){var l=e[i],h=t?t(l):l;if(l=r||0!==l?l:0,o&&h==h){for(var d=c.length;d--;)if(c[d]===h)continue e;t&&c.push(h),a.push(l)}else n(c,h,r)||(c!==a&&c.push(h),a.push(l))}return a}function iC(e,t){return t=iN(t,e),null==(e=nA(e,t))||delete e[nU(nJ(t))]}function iD(e,t,r,i){return ip(e,t,r(rY(e,t)),i)}function iP(e,t,r,i){for(var n=e.length,s=i?n:-1;(i?s--:++s<n)&&t(e[s],s,e););return r?iv(e,i?0:s,i?s+1:n):iv(e,i?s+1:0,i?n:s)}function ik(e,t){var r=e;return r instanceof rm&&(r=r.value()),tp(t,function(e,t){return t.func.apply(t.thisArg,tf([e],t.args))},r)}function iA(e,t,r){var i=e.length;if(i<2)return i?iI(e[0]):[];for(var n=-1,s=em(i);++n<i;)for(var o=e[n],a=-1;++a<i;)a!=n&&(s[n]=rj(s[n]||o,e[a],t,r));return iI(rW(s,1),t,r)}function iO(e,t,i){for(var n=-1,s=e.length,o=t.length,a={};++n<s;){var c=n<o?t[n]:r;i(a,e[n],c)}return a}function ix(e){return sU(e)?e:[]}function iR(e){return"function"==typeof e?e:oU}function iN(e,t){return sM(e)?e:nS(e,t)?[e]:nj(s7(e))}function iT(e,t,i){var n=e.length;return i=i===r?n:i,!t&&i>=n?e:iv(e,t,i)}var iM=tv||function(e){return e2.clearTimeout(e)};function iL(e,t){if(t)return e.slice();var r=e.length,i=eF?eF(r):new e.constructor(r);return e.copy(i),i}function ij(e){var t=new e.constructor(e.byteLength);return new eH(t).set(new eH(e)),t}function iU(e,t){var r=t?ij(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function iq(e,t){if(e!==t){var i=e!==r,n=null===e,s=e==e,o=sX(e),a=t!==r,c=null===t,u=t==t,l=sX(t);if(!c&&!l&&!o&&e>t||o&&a&&u&&!c&&!l||n&&a&&u||!i&&u||!s)return 1;if(!n&&!o&&!l&&e<t||l&&i&&s&&!n&&!o||c&&i&&s||!a&&s||!u)return -1}return 0}function iz(e,t,r,i){for(var n=-1,s=e.length,o=r.length,a=-1,c=t.length,u=t3(s-o,0),l=em(c+u),h=!i;++a<c;)l[a]=t[a];for(;++n<o;)(h||n<s)&&(l[r[n]]=e[n]);for(;u--;)l[a++]=e[n++];return l}function iH(e,t,r,i){for(var n=-1,s=e.length,o=-1,a=r.length,c=-1,u=t.length,l=t3(s-a,0),h=em(l+u),d=!i;++n<l;)h[n]=e[n];for(var f=n;++c<u;)h[f+c]=t[c];for(;++o<a;)(d||n<s)&&(h[f+r[o]]=e[n++]);return h}function iB(e,t){var r=-1,i=e.length;for(t||(t=em(i));++r<i;)t[r]=e[r];return t}function iW(e,t,i,n){var s=!i;i||(i={});for(var o=-1,a=t.length;++o<a;){var c=t[o],u=n?n(i[c],e[c],c,i,e):r;u===r&&(u=e[c]),s?rx(i,c,u):rP(i,c,u)}return i}function iF(e,t){return function(r,i){var n=sM(r)?to:rA,s=t?t():{};return n(r,e,nh(i,2),s)}}function i$(e){return id(function(t,i){var n=-1,s=i.length,o=s>1?i[s-1]:r,a=s>2?i[2]:r;for(o=e.length>3&&"function"==typeof o?(s--,o):r,a&&nE(i[0],i[1],a)&&(o=s<3?r:o,s=1),t=eS(t);++n<s;){var c=i[n];c&&e(t,c,n,o)}return t})}function iK(e,t){return function(r,i){if(null==r)return r;if(!sj(r))return e(r,i);for(var n=r.length,s=t?n:-1,o=eS(r);(t?s--:++s<n)&&!1!==i(o[s],s,o););return r}}function iV(e){return function(t,r,i){for(var n=-1,s=eS(t),o=i(t),a=o.length;a--;){var c=o[e?a:++n];if(!1===r(s[c],c,s))break}return t}}function iG(e){return function(t){var i=tU(t=s7(t))?tF(t):r,n=i?i[0]:t.charAt(0),s=i?iT(i,1).join(""):t.slice(1);return n[e]()+s}}function iY(e){return function(t){return tp(oR(oI(t).replace(eB,"")),e,"")}}function iZ(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=rg(e.prototype),i=e.apply(r,t);return s$(i)?i:r}}function iJ(e){return function(t,i,n){var s=eS(t);if(!sj(t)){var o=nh(i,3);t=od(t),i=function(e){return o(s[e],e,s)}}var a=e(t,i,n);return a>-1?s[o?t[a]:a]:r}}function iQ(e){return ns(function(t){var n=t.length,s=n,o=rv.prototype.thru;for(e&&t.reverse();s--;){var a=t[s];if("function"!=typeof a)throw new eD(i);if(o&&!c&&"wrapper"==nu(a))var c=new rv([],!0)}for(s=c?s:n;++s<n;){var u=nu(a=t[s]),l="wrapper"==u?nc(a):r;c=l&&nI(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[nu(l[0])].apply(c,l[3]):1==a.length&&nI(a)?c[u]():c.thru(a)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&sM(r))return c.plant(r).value();for(var i=0,s=n?t[i].apply(this,e):r;++i<n;)s=t[i].call(this,s);return s}})}function iX(e,t,i,n,s,o,a,c,u,l){var h=128&t,d=1&t,f=2&t,p=24&t,g=512&t,y=f?r:iZ(e);return function v(){for(var m=arguments.length,_=em(m),b=m;b--;)_[b]=arguments[b];if(p)var w=nl(v),E=function(e,t){for(var r=e.length,i=0;r--;)e[r]===t&&++i;return i}(_,w);if(n&&(_=iz(_,n,s,p)),o&&(_=iH(_,o,a,p)),m-=E,p&&m<l){var S=tH(_,w);return i8(e,t,iX,v.placeholder,i,_,S,c,u,l-m)}var I=d?i:this,C=f?I[e]:e;return m=_.length,c?_=function(e,t){for(var i=e.length,n=t2(t.length,i),s=iB(e);n--;){var o=t[n];e[n]=nw(o,i)?s[o]:r}return e}(_,c):g&&m>1&&_.reverse(),h&&u<m&&(_.length=u),this&&this!==e2&&this instanceof v&&(C=y||iZ(C)),C.apply(I,_)}}function i0(e,t){return function(r,i){var n,s;return n=t(i),s={},rK(r,function(t,r,i){e(s,n(t),r,i)}),s}}function i1(e,t){return function(i,n){var s;if(i===r&&n===r)return t;if(i!==r&&(s=i),n!==r){if(s===r)return n;"string"==typeof i||"string"==typeof n?(i=iS(i),n=iS(n)):(i=iE(i),n=iE(n)),s=e(i,n)}return s}}function i3(e){return ns(function(t){return t=td(t,tO(nh())),id(function(r){var i=this;return e(t,function(e){return ts(e,i,r)})})})}function i2(e,t){var i=(t=t===r?" ":iS(t)).length;if(i<2)return i?ih(t,e):t;var n=ih(t,tY(e/tW(t)));return tU(t)?iT(tF(n),0,e).join(""):n.slice(0,e)}function i5(e){return function(t,i,n){return n&&"number"!=typeof n&&nE(t,i,n)&&(i=n=r),t=s5(t),i===r?(i=t,t=0):i=s5(i),n=n===r?t<i?1:-1:s5(n),function(e,t,r,i){for(var n=-1,s=t3(tY((t-e)/(r||1)),0),o=em(s);s--;)o[i?s:++n]=e,e+=r;return o}(t,i,n,e)}}function i6(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=s4(t),r=s4(r)),e(t,r)}}function i8(e,t,i,n,s,o,a,c,u,l){var h=8&t,d=h?a:r,f=h?r:a,p=h?o:r,g=h?r:o;t|=h?32:64,4&(t&=~(h?64:32))||(t&=-4);var y=[e,t,s,p,d,g,f,c,u,l],v=i.apply(r,y);return nI(e)&&nx(v,y),v.placeholder=n,nT(v,e,t)}function i4(e){var t=eE[e];return function(e,r){if(e=s4(e),(r=null==r?0:t2(s6(r),292))&&tX(e)){var i=(s7(e)+"e").split("e");return+((i=(s7(t(i[0]+"e"+(+i[1]+r)))+"e").split("e"))[0]+"e"+(+i[1]-r))}return t(e)}}var i9=rt&&1/tB(new rt([,-0]))[1]==o?function(e){return new rt(e)}:oW;function i7(e){return function(t){var r,i,n=nv(t);return n==y?tq(t):n==w?(r=-1,i=Array(t.size),t.forEach(function(e){i[++r]=[e,e]}),i):td(e(t),function(e){return[e,t[e]]})}}function ne(e,t,n,o,a,c,u,l){var h=2&t;if(!h&&"function"!=typeof e)throw new eD(i);var d=o?o.length:0;if(d||(t&=-97,o=a=r),u=u===r?u:t3(s6(u),0),l=l===r?l:s6(l),d-=a?a.length:0,64&t){var f=o,p=a;o=a=r}var g=h?r:nc(e),y=[e,t,n,o,a,f,p,c,u,l];if(g&&function(e,t){var r=e[1],i=t[1],n=r|i,o=n<131,a=128==i&&8==r||128==i&&256==r&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==r;if(o||a){1&i&&(e[2]=t[2],n|=1&r?0:4);var c=t[3];if(c){var u=e[3];e[3]=u?iz(u,c,t[4]):c,e[4]=u?tH(e[3],s):t[4]}(c=t[5])&&(u=e[5],e[5]=u?iH(u,c,t[6]):c,e[6]=u?tH(e[5],s):t[6]),(c=t[7])&&(e[7]=c),128&i&&(e[8]=null==e[8]?t[8]:t2(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=n}}(y,g),e=y[0],t=y[1],n=y[2],o=y[3],a=y[4],(l=y[9]=y[9]===r?h?0:e.length:t3(y[9]-d,0))||!(24&t)||(t&=-25),t&&1!=t)8==t||16==t?(v=e,m=t,_=l,b=iZ(v),R=function e(){for(var t=arguments.length,i=em(t),n=t,s=nl(e);n--;)i[n]=arguments[n];var o=t<3&&i[0]!==s&&i[t-1]!==s?[]:tH(i,s);return(t-=o.length)<_?i8(v,m,iX,e.placeholder,r,i,o,r,r,_-t):ts(this&&this!==e2&&this instanceof e?b:v,this,i)}):32!=t&&33!=t||a.length?R=iX.apply(r,y):(w=e,E=t,S=n,I=o,C=1&E,D=iZ(w),R=function e(){for(var t=-1,r=arguments.length,i=-1,n=I.length,s=em(n+r),o=this&&this!==e2&&this instanceof e?D:w;++i<n;)s[i]=I[i];for(;r--;)s[i++]=arguments[++t];return ts(o,C?S:this,s)});else var v,m,_,b,w,E,S,I,C,D,P,k,A,O,x,R=(P=e,k=t,A=n,O=1&k,x=iZ(P),function e(){return(this&&this!==e2&&this instanceof e?x:P).apply(O?A:this,arguments)});return nT((g?ig:nx)(R,y),e,t)}function nt(e,t,i,n){return e===r||sx(e,eA[i])&&!eR.call(n,i)?t:e}function nr(e,t,i,n,s,o){return s$(e)&&s$(t)&&(o.set(t,e),ii(e,t,r,nr,o),o.delete(t)),e}function ni(e){return sY(e)?r:e}function nn(e,t,i,n,s,o){var a=1&i,c=e.length,u=t.length;if(c!=u&&!(a&&u>c))return!1;var l=o.get(e),h=o.get(t);if(l&&h)return l==t&&h==e;var d=-1,f=!0,p=2&i?new rE:r;for(o.set(e,t),o.set(t,e);++d<c;){var g=e[d],y=t[d];if(n)var v=a?n(y,g,d,t,e,o):n(g,y,d,e,t,o);if(v!==r){if(v)continue;f=!1;break}if(p){if(!ty(t,function(e,t){if(!tR(p,t)&&(g===e||s(g,e,i,n,o)))return p.push(t)})){f=!1;break}}else if(!(g===y||s(g,y,i,n,o))){f=!1;break}}return o.delete(e),o.delete(t),f}function ns(e){return nN(nk(e,r,nK),e+"")}function no(e){return rZ(e,od,ng)}function na(e){return rZ(e,of,ny)}var nc=rn?function(e){return rn.get(e)}:oW;function nu(e){for(var t=e.name+"",r=rs[t],i=eR.call(rs,t)?r.length:0;i--;){var n=r[i],s=n.func;if(null==s||s==e)return n.name}return t}function nl(e){return(eR.call(rp,"placeholder")?rp:e).placeholder}function nh(){var e=rp.iteratee||oq;return e=e===oq?r4:e,arguments.length?e(arguments[0],arguments[1]):e}function nd(e,t){var r,i=e.__data__;return("string"==(r=typeof t)||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?i["string"==typeof t?"string":"hash"]:i.map}function nf(e){for(var t=od(e),r=t.length;r--;){var i=t[r],n=e[i];t[r]=[i,n,n==n&&!s$(n)]}return t}function np(e,t){var i=null==e?r:e[t];return r8(i)?i:r}var ng=tJ?function(e){return null==e?[]:tu(tJ(e=eS(e)),function(t){return e1.call(e,t)})}:oZ,ny=tJ?function(e){for(var t=[];e;)tf(t,ng(e)),e=eK(e);return t}:oZ,nv=rJ;function nm(e,t,r){t=iN(t,e);for(var i=-1,n=t.length,s=!1;++i<n;){var o=nU(t[i]);if(!(s=null!=e&&r(e,o)))break;e=e[o]}return s||++i!=n?s:!!(n=null==e?0:e.length)&&sF(n)&&nw(o,n)&&(sM(e)||sT(e))}function n_(e){return"function"!=typeof e.constructor||nD(e)?{}:rg(eK(e))}function nb(e){return sM(e)||sT(e)||!!(e5&&e&&e[e5])}function nw(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&("number"==r||"symbol"!=r&&eh.test(e))&&e>-1&&e%1==0&&e<t}function nE(e,t,r){if(!s$(r))return!1;var i=typeof t;return("number"==i?!!(sj(r)&&nw(t,r.length)):"string"==i&&t in r)&&sx(r[t],e)}function nS(e,t){if(sM(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||sX(e))||V.test(e)||!K.test(e)||null!=t&&e in eS(t)}function nI(e){var t=nu(e),r=rp[t];if("function"!=typeof r||!(t in rm.prototype))return!1;if(e===r)return!0;var i=nc(r);return!!i&&e===i[0]}(t9&&nv(new t9(new ArrayBuffer(1)))!=D||t7&&nv(new t7)!=y||re&&nv(re.resolve())!=_||rt&&nv(new rt)!=w||rr&&nv(new rr)!=I)&&(nv=function(e){var t=rJ(e),i=t==m?e.constructor:r,n=i?nq(i):"";if(n)switch(n){case ro:return D;case ra:return y;case rc:return _;case ru:return w;case rl:return I}return t});var nC=eO?sB:oJ;function nD(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||eA)}function nP(e,t){return function(i){return null!=i&&i[e]===t&&(t!==r||e in eS(i))}}function nk(e,t,i){return t=t3(t===r?e.length-1:t,0),function(){for(var r=arguments,n=-1,s=t3(r.length-t,0),o=em(s);++n<s;)o[n]=r[t+n];n=-1;for(var a=em(t+1);++n<t;)a[n]=r[n];return a[t]=i(o),ts(e,this,a)}}function nA(e,t){return t.length<2?e:rY(e,iv(t,0,-1))}function nO(e,t){if(!("constructor"===t&&"function"==typeof e[t])&&"__proto__"!=t)return e[t]}var nx=nM(ig),nR=tG||function(e,t){return e2.setTimeout(e,t)},nN=nM(iy);function nT(e,t,r){var i,n,s=t+"";return nN(e,function(e,t){var r=t.length;if(!r)return e;var i=r-1;return t[i]=(r>1?"& ":"")+t[i],t=t.join(r>2?", ":" "),e.replace(X,`{
/* [wrapped with `+t+`] */
`)}(s,(i=(n=s.match(ee))?n[1].split(et):[],ta(c,function(e){var t="_."+e[0];r&e[1]&&!tl(i,t)&&i.push(t)}),i.sort())))}function nM(e){var t=0,i=0;return function(){var n=t5(),s=16-(n-i);if(i=n,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function nL(e,t){var i=-1,n=e.length,s=n-1;for(t=t===r?n:t;++i<t;){var o=il(i,s),a=e[o];e[o]=e[i],e[i]=a}return e.length=t,e}var nj=(ey=(eg=sC(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(G,function(e,r,i,n){t.push(i?n.replace(en,"$1"):r||e)}),t},function(e){return 500===ey.size&&ey.clear(),e})).cache,eg);function nU(e){if("string"==typeof e||sX(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}function nq(e){if(null!=e){try{return ex.call(e)}catch{}try{return e+""}catch{}}return""}function nz(e){if(e instanceof rm)return e.clone();var t=new rv(e.__wrapped__,e.__chain__);return t.__actions__=iB(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var nH=id(function(e,t){return sU(e)?rj(e,rW(t,1,sU,!0)):[]}),nB=id(function(e,t){var i=nJ(t);return sU(i)&&(i=r),sU(e)?rj(e,rW(t,1,sU,!0),nh(i,2)):[]}),nW=id(function(e,t){var i=nJ(t);return sU(i)&&(i=r),sU(e)?rj(e,rW(t,1,sU,!0),r,i):[]});function nF(e,t,r){var i=null==e?0:e.length;if(!i)return -1;var n=null==r?0:s6(r);return n<0&&(n=t3(i+n,0)),t_(e,nh(t,3),n)}function n$(e,t,i){var n=null==e?0:e.length;if(!n)return -1;var s=n-1;return i!==r&&(s=s6(i),s=i<0?t3(n+s,0):t2(s,n-1)),t_(e,nh(t,3),s,!0)}function nK(e){return(null==e?0:e.length)?rW(e,1):[]}function nV(e){return e&&e.length?e[0]:r}var nG=id(function(e){var t=td(e,ix);return t.length&&t[0]===e[0]?r1(t):[]}),nY=id(function(e){var t=nJ(e),i=td(e,ix);return t===nJ(i)?t=r:i.pop(),i.length&&i[0]===e[0]?r1(i,nh(t,2)):[]}),nZ=id(function(e){var t=nJ(e),i=td(e,ix);return(t="function"==typeof t?t:r)&&i.pop(),i.length&&i[0]===e[0]?r1(i,r,t):[]});function nJ(e){var t=null==e?0:e.length;return t?e[t-1]:r}var nQ=id(nX);function nX(e,t){return e&&e.length&&t&&t.length?ic(e,t):e}var n0=ns(function(e,t){var r=null==e?0:e.length,i=rR(e,t);return iu(e,td(t,function(e){return nw(e,r)?+e:e}).sort(iq)),i});function n1(e){return null==e?e:t4.call(e)}var n3=id(function(e){return iI(rW(e,1,sU,!0))}),n2=id(function(e){var t=nJ(e);return sU(t)&&(t=r),iI(rW(e,1,sU,!0),nh(t,2))}),n5=id(function(e){var t=nJ(e);return t="function"==typeof t?t:r,iI(rW(e,1,sU,!0),r,t)});function n6(e){if(!(e&&e.length))return[];var t=0;return e=tu(e,function(e){if(sU(e))return t=t3(e.length,t),!0}),tk(t,function(t){return td(e,tI(t))})}function n8(e,t){if(!(e&&e.length))return[];var i=n6(e);return null==t?i:td(i,function(e){return ts(t,r,e)})}var n4=id(function(e,t){return sU(e)?rj(e,t):[]}),n9=id(function(e){return iA(tu(e,sU))}),n7=id(function(e){var t=nJ(e);return sU(t)&&(t=r),iA(tu(e,sU),nh(t,2))}),se=id(function(e){var t=nJ(e);return t="function"==typeof t?t:r,iA(tu(e,sU),r,t)}),st=id(n6),sr=id(function(e){var t=e.length,i=t>1?e[t-1]:r;return i="function"==typeof i?(e.pop(),i):r,n8(e,i)});function si(e){var t=rp(e);return t.__chain__=!0,t}function sn(e,t){return t(e)}var ss=ns(function(e){var t=e.length,i=t?e[0]:0,n=this.__wrapped__,s=function(t){return rR(t,e)};return!(t>1)&&!this.__actions__.length&&n instanceof rm&&nw(i)?((n=n.slice(i,+i+(t?1:0))).__actions__.push({func:sn,args:[s],thisArg:r}),new rv(n,this.__chain__).thru(function(e){return t&&!e.length&&e.push(r),e})):this.thru(s)}),so=iF(function(e,t,r){eR.call(e,r)?++e[r]:rx(e,r,1)}),sa=iJ(nF),sc=iJ(n$);function su(e,t){return(sM(e)?ta:rU)(e,nh(t,3))}function sl(e,t){return(sM(e)?function(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}:rq)(e,nh(t,3))}var sh=iF(function(e,t,r){eR.call(e,r)?e[r].push(t):rx(e,r,[t])}),sd=id(function(e,t,r){var i=-1,n="function"==typeof t,s=sj(e)?em(e.length):[];return rU(e,function(e){s[++i]=n?ts(t,e,r):r3(e,t,r)}),s}),sf=iF(function(e,t,r){rx(e,r,t)});function sp(e,t){return(sM(e)?td:ie)(e,nh(t,3))}var sg=iF(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),sy=id(function(e,t){if(null==e)return[];var r=t.length;return r>1&&nE(e,t[0],t[1])?t=[]:r>2&&nE(t[0],t[1],t[2])&&(t=[t[0]]),io(e,rW(t,1),[])}),sv=tC||function(){return e2.Date.now()};function sm(e,t,i){return t=i?r:t,t=e&&null==t?e.length:t,ne(e,128,r,r,r,r,t)}function s_(e,t){var n;if("function"!=typeof t)throw new eD(i);return e=s6(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var sb=id(function(e,t,r){var i=1;if(r.length){var n=tH(r,nl(sb));i|=32}return ne(e,i,t,r,n)}),sw=id(function(e,t,r){var i=3;if(r.length){var n=tH(r,nl(sw));i|=32}return ne(t,i,e,r,n)});function sE(e,t,n){var s,o,a,c,u,l,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new eD(i);function g(t){var i=s,n=o;return s=o=r,h=t,c=e.apply(n,i)}function y(e){var i=e-l,n=e-h;return l===r||i>=t||i<0||f&&n>=a}function v(){var e,r,i,n=sv();if(y(n))return m(n);u=nR(v,(e=n-l,r=n-h,i=t-e,f?t2(i,a-r):i))}function m(e){return u=r,p&&s?g(e):(s=o=r,c)}function _(){var e,i=sv(),n=y(i);if(s=arguments,o=this,l=i,n){if(u===r)return h=e=l,u=nR(v,t),d?g(e):c;if(f)return iM(u),u=nR(v,t),g(l)}return u===r&&(u=nR(v,t)),c}return t=s4(t)||0,s$(n)&&(d=!!n.leading,a=(f="maxWait"in n)?t3(s4(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),_.cancel=function(){u!==r&&iM(u),h=0,s=l=o=u=r},_.flush=function(){return u===r?c:m(sv())},_}var sS=id(function(e,t){return rL(e,1,t)}),sI=id(function(e,t,r){return rL(e,s4(t)||0,r)});function sC(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new eD(i);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var o=e.apply(this,i);return r.cache=s.set(n,o)||s,o};return r.cache=new(sC.Cache||rw),r}function sD(e){if("function"!=typeof e)throw new eD(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}sC.Cache=rw;var sP=id(function(e,t){var r=(t=1==t.length&&sM(t[0])?td(t[0],tO(nh())):td(rW(t,1),tO(nh()))).length;return id(function(i){for(var n=-1,s=t2(i.length,r);++n<s;)i[n]=t[n].call(this,i[n]);return ts(e,this,i)})}),sk=id(function(e,t){var i=tH(t,nl(sk));return ne(e,32,r,t,i)}),sA=id(function(e,t){var i=tH(t,nl(sA));return ne(e,64,r,t,i)}),sO=ns(function(e,t){return ne(e,256,r,r,r,t)});function sx(e,t){return e===t||e!=e&&t!=t}var sR=i6(rQ),sN=i6(function(e,t){return e>=t}),sT=r2(function(){return arguments}())?r2:function(e){return sK(e)&&eR.call(e,"callee")&&!e1.call(e,"callee")},sM=em.isArray,sL=e7?tO(e7):function(e){return sK(e)&&rJ(e)==C};function sj(e){return null!=e&&sF(e.length)&&!sB(e)}function sU(e){return sK(e)&&sj(e)}var sq=tQ||oJ,sz=te?tO(te):function(e){return sK(e)&&rJ(e)==d};function sH(e){if(!sK(e))return!1;var t=rJ(e);return t==f||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!sY(e)}function sB(e){if(!s$(e))return!1;var t=rJ(e);return t==p||t==g||"[object AsyncFunction]"==t||"[object Proxy]"==t}function sW(e){return"number"==typeof e&&e==s6(e)}function sF(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function s$(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function sK(e){return null!=e&&"object"==typeof e}var sV=tt?tO(tt):function(e){return sK(e)&&nv(e)==y};function sG(e){return"number"==typeof e||sK(e)&&rJ(e)==v}function sY(e){if(!sK(e)||rJ(e)!=m)return!1;var t=eK(e);if(null===t)return!0;var r=eR.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&ex.call(r)==eL}var sZ=tr?tO(tr):function(e){return sK(e)&&rJ(e)==b},sJ=ti?tO(ti):function(e){return sK(e)&&nv(e)==w};function sQ(e){return"string"==typeof e||!sM(e)&&sK(e)&&rJ(e)==E}function sX(e){return"symbol"==typeof e||sK(e)&&rJ(e)==S}var s0=tn?tO(tn):function(e){return sK(e)&&sF(e.length)&&!!eZ[rJ(e)]},s1=i6(r7),s3=i6(function(e,t){return e<=t});function s2(e){if(!e)return[];if(sj(e))return sQ(e)?tF(e):iB(e);if(e6&&e[e6])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[e6]());var t=nv(e);return(t==y?tq:t==w?tB:ow)(e)}function s5(e){return e?(e=s4(e))===o||e===-o?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}function s6(e){var t=s5(e),r=t%1;return t==t?r?t-r:t:0}function s8(e){return e?rN(s6(e),0,4294967295):0}function s4(e){if("number"==typeof e)return e;if(sX(e))return a;if(s$(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s$(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=tA(e);var r=ec.test(e);return r||el.test(e)?e0(e.slice(2),r?2:8):ea.test(e)?a:+e}function s9(e){return iW(e,of(e))}function s7(e){return null==e?"":iS(e)}var oe=i$(function(e,t){if(nD(t)||sj(t)){iW(t,od(t),e);return}for(var r in t)eR.call(t,r)&&rP(e,r,t[r])}),ot=i$(function(e,t){iW(t,of(t),e)}),or=i$(function(e,t,r,i){iW(t,of(t),e,i)}),oi=i$(function(e,t,r,i){iW(t,od(t),e,i)}),on=ns(rR),os=id(function(e,t){e=eS(e);var i=-1,n=t.length,s=n>2?t[2]:r;for(s&&nE(t[0],t[1],s)&&(n=1);++i<n;)for(var o=t[i],a=of(o),c=-1,u=a.length;++c<u;){var l=a[c],h=e[l];(h===r||sx(h,eA[l])&&!eR.call(e,l))&&(e[l]=o[l])}return e}),oo=id(function(e){return e.push(r,nr),ts(og,r,e)});function oa(e,t,i){var n=null==e?r:rY(e,t);return n===r?i:n}function oc(e,t){return null!=e&&nm(e,t,r0)}var ou=i0(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=eM.call(t)),e[t]=r},oM(oU)),ol=i0(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=eM.call(t)),eR.call(e,t)?e[t].push(r):e[t]=[r]},nh),oh=id(r3);function od(e){return sj(e)?rI(e):r9(e)}function of(e){return sj(e)?rI(e,!0):function(e){if(!s$(e))return function(e){var t=[];if(null!=e)for(var r in eS(e))t.push(r);return t}(e);var t=nD(e),r=[];for(var i in e)"constructor"==i&&(t||!eR.call(e,i))||r.push(i);return r}(e)}var op=i$(function(e,t,r){ii(e,t,r)}),og=i$(function(e,t,r,i){ii(e,t,r,i)}),oy=ns(function(e,t){var r={};if(null==e)return r;var i=!1;t=td(t,function(t){return t=iN(t,e),i||(i=t.length>1),t}),iW(e,na(e),r),i&&(r=rT(r,7,ni));for(var n=t.length;n--;)iC(r,t[n]);return r}),ov=ns(function(e,t){return null==e?{}:ia(e,t,function(t,r){return oc(e,r)})});function om(e,t){if(null==e)return{};var r=td(na(e),function(e){return[e]});return t=nh(t),ia(e,r,function(e,r){return t(e,r[0])})}var o_=i7(od),ob=i7(of);function ow(e){return null==e?[]:tx(e,od(e))}var oE=iY(function(e,t,r){return t=t.toLowerCase(),e+(r?oS(t):t)});function oS(e){return ox(s7(e).toLowerCase())}function oI(e){return(e=s7(e))&&e.replace(ed,tM).replace(eW,"")}var oC=iY(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),oD=iY(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),oP=iG("toLowerCase"),ok=iY(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),oA=iY(function(e,t,r){return e+(r?" ":"")+ox(t)}),oO=iY(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),ox=iG("toUpperCase");function oR(e,t,i){var n;return e=s7(e),(t=i?r:t)===r?(n=e,eV.test(n))?e.match(e$)||[]:e.match(er)||[]:e.match(t)||[]}var oN=id(function(e,t){try{return ts(e,r,t)}catch(e){return sH(e)?e:new eb(e)}}),oT=ns(function(e,t){return ta(t,function(t){rx(e,t=nU(t),sb(e[t],e))}),e});function oM(e){return function(){return e}}var oL=iQ(),oj=iQ(!0);function oU(e){return e}function oq(e){return r4("function"==typeof e?e:rT(e,1))}var oz=id(function(e,t){return function(r){return r3(r,e,t)}}),oH=id(function(e,t){return function(r){return r3(e,r,t)}});function oB(e,t,r){var i=od(t),n=rG(t,i);null!=r||s$(t)&&(n.length||!i.length)||(r=t,t=e,e=this,n=rG(t,od(t)));var s=!(s$(r)&&"chain"in r)||!!r.chain,o=sB(e);return ta(n,function(r){var i=t[r];e[r]=i,o&&(e.prototype[r]=function(){var t=this.__chain__;if(s||t){var r=e(this.__wrapped__);return(r.__actions__=iB(this.__actions__)).push({func:i,args:arguments,thisArg:e}),r.__chain__=t,r}return i.apply(e,tf([this.value()],arguments))})}),e}function oW(){}var oF=i3(td),o$=i3(tc),oK=i3(ty);function oV(e){return nS(e)?tI(nU(e)):function(t){return rY(t,e)}}var oG=i5(),oY=i5(!0);function oZ(){return[]}function oJ(){return!1}var oQ=i1(function(e,t){return e+t},0),oX=i4("ceil"),o0=i1(function(e,t){return e/t},1),o1=i4("floor"),o3=i1(function(e,t){return e*t},1),o2=i4("round"),o5=i1(function(e,t){return e-t},0);return rp.after=function(e,t){if("function"!=typeof t)throw new eD(i);return e=s6(e),function(){if(--e<1)return t.apply(this,arguments)}},rp.ary=sm,rp.assign=oe,rp.assignIn=ot,rp.assignInWith=or,rp.assignWith=oi,rp.at=on,rp.before=s_,rp.bind=sb,rp.bindAll=oT,rp.bindKey=sw,rp.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return sM(e)?e:[e]},rp.chain=si,rp.chunk=function(e,t,i){t=(i?nE(e,t,i):t===r)?1:t3(s6(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var s=0,o=0,a=em(tY(n/t));s<n;)a[o++]=iv(e,s,s+=t);return a},rp.compact=function(e){for(var t=-1,r=null==e?0:e.length,i=0,n=[];++t<r;){var s=e[t];s&&(n[i++]=s)}return n},rp.concat=function(){var e=arguments.length;if(!e)return[];for(var t=em(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return tf(sM(r)?iB(r):[r],rW(t,1))},rp.cond=function(e){var t=null==e?0:e.length,r=nh();return e=t?td(e,function(e){if("function"!=typeof e[1])throw new eD(i);return[r(e[0]),e[1]]}):[],id(function(r){for(var i=-1;++i<t;){var n=e[i];if(ts(n[0],this,r))return ts(n[1],this,r)}})},rp.conforms=function(e){var t,r;return r=od(t=rT(e,1)),function(e){return rM(e,t,r)}},rp.constant=oM,rp.countBy=so,rp.create=function(e,t){var r=rg(e);return null==t?r:rO(r,t)},rp.curry=function e(t,i,n){i=n?r:i;var s=ne(t,8,r,r,r,r,r,i);return s.placeholder=e.placeholder,s},rp.curryRight=function e(t,i,n){i=n?r:i;var s=ne(t,16,r,r,r,r,r,i);return s.placeholder=e.placeholder,s},rp.debounce=sE,rp.defaults=os,rp.defaultsDeep=oo,rp.defer=sS,rp.delay=sI,rp.difference=nH,rp.differenceBy=nB,rp.differenceWith=nW,rp.drop=function(e,t,i){var n=null==e?0:e.length;return n?iv(e,(t=i||t===r?1:s6(t))<0?0:t,n):[]},rp.dropRight=function(e,t,i){var n=null==e?0:e.length;return n?iv(e,0,(t=n-(t=i||t===r?1:s6(t)))<0?0:t):[]},rp.dropRightWhile=function(e,t){return e&&e.length?iP(e,nh(t,3),!0,!0):[]},rp.dropWhile=function(e,t){return e&&e.length?iP(e,nh(t,3),!0):[]},rp.fill=function(e,t,i,n){var s=null==e?0:e.length;return s?(i&&"number"!=typeof i&&nE(e,t,i)&&(i=0,n=s),function(e,t,i,n){var s=e.length;for((i=s6(i))<0&&(i=-i>s?0:s+i),(n=n===r||n>s?s:s6(n))<0&&(n+=s),n=i>n?0:s8(n);i<n;)e[i++]=t;return e}(e,t,i,n)):[]},rp.filter=function(e,t){return(sM(e)?tu:rB)(e,nh(t,3))},rp.flatMap=function(e,t){return rW(sp(e,t),1)},rp.flatMapDeep=function(e,t){return rW(sp(e,t),o)},rp.flatMapDepth=function(e,t,i){return i=i===r?1:s6(i),rW(sp(e,t),i)},rp.flatten=nK,rp.flattenDeep=function(e){return(null==e?0:e.length)?rW(e,o):[]},rp.flattenDepth=function(e,t){return(null==e?0:e.length)?rW(e,t=t===r?1:s6(t)):[]},rp.flip=function(e){return ne(e,512)},rp.flow=oL,rp.flowRight=oj,rp.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,i={};++t<r;){var n=e[t];i[n[0]]=n[1]}return i},rp.functions=function(e){return null==e?[]:rG(e,od(e))},rp.functionsIn=function(e){return null==e?[]:rG(e,of(e))},rp.groupBy=sh,rp.initial=function(e){return(null==e?0:e.length)?iv(e,0,-1):[]},rp.intersection=nG,rp.intersectionBy=nY,rp.intersectionWith=nZ,rp.invert=ou,rp.invertBy=ol,rp.invokeMap=sd,rp.iteratee=oq,rp.keyBy=sf,rp.keys=od,rp.keysIn=of,rp.map=sp,rp.mapKeys=function(e,t){var r={};return t=nh(t,3),rK(e,function(e,i,n){rx(r,t(e,i,n),e)}),r},rp.mapValues=function(e,t){var r={};return t=nh(t,3),rK(e,function(e,i,n){rx(r,i,t(e,i,n))}),r},rp.matches=function(e){return it(rT(e,1))},rp.matchesProperty=function(e,t){return ir(e,rT(t,1))},rp.memoize=sC,rp.merge=op,rp.mergeWith=og,rp.method=oz,rp.methodOf=oH,rp.mixin=oB,rp.negate=sD,rp.nthArg=function(e){return e=s6(e),id(function(t){return is(t,e)})},rp.omit=oy,rp.omitBy=function(e,t){return om(e,sD(nh(t)))},rp.once=function(e){return s_(2,e)},rp.orderBy=function(e,t,i,n){return null==e?[]:(sM(t)||(t=null==t?[]:[t]),sM(i=n?r:i)||(i=null==i?[]:[i]),io(e,t,i))},rp.over=oF,rp.overArgs=sP,rp.overEvery=o$,rp.overSome=oK,rp.partial=sk,rp.partialRight=sA,rp.partition=sg,rp.pick=ov,rp.pickBy=om,rp.property=oV,rp.propertyOf=function(e){return function(t){return null==e?r:rY(e,t)}},rp.pull=nQ,rp.pullAll=nX,rp.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?ic(e,t,nh(r,2)):e},rp.pullAllWith=function(e,t,i){return e&&e.length&&t&&t.length?ic(e,t,r,i):e},rp.pullAt=n0,rp.range=oG,rp.rangeRight=oY,rp.rearg=sO,rp.reject=function(e,t){return(sM(e)?tu:rB)(e,sD(nh(t,3)))},rp.remove=function(e,t){var r=[];if(!(e&&e.length))return r;var i=-1,n=[],s=e.length;for(t=nh(t,3);++i<s;){var o=e[i];t(o,i,e)&&(r.push(o),n.push(i))}return iu(e,n),r},rp.rest=function(e,t){if("function"!=typeof e)throw new eD(i);return id(e,t=t===r?t:s6(t))},rp.reverse=n1,rp.sampleSize=function(e,t,i){return t=(i?nE(e,t,i):t===r)?1:s6(t),(sM(e)?function(e,t){return nL(iB(e),rN(t,0,e.length))}:function(e,t){var r=ow(e);return nL(r,rN(t,0,r.length))})(e,t)},rp.set=function(e,t,r){return null==e?e:ip(e,t,r)},rp.setWith=function(e,t,i,n){return n="function"==typeof n?n:r,null==e?e:ip(e,t,i,n)},rp.shuffle=function(e){return(sM(e)?function(e){return nL(iB(e))}:function(e){return nL(ow(e))})(e)},rp.slice=function(e,t,i){var n=null==e?0:e.length;return n?(i&&"number"!=typeof i&&nE(e,t,i)?(t=0,i=n):(t=null==t?0:s6(t),i=i===r?n:s6(i)),iv(e,t,i)):[]},rp.sortBy=sy,rp.sortedUniq=function(e){return e&&e.length?iw(e):[]},rp.sortedUniqBy=function(e,t){return e&&e.length?iw(e,nh(t,2)):[]},rp.split=function(e,t,i){return i&&"number"!=typeof i&&nE(e,t,i)&&(t=i=r),(i=i===r?4294967295:i>>>0)?(e=s7(e))&&("string"==typeof t||null!=t&&!sZ(t))&&!(t=iS(t))&&tU(e)?iT(tF(e),0,i):e.split(t,i):[]},rp.spread=function(e,t){if("function"!=typeof e)throw new eD(i);return t=null==t?0:t3(s6(t),0),id(function(r){var i=r[t],n=iT(r,0,t);return i&&tf(n,i),ts(e,this,n)})},rp.tail=function(e){var t=null==e?0:e.length;return t?iv(e,1,t):[]},rp.take=function(e,t,i){return e&&e.length?iv(e,0,(t=i||t===r?1:s6(t))<0?0:t):[]},rp.takeRight=function(e,t,i){var n=null==e?0:e.length;return n?iv(e,(t=n-(t=i||t===r?1:s6(t)))<0?0:t,n):[]},rp.takeRightWhile=function(e,t){return e&&e.length?iP(e,nh(t,3),!1,!0):[]},rp.takeWhile=function(e,t){return e&&e.length?iP(e,nh(t,3)):[]},rp.tap=function(e,t){return t(e),e},rp.throttle=function(e,t,r){var n=!0,s=!0;if("function"!=typeof e)throw new eD(i);return s$(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),sE(e,t,{leading:n,maxWait:t,trailing:s})},rp.thru=sn,rp.toArray=s2,rp.toPairs=o_,rp.toPairsIn=ob,rp.toPath=function(e){return sM(e)?td(e,nU):sX(e)?[e]:iB(nj(s7(e)))},rp.toPlainObject=s9,rp.transform=function(e,t,r){var i=sM(e),n=i||sq(e)||s0(e);if(t=nh(t,4),null==r){var s=e&&e.constructor;r=n?i?new s:[]:s$(e)&&sB(s)?rg(eK(e)):{}}return(n?ta:rK)(e,function(e,i,n){return t(r,e,i,n)}),r},rp.unary=function(e){return sm(e,1)},rp.union=n3,rp.unionBy=n2,rp.unionWith=n5,rp.uniq=function(e){return e&&e.length?iI(e):[]},rp.uniqBy=function(e,t){return e&&e.length?iI(e,nh(t,2)):[]},rp.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?iI(e,r,t):[]},rp.unset=function(e,t){return null==e||iC(e,t)},rp.unzip=n6,rp.unzipWith=n8,rp.update=function(e,t,r){return null==e?e:iD(e,t,iR(r))},rp.updateWith=function(e,t,i,n){return n="function"==typeof n?n:r,null==e?e:iD(e,t,iR(i),n)},rp.values=ow,rp.valuesIn=function(e){return null==e?[]:tx(e,of(e))},rp.without=n4,rp.words=oR,rp.wrap=function(e,t){return sk(iR(t),e)},rp.xor=n9,rp.xorBy=n7,rp.xorWith=se,rp.zip=st,rp.zipObject=function(e,t){return iO(e||[],t||[],rP)},rp.zipObjectDeep=function(e,t){return iO(e||[],t||[],ip)},rp.zipWith=sr,rp.entries=o_,rp.entriesIn=ob,rp.extend=ot,rp.extendWith=or,oB(rp,rp),rp.add=oQ,rp.attempt=oN,rp.camelCase=oE,rp.capitalize=oS,rp.ceil=oX,rp.clamp=function(e,t,i){return i===r&&(i=t,t=r),i!==r&&(i=(i=s4(i))==i?i:0),t!==r&&(t=(t=s4(t))==t?t:0),rN(s4(e),t,i)},rp.clone=function(e){return rT(e,4)},rp.cloneDeep=function(e){return rT(e,5)},rp.cloneDeepWith=function(e,t){return rT(e,5,t="function"==typeof t?t:r)},rp.cloneWith=function(e,t){return rT(e,4,t="function"==typeof t?t:r)},rp.conformsTo=function(e,t){return null==t||rM(e,t,od(t))},rp.deburr=oI,rp.defaultTo=function(e,t){return null==e||e!=e?t:e},rp.divide=o0,rp.endsWith=function(e,t,i){e=s7(e),t=iS(t);var n=e.length,s=i=i===r?n:rN(s6(i),0,n);return(i-=t.length)>=0&&e.slice(i,s)==t},rp.eq=sx,rp.escape=function(e){return(e=s7(e))&&B.test(e)?e.replace(z,tL):e},rp.escapeRegExp=function(e){return(e=s7(e))&&Z.test(e)?e.replace(Y,"\\$&"):e},rp.every=function(e,t,i){var n=sM(e)?tc:rz;return i&&nE(e,t,i)&&(t=r),n(e,nh(t,3))},rp.find=sa,rp.findIndex=nF,rp.findKey=function(e,t){return tm(e,nh(t,3),rK)},rp.findLast=sc,rp.findLastIndex=n$,rp.findLastKey=function(e,t){return tm(e,nh(t,3),rV)},rp.floor=o1,rp.forEach=su,rp.forEachRight=sl,rp.forIn=function(e,t){return null==e?e:rF(e,nh(t,3),of)},rp.forInRight=function(e,t){return null==e?e:r$(e,nh(t,3),of)},rp.forOwn=function(e,t){return e&&rK(e,nh(t,3))},rp.forOwnRight=function(e,t){return e&&rV(e,nh(t,3))},rp.get=oa,rp.gt=sR,rp.gte=sN,rp.has=function(e,t){return null!=e&&nm(e,t,rX)},rp.hasIn=oc,rp.head=nV,rp.identity=oU,rp.includes=function(e,t,r,i){e=sj(e)?e:ow(e),r=r&&!i?s6(r):0;var n=e.length;return r<0&&(r=t3(n+r,0)),sQ(e)?r<=n&&e.indexOf(t,r)>-1:!!n&&tb(e,t,r)>-1},rp.indexOf=function(e,t,r){var i=null==e?0:e.length;if(!i)return -1;var n=null==r?0:s6(r);return n<0&&(n=t3(i+n,0)),tb(e,t,n)},rp.inRange=function(e,t,i){var n,s,o;return t=s5(t),i===r?(i=t,t=0):i=s5(i),(n=e=s4(e))>=t2(s=t,o=i)&&n<t3(s,o)},rp.invoke=oh,rp.isArguments=sT,rp.isArray=sM,rp.isArrayBuffer=sL,rp.isArrayLike=sj,rp.isArrayLikeObject=sU,rp.isBoolean=function(e){return!0===e||!1===e||sK(e)&&rJ(e)==h},rp.isBuffer=sq,rp.isDate=sz,rp.isElement=function(e){return sK(e)&&1===e.nodeType&&!sY(e)},rp.isEmpty=function(e){if(null==e)return!0;if(sj(e)&&(sM(e)||"string"==typeof e||"function"==typeof e.splice||sq(e)||s0(e)||sT(e)))return!e.length;var t=nv(e);if(t==y||t==w)return!e.size;if(nD(e))return!r9(e).length;for(var r in e)if(eR.call(e,r))return!1;return!0},rp.isEqual=function(e,t){return r5(e,t)},rp.isEqualWith=function(e,t,i){var n=(i="function"==typeof i?i:r)?i(e,t):r;return n===r?r5(e,t,r,i):!!n},rp.isError=sH,rp.isFinite=function(e){return"number"==typeof e&&tX(e)},rp.isFunction=sB,rp.isInteger=sW,rp.isLength=sF,rp.isMap=sV,rp.isMatch=function(e,t){return e===t||r6(e,t,nf(t))},rp.isMatchWith=function(e,t,i){return i="function"==typeof i?i:r,r6(e,t,nf(t),i)},rp.isNaN=function(e){return sG(e)&&e!=+e},rp.isNative=function(e){if(nC(e))throw new eb("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return r8(e)},rp.isNil=function(e){return null==e},rp.isNull=function(e){return null===e},rp.isNumber=sG,rp.isObject=s$,rp.isObjectLike=sK,rp.isPlainObject=sY,rp.isRegExp=sZ,rp.isSafeInteger=function(e){return sW(e)&&e>=-9007199254740991&&e<=9007199254740991},rp.isSet=sJ,rp.isString=sQ,rp.isSymbol=sX,rp.isTypedArray=s0,rp.isUndefined=function(e){return e===r},rp.isWeakMap=function(e){return sK(e)&&nv(e)==I},rp.isWeakSet=function(e){return sK(e)&&"[object WeakSet]"==rJ(e)},rp.join=function(e,t){return null==e?"":t0.call(e,t)},rp.kebabCase=oC,rp.last=nJ,rp.lastIndexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return -1;var s=n;return i!==r&&(s=(s=s6(i))<0?t3(n+s,0):t2(s,n-1)),t==t?function(e,t,r){for(var i=r+1;i--&&e[i]!==t;);return i}(e,t,s):t_(e,tE,s,!0)},rp.lowerCase=oD,rp.lowerFirst=oP,rp.lt=s1,rp.lte=s3,rp.max=function(e){return e&&e.length?rH(e,oU,rQ):r},rp.maxBy=function(e,t){return e&&e.length?rH(e,nh(t,2),rQ):r},rp.mean=function(e){return tS(e,oU)},rp.meanBy=function(e,t){return tS(e,nh(t,2))},rp.min=function(e){return e&&e.length?rH(e,oU,r7):r},rp.minBy=function(e,t){return e&&e.length?rH(e,nh(t,2),r7):r},rp.stubArray=oZ,rp.stubFalse=oJ,rp.stubObject=function(){return{}},rp.stubString=function(){return""},rp.stubTrue=function(){return!0},rp.multiply=o3,rp.nth=function(e,t){return e&&e.length?is(e,s6(t)):r},rp.noConflict=function(){return e2._===this&&(e2._=ej),this},rp.noop=oW,rp.now=sv,rp.pad=function(e,t,r){e=s7(e);var i=(t=s6(t))?tW(e):0;if(!t||i>=t)return e;var n=(t-i)/2;return i2(tZ(n),r)+e+i2(tY(n),r)},rp.padEnd=function(e,t,r){e=s7(e);var i=(t=s6(t))?tW(e):0;return t&&i<t?e+i2(t-i,r):e},rp.padStart=function(e,t,r){e=s7(e);var i=(t=s6(t))?tW(e):0;return t&&i<t?i2(t-i,r)+e:e},rp.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),t6(s7(e).replace(J,""),t||0)},rp.random=function(e,t,i){if(i&&"boolean"!=typeof i&&nE(e,t,i)&&(t=i=r),i===r&&("boolean"==typeof t?(i=t,t=r):"boolean"==typeof e&&(i=e,e=r)),e===r&&t===r?(e=0,t=1):(e=s5(e),t===r?(t=e,e=0):t=s5(t)),e>t){var n=e;e=t,t=n}if(i||e%1||t%1){var s=t8();return t2(e+s*(t-e+eX("1e-"+((s+"").length-1))),t)}return il(e,t)},rp.reduce=function(e,t,r){var i=sM(e)?tp:tD,n=arguments.length<3;return i(e,nh(t,4),r,n,rU)},rp.reduceRight=function(e,t,r){var i=sM(e)?tg:tD,n=arguments.length<3;return i(e,nh(t,4),r,n,rq)},rp.repeat=function(e,t,i){return t=(i?nE(e,t,i):t===r)?1:s6(t),ih(s7(e),t)},rp.replace=function(){var e=arguments,t=s7(e[0]);return e.length<3?t:t.replace(e[1],e[2])},rp.result=function(e,t,i){t=iN(t,e);var n=-1,s=t.length;for(s||(s=1,e=r);++n<s;){var o=null==e?r:e[nU(t[n])];o===r&&(n=s,o=i),e=sB(o)?o.call(e):o}return e},rp.round=o2,rp.runInContext=e,rp.sample=function(e){return(sM(e)?rC:function(e){return rC(ow(e))})(e)},rp.size=function(e){if(null==e)return 0;if(sj(e))return sQ(e)?tW(e):e.length;var t=nv(e);return t==y||t==w?e.size:r9(e).length},rp.snakeCase=ok,rp.some=function(e,t,i){var n=sM(e)?ty:im;return i&&nE(e,t,i)&&(t=r),n(e,nh(t,3))},rp.sortedIndex=function(e,t){return i_(e,t)},rp.sortedIndexBy=function(e,t,r){return ib(e,t,nh(r,2))},rp.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var i=i_(e,t);if(i<r&&sx(e[i],t))return i}return -1},rp.sortedLastIndex=function(e,t){return i_(e,t,!0)},rp.sortedLastIndexBy=function(e,t,r){return ib(e,t,nh(r,2),!0)},rp.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=i_(e,t,!0)-1;if(sx(e[r],t))return r}return -1},rp.startCase=oA,rp.startsWith=function(e,t,r){return e=s7(e),r=null==r?0:rN(s6(r),0,e.length),t=iS(t),e.slice(r,r+t.length)==t},rp.subtract=o5,rp.sum=function(e){return e&&e.length?tP(e,oU):0},rp.sumBy=function(e,t){return e&&e.length?tP(e,nh(t,2)):0},rp.template=function(e,t,i){var n=rp.templateSettings;i&&nE(e,t,i)&&(t=r),e=s7(e),t=or({},t,n,nt);var s,o,a=or({},t.imports,n.imports,nt),c=od(a),u=tx(a,c),l=0,h=t.interpolate||ef,d="__p += '",f=eI((t.escape||ef).source+"|"+h.source+"|"+(h===$?es:ef).source+"|"+(t.evaluate||ef).source+"|$","g"),p="//# sourceURL="+(eR.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++eY+"]")+`
`;e.replace(f,function(t,r,i,n,a,c){return i||(i=n),d+=e.slice(l,c).replace(ep,tj),r&&(s=!0,d+=`' +
__e(`+r+`) +
'`),a&&(o=!0,d+=`';
`+a+`;
__p += '`),i&&(d+=`' +
((__t = (`+i+`)) == null ? '' : __t) +
'`),l=c+t.length,t}),d+=`';
`;var g=eR.call(t,"variable")&&t.variable;if(g){if(ei.test(g))throw new eb("Invalid `variable` option passed into `_.template`")}else d=`with (obj) {
`+d+`
}
`;d=(o?d.replace(L,""):d).replace(j,"$1").replace(U,"$1;"),d="function("+(g||"obj")+`) {
`+(g?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+d+`return __p
}`;var y=oN(function(){return ew(c,p+"return "+d).apply(r,u)});if(y.source=d,sH(y))throw y;return y},rp.times=function(e,t){if((e=s6(e))<1||e>9007199254740991)return[];var r=4294967295,i=t2(e,4294967295);t=nh(t),e-=4294967295;for(var n=tk(i,t);++r<e;)t(r);return n},rp.toFinite=s5,rp.toInteger=s6,rp.toLength=s8,rp.toLower=function(e){return s7(e).toLowerCase()},rp.toNumber=s4,rp.toSafeInteger=function(e){return e?rN(s6(e),-9007199254740991,9007199254740991):0===e?e:0},rp.toString=s7,rp.toUpper=function(e){return s7(e).toUpperCase()},rp.trim=function(e,t,i){if((e=s7(e))&&(i||t===r))return tA(e);if(!e||!(t=iS(t)))return e;var n=tF(e),s=tF(t),o=tN(n,s),a=tT(n,s)+1;return iT(n,o,a).join("")},rp.trimEnd=function(e,t,i){if((e=s7(e))&&(i||t===r))return e.slice(0,t$(e)+1);if(!e||!(t=iS(t)))return e;var n=tF(e),s=tT(n,tF(t))+1;return iT(n,0,s).join("")},rp.trimStart=function(e,t,i){if((e=s7(e))&&(i||t===r))return e.replace(J,"");if(!e||!(t=iS(t)))return e;var n=tF(e),s=tN(n,tF(t));return iT(n,s).join("")},rp.truncate=function(e,t){var i=30,n="...";if(s$(t)){var s="separator"in t?t.separator:s;i="length"in t?s6(t.length):i,n="omission"in t?iS(t.omission):n}var o=(e=s7(e)).length;if(tU(e)){var a=tF(e);o=a.length}if(i>=o)return e;var c=i-tW(n);if(c<1)return n;var u=a?iT(a,0,c).join(""):e.slice(0,c);if(s===r)return u+n;if(a&&(c+=u.length-c),sZ(s)){if(e.slice(c).search(s)){var l,h=u;for(s.global||(s=eI(s.source,s7(eo.exec(s))+"g")),s.lastIndex=0;l=s.exec(h);)var d=l.index;u=u.slice(0,d===r?c:d)}}else if(e.indexOf(iS(s),c)!=c){var f=u.lastIndexOf(s);f>-1&&(u=u.slice(0,f))}return u+n},rp.unescape=function(e){return(e=s7(e))&&H.test(e)?e.replace(q,tK):e},rp.uniqueId=function(e){var t=++eN;return s7(e)+t},rp.upperCase=oO,rp.upperFirst=ox,rp.each=su,rp.eachRight=sl,rp.first=nV,oB(rp,(ev={},rK(rp,function(e,t){eR.call(rp.prototype,t)||(ev[t]=e)}),ev),{chain:!1}),rp.VERSION="4.17.21",ta(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){rp[e].placeholder=rp}),ta(["drop","take"],function(e,t){rm.prototype[e]=function(i){i=i===r?1:t3(s6(i),0);var n=this.__filtered__&&!t?new rm(this):this.clone();return n.__filtered__?n.__takeCount__=t2(i,n.__takeCount__):n.__views__.push({size:t2(i,4294967295),type:e+(n.__dir__<0?"Right":"")}),n},rm.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),ta(["filter","map","takeWhile"],function(e,t){var r=t+1,i=1==r||3==r;rm.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:nh(e,3),type:r}),t.__filtered__=t.__filtered__||i,t}}),ta(["head","last"],function(e,t){var r="take"+(t?"Right":"");rm.prototype[e]=function(){return this[r](1).value()[0]}}),ta(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");rm.prototype[e]=function(){return this.__filtered__?new rm(this):this[r](1)}}),rm.prototype.compact=function(){return this.filter(oU)},rm.prototype.find=function(e){return this.filter(e).head()},rm.prototype.findLast=function(e){return this.reverse().find(e)},rm.prototype.invokeMap=id(function(e,t){return"function"==typeof e?new rm(this):this.map(function(r){return r3(r,e,t)})}),rm.prototype.reject=function(e){return this.filter(sD(nh(e)))},rm.prototype.slice=function(e,t){e=s6(e);var i=this;return i.__filtered__&&(e>0||t<0)?new rm(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==r&&(i=(t=s6(t))<0?i.dropRight(-t):i.take(t-e)),i)},rm.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},rm.prototype.toArray=function(){return this.take(4294967295)},rK(rm.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),s=rp[n?"take"+("last"==t?"Right":""):t],o=n||/^find/.test(t);s&&(rp.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,c=t instanceof rm,u=a[0],l=c||sM(t),h=function(e){var t=s.apply(rp,tf([e],a));return n&&d?t[0]:t};l&&i&&"function"==typeof u&&1!=u.length&&(c=l=!1);var d=this.__chain__,f=!!this.__actions__.length,p=o&&!d,g=c&&!f;if(!o&&l){t=g?t:new rm(this);var y=e.apply(t,a);return y.__actions__.push({func:sn,args:[h],thisArg:r}),new rv(y,d)}return p&&g?e.apply(this,a):(y=this.thru(h),p?n?y.value()[0]:y.value():y)})}),ta(["pop","push","shift","sort","splice","unshift"],function(e){var t=eP[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);rp.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(sM(n)?n:[],e)}return this[r](function(r){return t.apply(sM(r)?r:[],e)})}}),rK(rm.prototype,function(e,t){var r=rp[t];if(r){var i=r.name+"";eR.call(rs,i)||(rs[i]=[]),rs[i].push({name:t,func:r})}}),rs[iX(r,2).name]=[{name:"wrapper",func:r}],rm.prototype.clone=function(){var e=new rm(this.__wrapped__);return e.__actions__=iB(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=iB(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=iB(this.__views__),e},rm.prototype.reverse=function(){if(this.__filtered__){var e=new rm(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},rm.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=sM(e),i=t<0,n=r?e.length:0,s=function(e,t,r){for(var i=-1,n=r.length;++i<n;){var s=r[i],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=t2(t,e+o);break;case"takeRight":e=t3(e,t-o)}}return{start:e,end:t}}(0,n,this.__views__),o=s.start,a=s.end,c=a-o,u=i?a:o-1,l=this.__iteratees__,h=l.length,d=0,f=t2(c,this.__takeCount__);if(!r||!i&&n==c&&f==c)return ik(e,this.__actions__);var p=[];e:for(;c--&&d<f;){u+=t;for(var g=-1,y=e[u];++g<h;){var v=l[g],m=v.iteratee,_=v.type,b=m(y);if(2==_)y=b;else if(!b){if(1==_)continue e;break e}}p[d++]=y}return p},rp.prototype.at=ss,rp.prototype.chain=function(){return si(this)},rp.prototype.commit=function(){return new rv(this.value(),this.__chain__)},rp.prototype.next=function(){this.__values__===r&&(this.__values__=s2(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}},rp.prototype.plant=function(e){for(var t,i=this;i instanceof ry;){var n=nz(i);n.__index__=0,n.__values__=r,t?s.__wrapped__=n:t=n;var s=n;i=i.__wrapped__}return s.__wrapped__=e,t},rp.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof rm){var t=e;return this.__actions__.length&&(t=new rm(this)),(t=t.reverse()).__actions__.push({func:sn,args:[n1],thisArg:r}),new rv(t,this.__chain__)}return this.thru(n1)},rp.prototype.toJSON=rp.prototype.valueOf=rp.prototype.value=function(){return ik(this.__wrapped__,this.__actions__)},rp.prototype.first=rp.prototype.head,e6&&(rp.prototype[e6]=function(){return this}),rp}();e6?((e6.exports=tV)._=tV,e5._=tV):e2._=tV}).call(aw)}(aE,aE.exports);var aS=Object.defineProperty,aI=Object.defineProperties,aC=Object.getOwnPropertyDescriptors,aD=Object.getOwnPropertySymbols,aP=Object.prototype.hasOwnProperty,ak=Object.prototype.propertyIsEnumerable,aA=(e,t,r)=>t in e?aS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,aO=(e,t)=>{for(var r in t||(t={}))aP.call(t,r)&&aA(e,r,t[r]);if(aD)for(var r of aD(t))ak.call(t,r)&&aA(e,r,t[r]);return e},ax=(e,t)=>aI(e,aC(t));function aR(e,t,r){var i;let n=function(e){let[t,r]=e.split(":");return{namespace:t,reference:r}}(e);return(null==(i=t.rpcMap)?void 0:i[n.reference])||`https://rpc.walletconnect.com/v1/?chainId=${n.namespace}:${n.reference}&projectId=${r}`}function aN(e){return e.includes(":")?e.split(":")[1]:e}function aT(e){return e.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function aM(e={},t={}){let r=aL(e),i=aL(t);return aE.exports.merge(r,i)}function aL(e){var t,r,i,n;let s={};if(!ir(e))return s;for(let[o,a]of Object.entries(e)){let e=r6(o)?[o]:a.chains,c=a.methods||[],u=a.events||[],l=a.rpcMap||{},h=r8(o);s[h]=ax(aO(aO({},s[h]),a),{chains:rW(e,null==(t=s[h])?void 0:t.chains),methods:rW(c,null==(r=s[h])?void 0:r.methods),events:rW(u,null==(i=s[h])?void 0:i.events),rpcMap:aO(aO({},l),null==(n=s[h])?void 0:n.rpcMap)})}return s}function aj(e){return e.includes(":")?e.split(":")[2]:e}function aU(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):isNaN(Number(e=e.includes(":")?e.split(":")[1]:e))?e:Number(e)}let aq={},az=e=>aq[e],aH=(e,t)=>{aq[e]=t};class aB{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=az("events"),this.client=az("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(ab,`${this.name}:${e}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=aN(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||aR(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nY(new av(r,az("disableProviderPing")))}}class aW{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=az("events"),this.client=az("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(ab,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){let r=t||aR(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nY(new av(r,az("disableProviderPing")))}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=parseInt(aN(t));e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}getHttpProvider(){let e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let i=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0",n=parseInt(i=i.startsWith("0x")?i:`0x${i}`,16);if(this.isChainApproved(n))this.setDefaultChain(`${n}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:null==(r=this.namespace.chains)?void 0:r[0]}),this.setDefaultChain(`${n}`);else throw Error(`Failed to switch to chain 'eip155:${n}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class aF{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=az("events"),this.client=az("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(ab,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=aN(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||aR(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nY(new av(r,az("disableProviderPing")))}}class a${constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=az("events"),this.client=az("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(ab,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=aN(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||aR(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nY(new av(r,az("disableProviderPing")))}}class aK{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=az("events"),this.client=az("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(ab,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let r=this.getCardanoRPCUrl(t),i=aN(t);e[i]=this.createHttpProvider(i,r)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){let t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||this.getCardanoRPCUrl(e);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nY(new av(r,az("disableProviderPing")))}}class aV{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=az("events"),this.client=az("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(ab,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=aN(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||aR(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nY(new av(r,az("disableProviderPing")))}}class aG{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=az("events"),this.client=az("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(ab,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=aN(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||aR(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nY(new av(r,az("disableProviderPing")))}}class aY{constructor(e){this.name="near",this.namespace=e.namespace,this.events=az("events"),this.client=az("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let r=t||aR(`${this.name}:${e}`,this.namespace);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(ab,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||aR(e,this.namespace);return typeof r>"u"?void 0:new nY(new av(r,az("disableProviderPing")))}}var aZ=Object.defineProperty,aJ=Object.defineProperties,aQ=Object.getOwnPropertyDescriptors,aX=Object.getOwnPropertySymbols,a0=Object.prototype.hasOwnProperty,a1=Object.prototype.propertyIsEnumerable,a3=(e,t,r)=>t in e?aZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,a2=(e,t)=>{for(var r in t||(t={}))a0.call(t,r)&&a3(e,r,t[r]);if(aX)for(var r of aX(t))a1.call(t,r)&&a3(e,r,t[r]);return e},a5=(e,t)=>aJ(e,aQ(t));class a6{constructor(e){this.events=new(ek()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:i1()(ni({level:e?.logger||am})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){let t=new a6(e);return await t.initialize(),t}async request(e,t,r){let[i,n]=this.validateChain(t);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(i).request({request:a2({},e),chainId:`${i}:${n}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,i){let n=new Date().getTime();this.request(e,r,i).then(e=>t(null,nL(n,e))).catch(e=>t(e,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:ie("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw Error("Max auto pairing attempts reached");let{uri:r,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});r&&(this.uri=r,this.events.emit("display_uri",r)),await i().then(e=>{this.session=e;let t=function(e){let t={};for(let[r,i]of Object.entries(e)){let e=i.methods||[],n=i.events||[],s=i.accounts||[],o=r6(r)?[r]:i.chains?i.chains:aT(i.accounts);t[r]={chains:o,methods:e,events:n,accounts:s}}return t}(e.namespaces);this.namespaces=aM(this.namespaces,t),this.persist("namespaces",this.namespaces)}).catch(e=>{if(e.message!==oY)throw e;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;let[r,i]=this.validateChain(e);this.getProvider(r).setDefaultChain(i,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");let t=this.client.pairing.getAll();if(it(t)){for(let r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){let e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await an.init({logger:this.providerOpts.logger||am,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let e=[...new Set(Object.keys(this.session.namespaces).map(e=>r8(e)))];aH("client",this.client),aH("events",this.events),aH("disableProviderPing",this.disableProviderPing),e.forEach(e=>{if(!this.session)return;let t=function(e,t){let r=Object.keys(t.namespaces).filter(t=>t.includes(e));if(!r.length)return[];let i=[];return r.forEach(e=>{let r=t.namespaces[e].accounts;i.push(...r)}),i}(e,this.session),r=aT(t),i=a5(a2({},aM(this.namespaces,this.optionalNamespaces)[e]),{accounts:t,chains:r});switch(e){case"eip155":this.rpcProviders[e]=new aW({namespace:i});break;case"solana":this.rpcProviders[e]=new aF({namespace:i});break;case"cosmos":this.rpcProviders[e]=new a$({namespace:i});break;case"polkadot":this.rpcProviders[e]=new aB({namespace:i});break;case"cip34":this.rpcProviders[e]=new aK({namespace:i});break;case"elrond":this.rpcProviders[e]=new aV({namespace:i});break;case"multiversx":this.rpcProviders[e]=new aG({namespace:i});break;case"near":this.rpcProviders[e]=new aY({namespace:i})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{let{params:t}=e,{event:r}=t;if("accountsChanged"===r.name){let e=r.data;e&&it(e)&&this.events.emit("accountsChanged",e.map(aj))}else if("chainChanged"===r.name){let e=t.chainId,r=t.event.data,i=r8(e),n=aU(e)!==aU(r)?`${i}:${aU(r)}`:e;this.onChainChanged(n)}else this.events.emit(r.name,r.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var r;let{namespaces:i}=t,n=null==(r=this.client)?void 0:r.session.get(e);this.session=a5(a2({},n),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",a5(a2({},ie("USER_DISCONNECTED")),{data:e.topic}))}),this.on(ab,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){let{namespaces:t,optionalNamespaces:r,sessionProperties:i}=e;t&&Object.keys(t).length&&(this.namespaces=t),r&&Object.keys(r).length&&(this.optionalNamespaces=r),this.sessionProperties=i,this.persist("namespaces",t),this.persist("optionalNamespaces",r)}validateChain(e){let[t,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map(e=>r8(e)).includes(t))throw Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];let i=r8(Object.keys(this.namespaces)[0]),n=this.rpcProviders[i].getDefaultChain();return[i,n]}async requestAccounts(){let[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){if(!this.namespaces)return;let[r,i]=this.validateChain(e);i&&(t||this.getProvider(r).setDefaultChain(i),this.namespaces[r]?this.namespaces[r].defaultChain=i:this.namespaces[`${r}:${i}`]?this.namespaces[`${r}:${i}`].defaultChain=i:this.namespaces[`${r}:${i}`]={defaultChain:i},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",i))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${a_}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${a_}/${e}`)}}let a8=["eth_sendTransaction","personal_sign"],a4=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],a9=["chainChanged","accountsChanged"],a7=["chainChanged","accountsChanged","message","disconnect","connect"];var ce=Object.defineProperty,ct=Object.defineProperties,cr=Object.getOwnPropertyDescriptors,ci=Object.getOwnPropertySymbols,cn=Object.prototype.hasOwnProperty,cs=Object.prototype.propertyIsEnumerable,co=(e,t,r)=>t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ca=(e,t)=>{for(var r in t||(t={}))cn.call(t,r)&&co(e,r,t[r]);if(ci)for(var r of ci(t))cs.call(t,r)&&co(e,r,t[r]);return e},cc=(e,t)=>ct(e,cr(t));function cu(e){return Number(e[0].split(":")[1])}function cl(e){return`0x${e.toString(16)}`}class ch{constructor(){this.events=new eP.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){let t=new ch;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,r){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),r)}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);let{required:t,optional:r}=function(e){let{chains:t,optionalChains:r,methods:i,optionalMethods:n,events:s,optionalEvents:o,rpcMap:a}=e;if(!it(t))throw Error("Invalid chains");let c={chains:t,methods:i||a8,events:s||a9,rpcMap:ca({},t.length?{[cu(t)]:a[cu(t)]}:{})},u=s?.filter(e=>!a9.includes(e)),l=i?.filter(e=>!a8.includes(e));if(!r&&!o&&!n&&!(null!=u&&u.length)&&!(null!=l&&l.length))return{required:t.length?c:void 0};let h={chains:[...new Set(u?.length&&l?.length||!r?c.chains.concat(r||[]):r)],methods:[...new Set(c.methods.concat(null!=n&&n.length?n:a4))],events:[...new Set(c.events.concat(null!=o&&o.length?o:a7))],rpcMap:a};return{required:t.length?c:void 0,optional:r.length?h:void 0}}(this.rpc);try{let i=await new Promise(async(i,n)=>{var s;this.rpc.showQrModal&&(null==(s=this.modal)||s.subscribeModal(e=>{e.open||this.signer.session||(this.signer.abortPairingAttempt(),n(Error("Connection request reset. Please try again.")))})),await this.signer.connect(cc(ca({namespaces:ca({},t&&{[this.namespace]:t})},r&&{optionalNamespaces:{[this.namespace]:r}}),{pairingTopic:e?.pairingTopic})).then(e=>{i(e)}).catch(e=>{n(Error(e.message))})});if(!i)return;let n=function(e,t=[]){let r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;let n=e[i];r.push(...n.accounts)}),r}(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:n),this.setAccounts(n),this.events.emit("connect",{chainId:cl(this.chainId)})}catch(e){throw this.signer.logger.error(e),e}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{let{params:t}=e,{event:r}=t;"accountsChanged"===r.name?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===r.name?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{let t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",cl(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",cc(ca({},ie("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,r;this.rpc.showQrModal&&(null==(t=this.modal)||t.closeModal(),null==(r=this.modal)||r.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return"string"==typeof e&&e.startsWith(`${this.namespace}:`)}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){let t=e.filter(e=>this.isCompatibleChainId(e)).map(e=>this.parseChainId(e));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",cl(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){let t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){let[t,r,i]=e.split(":");return{chainId:`${t}:${r}`,address:i}}setAccounts(e){this.accounts=e.filter(e=>this.parseChainId(this.parseAccountId(e).chainId)===this.chainId).map(e=>this.parseAccountId(e).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,r;let i=null!=(t=e?.chains)?t:[],n=null!=(r=e?.optionalChains)?r:[],s=i.concat(n);if(!s.length)throw Error("No chains specified in either `chains` or `optionalChains`");let o=i.length?e?.methods||a8:[],a=i.length?e?.events||a9:[],c=e?.optionalMethods||[],u=e?.optionalEvents||[],l=e?.rpcMap||this.buildRpcMap(s,e.projectId),h=e?.qrModalOptions||void 0;return{chains:i?.map(e=>this.formatChainId(e)),optionalChains:n.map(e=>this.formatChainId(e)),methods:o,events:a,optionalMethods:c,optionalEvents:u,rpcMap:l,showQrModal:!!(null!=e&&e.showQrModal),qrModalOptions:h,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){let r={};return e.forEach(e=>{r[e]=this.getRpcUrl(e,t)}),r}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?cu(this.rpc.chains):cu(this.rpc.optionalChains),this.signer=await a6.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let e;try{let{WalletConnectModal:t}=await r.e(1019).then(r.bind(r,71019));e=t}catch{throw Error("To use QR modal, please install @walletconnect/modal package")}if(e)try{this.modal=new e(ca({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(e){throw this.signer.logger.error(e),Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;let{chains:t,optionalChains:r,rpcMap:i}=e;t&&it(t)&&(this.rpc.chains=t.map(e=>this.formatChainId(e)),t.forEach(e=>{this.rpc.rpcMap[e]=i?.[e]||this.getRpcUrl(e)})),r&&it(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r?.map(e=>this.formatChainId(e)),r.forEach(e=>{this.rpc.rpcMap[e]=i?.[e]||this.getRpcUrl(e)}))}getRpcUrl(e,t){var r;return(null==(r=this.rpc.rpcMap)?void 0:r[e])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;let e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t?.accounts),this.setAccounts(t?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return"string"==typeof e||e instanceof String?[this.parseAccount(e)]:e.map(e=>this.parseAccount(e))}}var cd=r(17542);let cf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{let r=parseInt(String(e),t);if(isNaN(r)){D.kg.error("Error parsing ".concat(e));return}return r}catch(t){D.kg.error("Error parsing ".concat(e," to int: ").concat(t))}},cp=e=>"dynamic-wc2-active-account-".concat(e),cg=e=>"dynamic-wc2-session-topic-".concat(e),cy=e=>"dynamic-wc2-switched-network-".concat(e),cv=e=>"dynamic-wc2-current-chain-".concat(e),cm=new cd.Z;class c_ extends em.wV{getMappedChains(){return this.evmNetworks.filter(e=>11297108109!==e.chainId).map(e=>"eip155:".concat(e.chainId))}getMappedChainsByPreferredOrder(){let e=this.getMappedChains();return[...this.preferredChains.filter(t=>e.includes(t)),...e.filter(e=>!this.preferredChains.includes(e))].map(e=>Number(e.split(":")[1]))}initConnection(){return ew(this,void 0,void 0,function*(){let{provider:e}=c_;if(!e)throw new P.kW("No provider found (init connection)");null!=e&&e.signer.uri||e.connect().catch(e=>{D.kg.error(e),cm.emit("walletconnect_connection_failed",e)})})}createProvider(){return ew(this,void 0,void 0,function*(){return ch.init({events:["chainChanged","accountsChanged"],methods:[],optionalChains:this.getMappedChainsByPreferredOrder(),optionalMethods:["eth_chainId","eth_signTypedData","eth_signTransaction","eth_sign","personal_sign","eth_sendTransaction","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain"],projectId:this.projectId,rpcMap:this.evmNetworkRpcMap(),showQrModal:!1})})}getWalletClientFromInitializedProvider(){return ew(this,void 0,void 0,function*(){let e=this.createProvider();return(0,eS.K)({account:this.getActiveAccount(),transport:(0,eI.P)((yield e))})})}createInitProviderPromise(){return ew(this,void 0,void 0,function*(){c_.provider=yield this.createProvider(),this.teardownEventListeners(),this.setupEventListeners()})}initProvider(){return ew(this,void 0,void 0,function*(){let{provider:e}=c_;e||(void 0===this.initializePromise&&(this.initializePromise=this.createInitProviderPromise()),yield this.initializePromise)})}refreshSession(){var e,t,r,i,n;(null===(t=null===(e=c_.provider)||void 0===e?void 0:e.session)||void 0===t?void 0:t.topic)&&localStorage.getItem(this.sessionTopicKey)===(null===(i=null===(r=c_.provider)||void 0===r?void 0:r.session)||void 0===i?void 0:i.topic)&&(this.session=c_.provider.session,this.setActiveAccount(null!==(n=localStorage.getItem(this.activeAccountKey))&&void 0!==n?n:void 0))}init(){return ew(this,void 0,void 0,function*(){yield this.initProvider(),yield this.initConnection(),this.isInitialized=!0})}get sessionTopicKey(){return cg(this.key)}get activeAccountKey(){return cp(this.key)}get swicthedNetworkKey(){return cy(this.key)}get currentChainKey(){return cv(this.key)}set currentChainId(e){this._currentChainId=e,e?localStorage.setItem(this.currentChainKey,e.toString()):localStorage.removeItem(this.currentChainKey)}get currentChainId(){return this._currentChainId}set hasSwitchedNetwork(e){this._hasSwitchedNetwork=e,e?localStorage.setItem(this.swicthedNetworkKey,e.toString()):localStorage.removeItem(this.swicthedNetworkKey)}get hasSwitchedNetwork(){return this._hasSwitchedNetwork}supportsNetworkSwitching(){return!0}setupEventListeners(){c_.provider&&(this.sessionEventHandler=e=>{let{params:t}=e;if(D.kg.debug("session_event was called",{params:t}),!t||!t.event){D.kg.debug("session_event was called without params or params.event");return}let{name:r,data:i}=t.event;if("chainChanged"===r){let e=cf(i);if(e===this.currentChainId){D.kg.debug("ignoring chainChanged event with same chain id as current chain id: ".concat(e));return}if(void 0===e){D.kg.debug("received unexpected data for chainChanged: ".concat(i," with type ").concat(typeof i,"}"));return}this.currentChainId=e,this.emit("chainChange",{chain:String(e)}),this.hasSwitchedNetwork=!0,this.switchNetwork({networkChainId:e})}else if("accountsChanged"===r){if(!Array.isArray(i)){D.kg.debug("received unexpected data for accountsChanged: ".concat(i," with type ").concat(typeof i,"}"));return}let e=i[0].split(":")[2];this.setWCActiveAccount(e)}},c_.provider.on("session_event",this.sessionEventHandler),this.sessionDeleteHandler=()=>ew(this,void 0,void 0,function*(){this.endSession(),this.emit("disconnect")}),c_.provider.on("session_delete",this.sessionDeleteHandler))}teardownEventListeners(){c_.provider&&(c_.provider.off("session_event",this.sessionEventHandler),c_.provider.off("session_delete",this.sessionDeleteHandler))}getWalletClient(e){if(c_.provider)return(0,eS.K)({account:this.getActiveAccount(),chain:em.zk[null!=e?e:String(this.currentChainId)],transport:(0,eI.P)(c_.provider)})}getAddress(e){return ew(this,void 0,void 0,function*(){var t,r;let i=this.getActiveAccount();if(null==i?void 0:i.address)return i.address;if((!c_.provider||!(null===(t=c_.provider)||void 0===t?void 0:t.signer.uri))&&(D.kg.debug("No WC2 provider found, re-initializing..."),yield this.endSession(),yield this.init(),yield(0,P._v)(1e3),!c_.provider||!(null===(r=c_.provider)||void 0===r?void 0:r.signer.uri)))throw D.kg.debug("No WC2 provider found, escaping and throwing error"),new P.kW("No provider found");let n=(0,eE.MO)(this.walletBook,this.key,this.walletFallback);return(0,D.ze)(c_.provider.signer.uri,n,{onDesktopUri:null==e?void 0:e.onDesktopUri,onDisplayUri:null==e?void 0:e.onDisplayUri},this.deepLinkPreference),new Promise((e,t)=>{if(!c_.provider){t(new P.kW("No provider found"));return}let r=()=>{let e=new P.kW("Connection rejected. Please try again.");e.code="connection_rejected",c_.provider&&(c_.provider.signer.uri=void 0,this.init()),t(e),n()},i=()=>{var r;let i=null===(r=c_.provider)||void 0===r?void 0:r.session;if(!i){t(new P.kW("No session found"));return}this.setSession(i),this.setWCActiveAccount(i.namespaces.eip155.accounts[0].split(":")[2]),this.getNetwork().then(t=>{var r;this.currentChainId=t,e(null===(r=this.getActiveAccount())||void 0===r?void 0:r.address)}),n()},n=()=>{var e;cm.off("walletconnect_connection_failed",r),null===(e=c_.provider)||void 0===e||e.off("connect",i)};cm.on("walletconnect_connection_failed",r),c_.provider.on("connect",i)})})}waitForSignMessage(e,t){return ew(this,void 0,void 0,function*(){let r=new Promise((r,i)=>{this.on("chainChange",()=>r({success:!1})),e(t).then(e=>r({signedMessage:e,success:!0})).catch(i)}),i=yield r;return!1===i.success?e(t):i.signedMessage})}getDeepLink(){var e;if(!this.session)return;let t=(0,eE.MO)(this.walletBook,this.key),r=(0,D.bW)({metadata:t,mode:"regular",preference:this.deepLinkPreference,uri:null===(e=c_.provider)||void 0===e?void 0:e.signer.uri});if(r)return"".concat(r,"?sessionTopic=").concat(this.session.topic)}signMessage(e){return ew(this,void 0,void 0,function*(){if(!this.session)throw new P.kW("no session");let t=this.getDeepLink();return(0,P.tq)()&&t&&(window.location.href=t),yield this.waitForSignMessage(e=>ew(this,void 0,void 0,function*(){let t=this.getActiveAccount();if(t)return(yield this.getWalletClientFromInitializedProvider()).signMessage({account:t,message:e})}),e)})}clearActiveAccount(){localStorage.removeItem(this.activeAccountKey),this.setActiveAccount(void 0)}clearSession(){localStorage.removeItem(this.sessionTopicKey),this.session=void 0}setWCActiveAccount(e){localStorage.setItem(this.activeAccountKey,e),this.setActiveAccount(e),this.emit("accountChange",{accounts:[e]})}setSession(e){localStorage.setItem(this.sessionTopicKey,e.topic),this.session=e}endSession(){return ew(this,void 0,void 0,function*(){var e;if(this.clearActiveAccount(),this.clearSession(),this.hasSwitchedNetwork=!1,this.currentChainId=void 0,null===(e=c_.provider)||void 0===e?void 0:e.session)try{yield c_.provider.disconnect(),c_.provider=void 0}catch(e){D.kg.debug(e)}})}getNetwork(){let e=Object.create(null,{getNetwork:{get:()=>super.getNetwork}});return ew(this,void 0,void 0,function*(){return this.currentChainId?this.currentChainId:(yield this.initProvider(),e.getNetwork.call(this))})}providerSwitchNetwork(e){let t=Object.create(null,{providerSwitchNetwork:{get:()=>super.providerSwitchNetwork}});return ew(this,arguments,void 0,function*(e){let{network:r}=e,i=yield this.getSupportedNetworks();if(!(null==i?void 0:i.includes(r.chainId.toString()))){let e=new P.kW("Network switching is not available at this time. The user should manually switch network in their wallet");throw e.code="network_switching_only_available_in_wallet",e}let n=yield this.getNetwork();if(n&&n===r.chainId)return;if(this.switchNetworkOnlyFromWallet)throw new P.kW("Network switching is only supported through the wallet");if(!this.supportsNetworkSwitching())throw new P.kW("Network switching not supported");let s=yield this.getWalletClientFromInitializedProvider();if(this.isMetaMask()){let e=this.getDeepLink();e&&(window.location.href=e)}yield t.providerSwitchNetwork.call(this,{network:r,provider:s}),this.currentChainId=r.chainId,this.hasSwitchedNetwork=!0,this.emit("chainChange",{chain:String(r.chainId)})})}getConnectedAccounts(){return ew(this,void 0,void 0,function*(){!1===this.isInitialized&&(yield this.initProvider(),this.refreshSession(),this.isInitialized=!0);let e=this.getActiveAccount();return(null==e?void 0:e.address)?[e.address]:[]})}isMetaMask(){var e,t,r,i,n;return null!==(n=null===(i=null===(r=null===(t=null===(e=this.session)||void 0===e?void 0:e.peer)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.name)||void 0===i?void 0:i.toLowerCase().startsWith("metamask"))&&void 0!==n&&n}getSupportedNetworks(){return ew(this,void 0,void 0,function*(){var e;if(yield this.initProvider(),this.refreshSession(),this.isMetaMask())return this.hasSwitchedNetwork?[String(this.currentChainId)]:this.evmNetworks.map(e=>e.chainId.toString());if(!this.session)return[];let t=[];return Object.keys(this.session.namespaces).forEach(e=>{e.startsWith("eip155:")&&t.push(e.split(":")[1])}),null===(e=this.session.namespaces.eip155)||void 0===e||e.accounts.forEach(e=>t.push(e.split(":")[1])),t.length?t:this.evmNetworks.map(e=>e.chainId.toString())})}constructor(e){var t;super(e),this.supportedChains=["EVM","ETH"],this.connectedChain="EVM",this.isInitialized=!1,this.canConnectViaQrCode=!0,this.isWalletConnect=!0,this.preferredChains=[],this._hasSwitchedNetwork=!1,this.sessionEventHandler=()=>{},this.sessionDeleteHandler=()=>{},this.name=e.walletName,this.projectId=e.projectId,this.deepLinkPreference=e.deepLinkPreference||"native",this.preferredChains=e.walletConnectPreferredChains||[],this.hasSwitchedNetwork=t=!!localStorage.getItem(this.swicthedNetworkKey);let r=localStorage.getItem(this.currentChainKey);this.currentChainId=r?cf(r):void 0}}class cb extends em.wV{getEthProviderHelper(){return this.wallet||(this.wallet=(0,eE.IP)(this.walletBook,this.key)),this.wallet&&!this.ethProviderHelper&&(this.ethProviderHelper=new eD(this.wallet,this)),this.ethProviderHelper}getMobileOrInstalledWallet(){var e,t;return(this.wallet||(this.wallet=(0,eE.IP)(this.walletBook,this.key)),this.isInstalledOnBrowser()||(null===(t=null===(e=this.wallet)||void 0===e?void 0:e.mobile)||void 0===t?void 0:t.inAppBrowser)&&"in-app-browser"===this.mobileExperience&&(0,P.tq)()||!this.walletConnectorFallback)?this:new c_(Object.assign(Object.assign({},this.constructorProps),{walletName:this.name}))}findProvider(){let e=this.getEthProviderHelper();if(e)return e.getInstalledProvider()}setupEventListeners(){if(!this.getWalletClient())return;let e=this.getEthProviderHelper();if(!e)return;let{tearDownEventListeners:t}=e._setupEventListeners(this);this.teardownEventListeners=t}getWalletClient(e){var t;return null===(t=this.getEthProviderHelper())||void 0===t?void 0:t.findWalletClient(e)}isInstalledOnBrowser(){var e;return(null===(e=this.getEthProviderHelper())||void 0===e?void 0:e.findProvider())!==void 0}getAddress(){return ew(this,void 0,void 0,function*(){var e;return null===(e=this.getEthProviderHelper())||void 0===e?void 0:e.getAddress()})}connect(){return ew(this,void 0,void 0,function*(){yield this.getAddress()})}signMessage(e){return ew(this,void 0,void 0,function*(){var t;return null===(t=this.getEthProviderHelper())||void 0===t?void 0:t.signMessage(e)})}proveOwnership(e,t){return ew(this,void 0,void 0,function*(){return yield this.validateActiveWallet(e),this.signMessage(t)})}endSession(){return ew(this,void 0,void 0,function*(){})}providerSwitchNetwork(e){let t=Object.create(null,{providerSwitchNetwork:{get:()=>super.providerSwitchNetwork}});return ew(this,arguments,void 0,function*(e){let{network:r,provider:i}=e;return t.providerSwitchNetwork.call(this,{network:r,provider:i})})}constructor(){super(...arguments),this.supportedChains=["ETH","EVM"],this.connectedChain="EVM",this.walletConnectorFallback=!1}}class cw extends cb{getAddress(){let e=Object.create(null,{getAddress:{get:()=>super.getAddress}});return ew(this,void 0,void 0,function*(){if(this.isInstalledOnBrowser())return e.getAddress.call(this);(0,P.tq)()&&(0,P.Rc)({nativeLink:"phantom://browse",universalLink:"https://phantom.app/ul/browse"})})}canGetChainAddress(){var e,t;return!!(null===(t=null===(e=this.getEthProviderHelper())||void 0===e?void 0:e.findProvider())||void 0===t?void 0:t.selectedAddress)}constructor(e){super(e),this.name="Phantom",this.overrideKey="phantomevm",this.wallet=(0,eE.IP)(this.walletBook,this.key)}}class cE extends cb{constructor(e){super(e),this.name="ExodusEvm",this.overrideKey="exodusevm",this.walletConnectorFallback=!0,this.wallet=(0,eE.IP)(this.walletBook,this.key)}}class cS extends cb{isInstalledOnBrowser(){return!1}constructor(e){super(e),this.name="Unknown",this.overrideKey="unknown",this.wallet=(0,eE.IP)(this.walletBook,this.key)}}class cI extends cb{isInstalledOnBrowser(){return!1}constructor(e){super(e),this.name="Fallback Connector",this.overrideKey="fallbackconnector",this.isAvailable=!1,this.wallet=(0,eE.IP)(this.walletBook,this.key)}}let cC=[cw,cE],cD=["phantomevm","coinbase","exodusevm"],cP=e=>{var t;let{walletBook:r}=e;return Object.entries(null!==(t=null==r?void 0:r.wallets)&&void 0!==t?t:{}).filter(e=>{var t;let[r,i]=e;return(null===(t=i.injectedConfig)||void 0===t?void 0:t.find(e=>"evm"===e.chain))&&!cD.includes(r)}).map(e=>{let[t,r]=e,{shortName:i}=r,n=i||r.name,s=!!r.walletConnect;return class extends cb{getAddress(){let e=Object.create(null,{getAddress:{get:()=>super.getAddress}});return ew(this,void 0,void 0,function*(){var t;if(this.isInstalledOnBrowser())return e.getAddress.call(this);let r=null===(t=this.wallet.mobile)||void 0===t?void 0:t.inAppBrowser;if(!r){let e=Error("No inAppBrowserBase found for ".concat(this.name,"."));throw D.kg.error(e.message),e}window.location.href="".concat(r,"/").concat(window.location.href)})}constructor(e){super(Object.assign({},e)),this.name=n,this.wallet=r,this.walletConnectorFallback=s,this.overrideKey=t}}})},ck=e=>{var t;let{walletBook:r}=e;return Object.entries(null!==(t=null==r?void 0:r.wallets)&&void 0!==t?t:{}).filter(e=>{let[,t]=e;return t.walletConnect&&!t.filterFromWalletConnect}).map(e=>{let[t,r]=e,{shortName:i}=r,n=i||r.name;return class extends c_{constructor(e){super(Object.assign(Object.assign({},e),{walletName:n})),this.overrideKey=t}}})},cA=()=>{class e extends c_{constructor(e){super(Object.assign(Object.assign({},e),{walletName:"WalletConnect"}))}}return e};var cO=r(38821),cx=r(61559),cR=r(82318);let cN=function(){let{appLogoUrl:e,appName:t,evmNetworks:r,walletPreference:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=null==r?void 0:r.map(e=>Number(e.chainId));return(null==r?void 0:r.some(e=>84532===e.chainId))&&(null==s||s.sort((e,t)=>84532===e?-1:84532===t?1:0)),(null==r?void 0:r.some(e=>8453===e.chainId))&&(null==s||s.sort((e,t)=>8453===e?-1:8453===t?1:0)),n||(n=new cR.jp({appChainIds:s,appLogoUrl:e,appName:t}).makeWeb3Provider({options:null!=i?i:"all"})),n};class cT extends em.wV{get coinbaseProvider(){return cN(this.coinbaseProviderOpts)}getConnectedAccounts(){return ew(this,void 0,void 0,function*(){try{let e=yield this.coinbaseProvider.request({method:"eth_accounts"});return e[0]&&this.setActiveAccount(e[0]),e}catch(e){return[]}})}isInstalledOnBrowser(){var e;return!!(null===(e=null==window?void 0:window.coinbaseWalletExtension)||void 0===e?void 0:e.isCoinbaseWallet)}getAddress(){return ew(this,void 0,void 0,function*(){let[e]=yield this.coinbaseProvider.request({method:"eth_requestAccounts"});return this.setActiveAccount(e),e})}signMessage(e){return ew(this,void 0,void 0,function*(){let[t]=yield this.coinbaseProvider.request({method:"eth_requestAccounts"});try{return yield this.coinbaseProvider.request({method:"personal_sign",params:[(0,cO.NC)((0,cx.O0)(e)),t.toLowerCase()]})}catch(e){return}})}setupEventListeners(){let{handleAccountChange:e,handleChainChange:t,handleDisconnect:r}=(0,D.nb)(this);this.coinbaseProvider.on("accountsChanged",e),this.coinbaseProvider.on("chainChanged",t),this.coinbaseProvider.on("disconnect",r),this.teardownEventListeners=()=>{this.coinbaseProvider.removeListener("accountsChanged",e),this.coinbaseProvider.removeListener("chainChanged",t),this.coinbaseProvider.removeListener("disconnect",r)}}getWalletClient(e){return(0,eS.K)({account:this.getActiveAccount(),chain:e?em.zk[e]:void 0,transport:(0,eI.P)(this.coinbaseProvider)})}constructor(e){var{appName:t,appLogoUrl:r,evmNetworks:i,coinbaseWalletPreference:n}=e;super(Object.assign({evmNetworks:i},function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}(e,["appName","appLogoUrl","evmNetworks","coinbaseWalletPreference"]))),this.name="Coinbase",this.overrideKey="coinbase",this.supportedChains=["EVM","ETH"],this.connectedChain="EVM",this.canConnectViaQrCode=!1,this.canConnectViaCustodialService=!this.isInstalledOnBrowser(),this.coinbaseProviderOpts={appLogoUrl:r,appName:t,evmNetworks:i,walletPreference:n}}}(0,E.J)("@dynamic-labs/ethereum","4.0.0-alpha.7");let cM=e=>[...cC,...cP(e),...ck(e),...eb(e),cT,cS,cI,cA()]},69727:function(e,t,r){"use strict";function i(e){let t=e.state.current,r=e.state.connections.get(t),i=r?.accounts,n=i?.[0],s=e.chains.find(e=>e.id===r?.chainId),o=e.state.status;switch(o){case"connected":return{address:n,addresses:i,chain:s,chainId:r?.chainId,connector:r?.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:n,addresses:i,chain:s,chainId:r?.chainId,connector:r?.connector,isConnected:!!n,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:n,addresses:i,chain:s,chainId:r?.chainId,connector:r?.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}r.d(t,{D:function(){return i}})},67323:function(e,t,r){"use strict";r.d(t,{e:function(){return c}});var i=r(49602),n=r(79770),s=r(9952),o=r(939),a=r(72033);async function c(e,t={}){let r;if(t.connector){let{connector:i}=t;if("reconnecting"===e.state.status&&!i.getAccounts&&!i.getChainId)throw new a.$S({connector:i});let[n,s]=await Promise.all([i.getAccounts(),i.getChainId()]);r={accounts:n,chainId:s,connector:i}}else r=e.state.connections.get(e.state.current);if(!r)throw new a.aH;let c=t.chainId??r.chainId,u=await r.connector.getChainId();if(u!==r.chainId)throw new a.XZ({connectionChainId:r.chainId,connectorChainId:u});let l=r.connector;if(l.getClient)return l.getClient({chainId:c});let h=(0,s.T)(t.account??r.accounts[0]);if(h.address=(0,o.K)(h.address),t.account&&!r.accounts.some(e=>e.toLowerCase()===h.address.toLowerCase()))throw new a.JK({address:h.address,connector:l});let d=e.chains.find(e=>e.id===c),f=await r.connector.getProvider({chainId:c});return(0,i.e)({account:h,chain:d,name:"Connector Client",transport:e=>(0,n.P)(f)({...e,retryCount:0})})}},92930:function(e,t,r){"use strict";r.d(t,{e:function(){return c}});var i=r(55972),n=r(84918),s=r(34183),o=r(77098),a=r(75382);async function c(e,t){let{chainId:r,timeout:c=0,...u}=t,l=e.getClient({chainId:r}),h=(0,a.s)(l,n.e,"waitForTransactionReceipt"),d=await h({...u,timeout:c});if("reverted"===d.status){let e=(0,a.s)(l,s.f,"getTransaction"),t=await e({hash:d.transactionHash}),r=(0,a.s)(l,o.R,"call"),n=await r({...t,gasPrice:"eip1559"!==t.type?t.gasPrice:void 0,maxFeePerGas:"eip1559"===t.type?t.maxFeePerGas:void 0,maxPriorityFeePerGas:"eip1559"===t.type?t.maxPriorityFeePerGas:void 0});throw Error(n?.data?(0,i.rR)(`0x${n.data.substring(138)}`):"unknown reason")}return{...d,chainId:l.chain.id}}},22265:function(e,t,r){"use strict";r.d(t,{G:function(){return c}});var i,n,s=r(69036);let o=()=>`@wagmi/core@${s.i}`;var a=function(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};class c extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return o()}constructor(e,t={}){super(),i.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});let r=t.cause instanceof c?t.cause.details:t.cause?.message?t.cause.message:t.details,n=t.cause instanceof c&&t.cause.docsPath||t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: ${this.docsBaseUrl}${n}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join("\n"),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=n,this.metaMessages=t.metaMessages,this.shortMessage=e}walk(e){return a(this,i,"m",n).call(this,this,e)}}i=new WeakSet,n=function e(t,r){return r?.(t)?t:t.cause?a(this,i,"m",e).call(this,t.cause,r):t}},72033:function(e,t,r){"use strict";r.d(t,{$S:function(){return u},JK:function(){return a},X4:function(){return n},XZ:function(){return c},aH:function(){return o},wi:function(){return s}});var i=r(22265);class n extends i.G{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class s extends i.G{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class o extends i.G{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class a extends i.G{constructor({address:e,connector:t}){super(`Account "${e}" not found for connector "${t.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class c extends i.G{constructor({connectionChainId:e,connectorChainId:t}){super(`The current chain of the connector (id: ${t}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class u extends i.G{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:"During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uuid`. All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored. This error commonly occurs for connectors that asynchronously inject after reconnection has already started."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}},99034:function(e,t,r){"use strict";function i(e){return JSON.stringify(e,(e,t)=>!function(e){if(!n(e))return!1;let t=e.constructor;if(void 0===t)return!0;let r=t.prototype;return!!(n(r)&&r.hasOwnProperty("isPrototypeOf"))}(t)?"bigint"==typeof t?t.toString():t:Object.keys(t).sort().reduce((e,r)=>(e[r]=t[r],e),{}))}function n(e){return"[object Object]"===Object.prototype.toString.call(e)}function s(e){let{_defaulted:t,behavior:r,gcTime:i,initialData:n,initialDataUpdatedAt:s,maxPages:o,meta:a,networkMode:c,queryFn:u,queryHash:l,queryKey:h,queryKeyHashFn:d,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:y,getNextPageParam:v,initialPageParam:m,_optimisticResults:_,enabled:b,notifyOnChangeProps:w,placeholderData:E,refetchInterval:S,refetchIntervalInBackground:I,refetchOnMount:C,refetchOnReconnect:D,refetchOnWindowFocus:P,retryOnMount:k,select:A,staleTime:O,suspense:x,throwOnError:R,config:N,connector:T,query:M,...L}=e;return L}r.d(t,{OP:function(){return s},kq:function(){return i}})},71376:function(e,t,r){"use strict";r.d(t,{v:function(){return function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){let i,n;if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)&&Array.isArray(r)){if((i=t.length)!==r.length)return!1;for(n=i;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();let s=Object.keys(t);if((i=s.length)!==Object.keys(r).length)return!1;for(n=i;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,s[n]))return!1;for(n=i;0!=n--;){let i=s[n];if(i&&!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r}}})},75382:function(e,t,r){"use strict";function i(e,t,r){let i=e[t.name];if("function"==typeof i)return i;let n=e[r];return"function"==typeof n?n:r=>t(e,r)}r.d(t,{s:function(){return i}})},69036:function(e,t,r){"use strict";r.d(t,{i:function(){return i}});let i="2.13.7"},74127:function(e,t,r){"use strict";r.d(t,{_:function(){return h}});let i=async e=>Number(await e.request({method:"eth_chainId",params:[]}));var n=r(58816),s=r(87703);let o=async(e,{hash:t})=>{let r=await e.request({method:"eth_getUserOperationByHash",params:[t]});if(!r)return null;let{userOperation:i,entryPoint:n,transactionHash:o,blockHash:a,blockNumber:c}=r;return{userOperation:n===s.i?{...i,nonce:BigInt(i.nonce),callGasLimit:BigInt(i.callGasLimit),verificationGasLimit:BigInt(i.verificationGasLimit),preVerificationGas:BigInt(i.preVerificationGas),maxFeePerGas:BigInt(i.maxFeePerGas),maxPriorityFeePerGas:BigInt(i.maxPriorityFeePerGas)}:{...i,nonce:BigInt(i.nonce),callGasLimit:BigInt(i.callGasLimit),verificationGasLimit:BigInt(i.verificationGasLimit),preVerificationGas:BigInt(i.preVerificationGas),maxFeePerGas:BigInt(i.maxFeePerGas),maxPriorityFeePerGas:BigInt(i.maxPriorityFeePerGas),paymasterVerificationGasLimit:i.paymasterVerificationGasLimit?BigInt(i.paymasterVerificationGasLimit):void 0,paymasterPostOpGasLimit:i.paymasterVerificationGasLimit?BigInt(i.paymasterPostOpGasLimit):void 0},entryPoint:n,transactionHash:o,blockHash:a,blockNumber:BigInt(c)}};var a=r(14157),c=r(62691);let u=async e=>e.request({method:"eth_supportedEntryPoints",params:[]});var l=r(91503);let h=e=>t=>({sendUserOperation:async r=>(0,c.X)(t,{...r,entryPoint:e}),estimateUserOperationGas:(r,i)=>(0,n.g)(t,{...r,entryPoint:e},i),supportedEntryPoints:()=>u(t),chainId:()=>i(t),getUserOperationByHash:e=>o(t,e),getUserOperationReceipt:e=>(0,a.M)(t,e),waitForUserOperationReceipt:e=>(0,l.C)(t,e)})},69659:function(e,t,r){"use strict";r.d(t,{V:function(){return a},F:function(){return c}});var i=r(50180);let n=!1;async function s(e,t={}){let r;if(n)return[];n=!0,e.setState(e=>({...e,status:e.current?"reconnecting":"connecting"}));let i=[];if(t.connectors?.length)for(let r of t.connectors){let t;t="function"==typeof r?e._internal.connectors.setup(r):r,i.push(t)}else i.push(...e.connectors);try{r=await e.storage?.getItem("recentConnectorId")}catch{}let s={};for(let[,t]of e.state.connections)s[t.connector.id]=1;r&&(s[r]=0);let o=Object.keys(s).length>0?[...i].sort((e,t)=>(s[e.id]??10)-(s[t.id]??10)):i,a=!1,c=[],u=[];for(let t of o){let r=await t.getProvider().catch(()=>void 0);if(!r||u.some(e=>e===r)||!await t.isAuthorized())continue;let i=await t.connect({isReconnecting:!0}).catch(()=>null);i&&(t.emitter.off("connect",e._internal.events.connect),t.emitter.on("change",e._internal.events.change),t.emitter.on("disconnect",e._internal.events.disconnect),e.setState(e=>{let r=new Map(a?e.connections:new Map).set(t.uid,{accounts:i.accounts,chainId:i.chainId,connector:t});return{...e,current:a?e.current:t.uid,connections:r}}),c.push({accounts:i.accounts,chainId:i.chainId,connector:t}),u.push(r),a=!0)}return("reconnecting"===e.state.status||"connecting"===e.state.status)&&(a?e.setState(e=>({...e,status:"connected"})):e.setState(e=>({...e,connections:new Map,current:null,status:"disconnected"}))),n=!1,c}function o(e){let{children:t,config:r,initialState:n,reconnectOnMount:o=!0}=e,{onMount:a}=function(e,t){let{initialState:r,reconnectOnMount:i}=t;return r&&!e._internal.store.persist.hasHydrated()&&e.setState({...r,chainId:e.chains.some(e=>e.id===r.chainId)?r.chainId:e.chains[0].id,connections:i?r.connections:new Map,status:i?"reconnecting":"disconnected"}),{async onMount(){if(e._internal.ssr){await e._internal.store.persist.rehydrate();let t=e._internal.mipd?.getProviders().map(e._internal.connectors.providerDetailToConnector).map(e._internal.connectors.setup);e._internal.connectors.setState(e=>[...e,...t??[]])}i?s(e):e.storage&&e.setState(e=>({...e,connections:new Map}))}}}(r,{initialState:n,reconnectOnMount:o});r._internal.ssr||a();let c=(0,i.useRef)(!0);return(0,i.useEffect)(()=>{if(c.current&&r._internal.ssr)return a(),()=>{c.current=!1}},[]),t}let a=(0,i.createContext)(void 0);function c(e){let{children:t,config:r}=e;return(0,i.createElement)(o,e,(0,i.createElement)(a.Provider,{value:r},t))}},93858:function(e,t,r){"use strict";r.d(t,{m:function(){return u}});var i=r(71376),n=r(69727),s=r(19664),o=r(50180),a=r(2096);let c=e=>"object"==typeof e&&!Array.isArray(e);function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.Z)(e);return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.v,s=(0,o.useRef)([]),u=(0,a.useSyncExternalStoreWithSelector)(e,t,r,e=>e,(e,t)=>{if(c(e)&&c(t)&&s.current.length){for(let r of s.current)if(!n(e[r],t[r]))return!1;return!0}return n(e,t)});if(c(u)){let e={...u},t={};for(let[r,i]of Object.entries(e))t={...t,[r]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(r)||s.current.push(r),i)}};return Object.defineProperties(e,t),e}return u}(e=>(function(e,t){let{onChange:r}=t;return e.subscribe(()=>(0,n.D)(e),r,{equalityFn(e,t){let{connector:r,...n}=e,{connector:s,...o}=t;return(0,i.v)(n,o)&&r?.id===s?.id&&r?.uid===s?.uid}})})(t,{onChange:e}),()=>(0,n.D)(t))}},36983:function(e,t,r){"use strict";function i(e){return e.state.chainId}r.d(t,{x:function(){return o}});var n=r(50180),s=r(19664);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.Z)(e);return(0,n.useSyncExternalStore)(e=>(function(e,t){let{onChange:r}=t;return e.subscribe(e=>e.chainId,r)})(t,{onChange:e}),()=>i(t),()=>i(t))}},19664:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var i=r(50180),n=r(69659),s=r(22265);let o=()=>"wagmi@2.12.14";class a extends s.G{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return o()}}class c extends a{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function u(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=null!==(e=t.config)&&void 0!==e?e:(0,i.useContext)(n.V);if(!r)throw new c;return r}},39439:function(e,t,r){"use strict";r.d(t,{N:function(){return p}});var i=r(8678),n=r(75382),s=r(67323);async function o(e,t){let r;let{chainId:o,connector:a,...c}=t;r=t.account?t.account:(await (0,s.e)(e,{account:t.account,chainId:o,connector:a})).account;let u=e.getClient({chainId:o});return(0,n.s)(u,i.Q,"estimateGas")({...c,account:r})}var a=r(99034),c=r(23744),u=r(36983),l=r(19664),h=r(38040),d=r(50180),f=r(93858);function p(){var e,t,r;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{connector:n,query:p={}}=i,g=(0,l.Z)(i),{data:y}=function(){var e,t,r;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:n={},...o}=i,p=(0,l.Z)(o),g=(0,h.useQueryClient)(),{address:y,connector:v,status:m}=(0,f.m)({config:p}),_=(0,u.x)({config:p}),b=null!==(e=i.connector)&&void 0!==e?e:v,{queryKey:w,...E}=function(e,t={}){return{gcTime:0,async queryFn({queryKey:r}){let{connector:i}=t,{connectorUid:n,scopeKey:o,...a}=r[1];return(0,s.e)(e,{...a,connector:i})},queryKey:function(e={}){let{connector:t,...r}=e;return["connectorClient",{...(0,a.OP)(r),connectorUid:t?.uid}]}(t)}}(p,{...i,chainId:null!==(t=i.chainId)&&void 0!==t?t:_,connector:b}),S=!!(("connected"===m||"reconnecting"===m&&(null==b?void 0:b.getProvider))&&(null===(r=n.enabled)||void 0===r||r)),I=(0,d.useRef)(y);return(0,d.useEffect)(()=>{let e=I.current;!y&&e?(g.removeQueries({queryKey:w}),I.current=void 0):y!==e&&(g.invalidateQueries({queryKey:w}),I.current=y)},[y,g]),(0,c.aM)({...n,...E,queryKey:w,enabled:S,staleTime:Number.POSITIVE_INFINITY})}({connector:n,query:{enabled:void 0===i.account}}),v=null!==(e=i.account)&&void 0!==e?e:null==y?void 0:y.account,m=(0,u.x)({config:g}),_=function(e,t={}){return{async queryFn({queryKey:r}){let{connector:i}=t,{account:n,scopeKey:s,...a}=r[1];if(!n&&!i)throw Error("account or connector is required");return o(e,{account:n,connector:i,...a})},queryKey:function(e={}){let{connector:t,...r}=e;return["estimateGas",(0,a.OP)(r)]}(t)}}(g,{...i,account:v,chainId:null!==(t=i.chainId)&&void 0!==t?t:m,connector:n}),b=!!((v||n)&&(null===(r=p.enabled)||void 0===r||r));return(0,c.aM)({...p,..._,enabled:b})}},4897:function(e,t,r){"use strict";r.d(t,{p:function(){return h}});var i=r(11451),n=r(8678),s=r(39664),o=r(75382),a=r(69727),c=r(67323);async function u(e,t){let r;let{account:i,chainId:u,connector:l,gas:h,...d}=t;r="object"==typeof i&&"local"===i.type?e.getClient({chainId:u}):await (0,c.e)(e,{account:i,chainId:u,connector:l});let{connector:f}=(0,a.D)(e),p=await (async()=>{if(!(!("data"in t)||!t.data||(l??f)?.supportsSimulation)&&null!==h)return void 0===h?(0,o.s)(r,n.Q,"estimateGas")({...d,account:i,chain:u?{id:u}:null}):h})(),g=(0,o.s)(r,s.T,"sendTransaction");return await g({...d,...i?{account:i}:{},gas:p,chain:u?{id:u}:null})}var l=r(19664);function h(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{mutation:r}=t,n=(e=(0,l.Z)(t),{mutationFn:t=>u(e,t),mutationKey:["sendTransaction"]}),{mutate:s,mutateAsync:o,...a}=(0,i.useMutation)({...r,...n});return{...a,sendTransaction:s,sendTransactionAsync:o}}},19174:function(e,t,r){"use strict";r.d(t,{A:function(){return c}});var i=r(92930),n=r(99034),s=r(23744),o=r(36983),a=r(19664);function c(){var e,t;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{hash:c,query:u={}}=r,l=(0,a.Z)(r),h=(0,o.x)({config:l}),d=function(e,t={}){return{async queryFn({queryKey:r}){let{hash:n,...s}=r[1];if(!n)throw Error("hash is required");return(0,i.e)(e,{...s,onReplaced:t.onReplaced,hash:n})},queryKey:function(e={}){let{onReplaced:t,...r}=e;return["waitForTransactionReceipt",(0,n.OP)(r)]}(t)}}(l,{...r,chainId:null!==(e=r.chainId)&&void 0!==e?e:h}),f=!!(c&&(null===(t=u.enabled)||void 0===t||t));return(0,s.aM)({...u,...d,enabled:f})}},23744:function(e,t,r){"use strict";r.d(t,{aM:function(){return s}});var i=r(73563),n=r(99034);function s(e){let t=(0,i.useQuery)({...e,queryKeyHashFn:n.kq});return t.queryKey=e.queryKey,t}}}]);